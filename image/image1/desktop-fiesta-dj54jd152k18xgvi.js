!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(101)},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={chat:"//eco-api.meiqia.com",upload:"//eco-api-upload.meiqia.com",socket:"https://eco-push-api-client.meiqia.com/pusher",widget:"//eco-api.meiqia.com/dist",cdn:"//static.meiqia.com/dist",picture:"//s3.cn-north-1.amazonaws.com.cn/pics.meiqia.bucket",tail:"585um0nvk3n2ke29"}},function(e,t,n){var a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(){function r(e,t){return(/string|function/.test("undefined"==typeof t?"undefined":i(t))?f:d)(e,t)}function o(e,t){return"string"!=typeof e&&(t="undefined"==typeof e?"undefined":i(e),"number"===t?e+="":e="function"===t?o(e.call(e)):""),e}function s(e){return g[e]}function l(e){return o(e).replace(/&(?![\w#]+;)|[<>"']/g,s)}function u(e,t){if(v(e))for(var n=0,a=e.length;a>n;n++)t.call(e,e[n],n,e);else for(n in e)t.call(e,e[n],n)}function c(e,t){var n=/(\/)[^\/]+\1\.\.\1/,a=("./"+e).replace(/[^\/]+$/,""),i=a+t;for(i=i.replace(/\/\.\//g,"/");i.match(n);)i=i.replace(n,"/");return i}function d(e,t){var n=r.get(e)||p({filename:e,name:"Render Error",message:"Template not found"});return t?n(t):n}function f(e,t){if("string"==typeof t){var n=t;t=function(){return new m(n)}}var a=h[e]=function(n){try{return new t(n,e)+""}catch(a){return p(a)()}};return a.prototype=t.prototype=y,a.toString=function(){return t+""},a}function p(e){var t="{Template Error}",n=e.stack||"";if(n)n=n.split("\n").slice(0,2).join("\n");else for(var a in e)n+="<"+a+">\n"+e[a]+"\n\n";return function(){return"object"==("undefined"==typeof console?"undefined":i(console))&&console.error(t+"\n\n"+n),t}}var h=r.cache={},m=this.String,g={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},v=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},y=r.utils={$helpers:{},$include:function(e,t,n){return e=c(n,e),d(e,t)},$string:o,$escape:l,$each:u},b=r.helpers=y.$helpers;r.get=function(e){return h[e.replace(/^\.\//,"")]},r.helper=function(e,t){b[e]=t},a=function(){return r}.call(t,n,t,e),!(void 0!==a&&(e.exports=a)),r("audio",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),a=e.cdn,i="";return i+='<audio id="newChat" preload="preload"> <source src="',i+=n(a),i+='/audio/new-chat.ogg" type="audio/ogg" /> <source src="',i+=n(a),i+='/audio/new-chat.mp3" type="audio/mpeg" /> </audio> <audio id="newMessage" preload="preload"> <source src="',i+=n(a),i+='/audio/new-message.ogg" type="audio/ogg" /> <source src="',i+=n(a),i+='/audio/new-message.mp3" type="audio/mpeg" /> </audio> <audio id="sentMessage" preload="preload"> <source src="',i+=n(a),i+='/audio/sent-message.ogg" type="audio/ogg" /> <source src="',i+=n(a),i+='/audio/sent-message.mp3" type="audio/mpeg" /> </audio>',new m(i)}),r("chat-has-end",'对话已结束，你可以<a class="btn-restart-chat">开始新的对话</a>或<a class="btn-go-ticket">留言</a>'),r("emoji",function(e){"use strict";var t=this,n=(t.$helpers,t.$each),a=e.list,i=(e.v,e.k,t.$escape),r="";return n(a,function(e){r+=' <i class="emoji-control emoji-',r+=i(e),r+='" onclick="window.CHOSE_EMOJI(\':',r+=i(e),r+=":')\"></i> "}),r+=' <div class="clearfix"></div>',new m(r)}),r("evaluation-basic",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),a=e.intro,i="";return i+='<div class="evaluation-header"> <a id="evaluationHide"> <i class="icon icon-times"></i> </a> <div class="intro">',i+=n(a),i+='</div> </div> <div class="evaluation-body"> <div class="evaluation-btn-group"> <input id="evaluationLevel" type="hidden" /> <div id="evaluation2" class="evaluation-btn"> <i class="icon icon-smile"></i> <span>好评</span> </div> <div id="evaluation1" class="evaluation-btn"> <i class="icon icon-neutral"></i> <span>中评</span> </div> <div id="evaluation0" class="evaluation-btn"> <i class="icon icon-angry"></i> <span>差评</span> </div> </div> <div class="evaluation-reason"> <label for="evaluationContent">请填写评价内容（选填）</label> <textarea id="evaluationContent"></textarea> <button id="evaluationSubmit">提交</button> </div> </div> ',new m(i)}),r("evaluation",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),a=e.intro,i="";return i+='<div class="evaluation-header"> <a id="evaluationHide"> <i class="icon icon-times"></i> </a> <div class="intro">',i+=n(a),i+='</div> </div> <div class="evaluation-body"> <div class="evaluation-btn-group"> <input id="evaluationLevel" type="hidden" /> <div id="evaluation2" class="evaluation-btn"> <i class="icon icon-smile"></i> <span>好评</span> </div> <div id="evaluation1" class="evaluation-btn"> <i class="icon icon-neutral"></i> <span>中评</span> </div> <div id="evaluation0" class="evaluation-btn"> <i class="icon icon-angry"></i> <span>差评</span> </div> </div> <div class="evaluation-reason"> <textarea id="evaluationContent" placeholder="请填写评价内容（选填）"></textarea> <button id="evaluationSubmit">提交</button> </div> </div> ',new m(i)}),r("features",function(e){"use strict";var t=this,n=(t.$helpers,e.emoji),a=e.photo,i=e.upload,r=e.evaluation,o="";return n&&(o+=' <a id="emojiBtn" class="feature-btn" title="表情"> <i class="icon icon-emoji"></i> </a> '),o+=" ",a&&(o+=' <label id="photoBtn" class="feature-btn" title="发送图片"> <i class="icon icon-photo"></i> <input id="photoFile" type="file" accept="image/gif, image/jpeg, image/jpg, image/png"> </label> '),o+=" ",i&&(o+=' <label id="uploadBtn" class="feature-btn" title="发送文件"> <i class="icon icon-upload"></i> <input id="uploadFile" type="file"> </label> '),o+=" ",r&&(o+=' <a id="evaluationBtn" class="feature-btn" title="评价"> <i class="icon icon-evaluation"></i> </a> '),new m(o)}),r("header-customer",function(e){"use strict";var t=this,n=(t.$helpers,e.photoType),a=t.$escape,i=e.avatar,r=e.signature,o=e.name,s="";return"small"===n&&(s+=' <img class="agent-avatar" src="',s+=a(i),s+='" alt="avatar"> '),s+=" ",s+="small"===n?' <div class="agent-info" style="margin-left: 54px"> ':' <div class="agent-info"> ',s+=' <div class="agent-name ',r||(s+="without-signature"),s+='"> ',s+=a(o),s+=' <span id="agentInputting">对方输入消息中...</span> </div> <div class="agent-signature" title="',s+=a(r),s+='">',s+=a(r),s+="</div> </div> ",new m(s)}),r("header-fusion",function(e){"use strict";var t=this,n=(t.$helpers,e.signature),a=t.$escape,i=e.name,r="";return r+='<div class="agent-info"> <div class="agent-name ',n||(r+="without-signature"),r+='"> ',r+=a(i),r+=' <span id="agentInputting">对方输入消息中...</span> </div> <div class="agent-signature" title="',r+=a(n),r+='">',r+=a(n),r+="</div> </div>",new m(r)}),r("header-loading",'<div id="loading"> 连接中<span class="dot1">.</span><span class="dot2">.</span><span class="dot3">.</span> </div>'),r("header-mondeo",function(e){"use strict";var t=this,n=(t.$helpers,e.signature),a=t.$escape,i=e.name,r="";return r+='<div class="agent-info"> <div class="agent-name ',n||(r+="without-signature"),r+='"> ',r+=a(i),r+=' <span id="agentInputting">对方输入消息中...</span> </div> <div class="agent-signature" title="',r+=a(n),r+='">',r+=a(n),r+="</div> </div>",new m(r)}),r("header",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),a=e.avatar,i=e.signature,r=e.name,o="";return o+='<img class="agent-avatar" src="',o+=n(a),o+='" alt="avatar"> <div class="agent-info"> <div class="agent-name ',i||(o+="without-signature"),o+='"> ',o+=n(r),o+=' <span id="agentInputting">对方输入消息中...</span> </div> <div class="agent-signature" title="',o+=n(i),o+='">',o+=n(i),o+="</div> </div>",new m(o)}),r("msg",function(e){"use strict";var t=this,n=(t.$helpers,t.$each),a=e.list,i=(e.v,e.k,t.$escape),r=t.$string,o=(e.rv,e.rk,e.mv,e.mk,e.historyTimes),s="";return n(a,function(e){s+=" ","bot"===e.from_type?(s+=' <div id="',s+=i(e.id),s+='" class="msg-bot"> <div class="name"> ',s+=i(e.agent.nickname),s+=" ",e.displayDate&&(s+=' <span id="date',s+=i(e.id),s+='" class="date">',s+=r(e.displayDate),s+="</span> "),s+=" </div> ","welcome"===e.content_type?(s+=' <div class="bubble"> <span class="arrow-bg"></span> <span class="arrow"></span> <div class="text"> ',s+=r(e.content),s+=" </div> </div> "):"text"===e.content_type||"bot"===e.content_type?(s+=' <div class="bubble rich-text-bubble"> <span class="arrow-bg"></span> <span class="arrow"></span> ',e.content_robot&&e.content_robot.length?(s+=" ",n(e.content_robot,function(e){s+=" ","text"===e.type?(s+=" ",e.rich_text?(s+=' <div class="text rich_text">',s+=r(e.rich_text),s+="</div> "):(s+=' <div class="text">',s+=r(e.text),s+="</div> "),s+=" "):("menu"===e.type||"related"===e.type)&&(s+=" ",e.text_before&&(s+=' <div class="menu-tips">',s+=i(e.text_before),s+="</div> "),s+=' <div class="menu"> ',e.items&&e.items.length&&(s+=" <ol>",n(e.items,function(e){s+=" <li> ",e.link?(s+=' <a class="menu-item" data-value="',s+=r(e.value),s+='" href="',s+=r(e.link),s+='" target="_blank">',s+=r(e.text),s+="</a> "):(s+=' <span class="menu-item" data-value="',s+=r(e.value),s+='">',s+=r(e.text),s+="</span> "),s+=" </li> "}),s+='</ol> <div class="menu-tips">点击问题或回复数字查看答案</div> '),s+=" </div> "),s+=" "}),s+=" "):e.content&&(s+=' <div class="text">',s+=r(e.content),s+="</div> "),s+=" ","evaluate"===e.sub_type&&(s+=' <div class="rating" data-question-id="',s+=r(e.question_id),s+='"> <a href="javascript:;;" class="option" data-option="useful">解决</a> <a href="javascript:;;" class="option" data-option="useless">未解决</a> <span class="rated-text">已反馈</span> <span class="pending-text">提交中</span> <span class="split"></span> </div> '),s+=" </div> "):"rich_text"===e.content_type?(s+=' <div class="bubble rich-text-bubble"> <span class="arrow-bg"></span> <span class="arrow"></span> <div class="text rich_text">',s+=r(e.extra.content),s+="</div> ","evaluate"===e.sub_type&&(s+=' <div class="rating" data-question-id="',s+=r(e.question_id),s+='"> <a href="javascript:;;" class="option" data-option="useful">解决</a> <a href="javascript:;;" class="option" data-option="useless">未解决</a> <span class="rated-text">已反馈</span> <span class="pending-text">提交中</span> <span class="split"></span> </div> '),s+=" </div> "):"photo"===e.content_type&&(s+=' <div class="photo"> <a href="',s+=i(e.content),s+='" target="_blank"> ',o>1?(s+=' <img src="',s+=i(e.content),s+='" /> '):(s+=' <img src="',s+=i(e.content),s+='" onload="window.SCROLL_TO_LAST()" /> '),s+=" </a> </div> "),s+=" </div> "):"agent"===e.from_type&&(s+=' <div id="',s+=i(e.id),s+='" class="msg-agent"> <div class="name"> ',s+=i(e.agent.nickname),s+=" ",e.displayDate&&(s+=' <span id="date',s+=i(e.id),s+='" class="date">',s+=r(e.displayDate),s+="</span> "),s+=" </div> ","welcome"===e.content_type?(s+=' <div class="bubble"> <span class="arrow-bg"></span> <span class="arrow"></span> <div class="text">',s+=r(e.content),s+="</div> </div> "):"text"===e.content_type?(s+=' <div class="bubble"> <span class="arrow-bg"></span> <span class="arrow"></span> <div class="text">',s+=r(e.content),s+="</div> </div> "):"rich_text"===e.content_type?(s+=' <div class="bubble rich-text-bubble"> <span class="arrow-bg"></span> <span class="arrow"></span> <div class="text rich_text">',s+=r(e.extra.content),s+="</div> </div> "):"photo"===e.content_type?(s+=' <div class="photo"> <a href="',s+=i(e.content),s+='" target="_blank"> ',o>1?(s+=' <img src="',s+=i(e.content),s+='" /> '):(s+=' <img src="',s+=i(e.content),s+='" onload="window.SCROLL_TO_LAST()" /> '),s+=" </a> </div> "):"file"===e.content_type&&(s+=' <div class="file"> <span class="arrow-bg"></span> <span class="arrow"></span> <i class="icon icon-file"></i> <div class="content"> <div class="title"> <span class="file-name" title="',s+=i(e.extra.filename),s+='">',s+=i(e.extra.filename),s+='</span> <span class="file-size">',s+=i(e.extra.convert_size),s+='</span> </div> <div class="sub"> ',e.extra.cancel?s+=' <span class="file-state">对方取消发送</span> ':(s+=" ",e.extra.has_expired?(s+=' <span class="file-state">',s+=i(e.extra.has_expired),s+='后过期</span> <a class="btn-download" name="',s+=i(e.id),s+=",",s+=i(e.conversation_id),s+='" href="',s+=i(e.media_url),s+='" target="_blank"> <i class="icon icon-download"></i> <span>下载</span> </a> '):s+=' <span class="file-state">已过期</span> ',s+=" "),s+=" </div> </div> </div> "),s+=" </div> "),s+=" ","client"===e.from_type&&(s+=' <div id="',s+=i(e.id),s+='" class="msg-client"> ',e.displayDate&&(s+=' <div id="date',s+=i(e.id),s+='" class="date">',s+=r(e.displayDate),s+="</div> "),s+=" ","text"===e.content_type?(s+=' <div class="bubble"> <span class="arrow"></span> <div class="text">',s+=r(e.content),s+="</div> ","sending"===e.status&&(s+=' <span id="status',s+=i(e.id),s+='" class="status icon"></span> '),s+=" </div> "):"photo"===e.content_type?(s+=' <div class="photo"> <a href="',s+=i(e.content),s+='" target="_blank"> ',o>1?(s+=' <img id="photo',s+=i(e.id),s+='" src="',s+=i(e.content),s+='" /> '):(s+=' <img id="photo',s+=i(e.id),s+='" src="',s+=i(e.content),s+='" onload="window.SCROLL_TO_LAST()" /> '),s+=" </a> ","sending"===e.status&&(s+=' <span id="status',s+=i(e.id),s+='" class="status icon"></span> '),s+=" </div> "):"file"===e.content_type&&(s+=' <div class="file"> <span class="arrow-bg"></span> <span class="arrow"></span> <i class="icon icon-file"></i> <div class="content"> <div class="title"> <span class="file-name" title="',s+=i(e.extra.filename),s+='">',s+=i(e.extra.filename),s+='</span> <span class="file-size">',s+=i(e.extra.convert_size),s+='</span> </div> <div class="sub"> ',e.uploading?(s+=' <span id="progress',s+=i(e.id),s+='" class="progress-holder"> <span class="progress-bg"> <span id="progressBar',s+=i(e.id),s+='" class="progress-bar"></span> </span> </span> <a id="cancelUpload',s+=i(e.id),s+='" class="btn-cancel-upload"> <i class="icon icon-cancel-upload"></i> </a> <span id="fileState',s+=i(e.id),s+='" class="file-state">上传中&nbsp;<span id="speed',s+=i(e.id),s+='"></span></span> '):(s+=" ",e.extra.cancel?s+=' <span class="file-state">取消上传</span> ':(s+=" ",e.extra.has_expired?(s+=' <span class="file-state">',s+=i(e.extra.has_expired),s+="后过期</span> "):s+=' <span class="file-state">已过期</span> ',s+=" "),s+=" "),s+=" </div> </div> </div> "),s+=" </div> "),s+=" ","redirect"===e.from_type&&(s+=' <div id="',s+=i(e.id),s+='" class="msg-redirect"> 接下来由<span>',s+=i(e.toNickname),s+="</span>为您服务 </div> "),s+=" ","evaluation"===e.from_type&&(s+=' <div id="',s+=i(e.id),s+='" class="msg-evaluation"> 你给出了 <span class="evaluation-level evaluation-level-',s+=i(e.level),s+='">',s+=i(e.levelText),s+="</span> ",e.content&&(s+=' <div class="evaluation-content">',s+=i(e.content),s+="</div> "),s+=" </div> "),s+=" ","blacklist"===e.from_type&&(s+=' <div id="',s+=i(e.id),s+='" class="msg-blacklist">你被移出了黑名单</div> '),s+=" "}),s+=" ",new m(s)}),r("profile-customer",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),a=e.bgColor,i=e.photoType,r=e.avatar,o=e.name,s=t.$string,l=e.content,u="";return u+='<div class="profile-contact" style="background-color: #',u+=n(a),u+='"> ',"big"===i&&(u+=' <img class="profile-avatar" src="',u+=n(r),u+='" alt="avatar"> <div class="profile-name">',u+=n(o),u+="</div> "),u+=" ",u+=s(l),u+=" </div> ",new m(u)}),r("profile",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),a=e.avatar,i=e.name,r=e.tel,o=e.cellphone,s=e.email,l=e.qq,u=e.weixin,c="";return c+='<img class="profile-avatar" src="',c+=n(a),c+='" alt="avatar"> <div class="profile-name">',c+=n(i),c+='</div> <div class="profile-contact"> ',r&&(c+=' <a> <i class="icon icon-tel"></i> <span>',c+=n(r),c+="</span> </a> "),c+=" ",o&&(c+=' <a> <i class="icon icon-cellphone"></i> <span>',c+=n(o),c+="</span> </a> "),c+=" ",s&&(c+=' <a> <i class="icon icon-email"></i> <span>',c+=n(s),c+="</span> </a> "),c+=" ",l&&(c+=' <a> <i class="icon icon-qq"></i> <span>',c+=n(l),c+="</span> </a> "),c+=" ",u&&(c+=' <a> <i class="icon icon-weixin"></i> <span>',c+=n(u),c+="</span> </a> "),c+=" </div>",new m(c)}),r("queueing",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),a=e.intro,i=e.position,r="";return r+='<div class="queue-header">',r+=n(a),r+='</div> <div class="queue-body"> <div class="queue-position-title">当前等待人数</div> <span id="queueingPosition">',r+=n(i),r+='</span> </div> <div class="queue-footer"> <p>如果等不及，可以选择</p> <a class="btn-go-ticket">给我们留言</a> </div>',new m(r)}),r("support",function(e){"use strict";var t=this,n=(t.$helpers,e.disableBrandLink),a=t.$escape,i=e.entId,r="";return r+="<a ",n!==!0&&(r+='href="http://meiqia.com?pk_campaign=widget-badge&pk_kwd=',r+=a(i),r+='"'),r+=' target="_blank"> <i class="icon icon-logo-gray"></i> <span>客服软件由美洽提供</span> </a>',new m(r)}),r("survey",function(e){"use strict";var t=this,n=(t.$helpers,e.menus),a=t.$escape,i=t.$each,r=(e.v,e.k,e.inputs),o=e.val,s=(e.key,e.captcha),l="";return"open"===n.status&&(l+=' <div id="surveyStep1" class="active"> <div class="step-title">',l+=a(n.title),l+="</div> ",i(n.assignments,function(e,t){l+=' <div class="menus-item"> <a id="',l+=a(e.target_kind),l+="_",l+=a(e.target),l+='" name="surveyMenus" title="',l+=a(e.description),l+='">',l+=a(t+1),l+=". ",l+=a(e.description),l+="</a> </div> "}),l+=" </div> "),l+=" ","open"===r.status&&(l+=' <div id="surveyStep2" ',"close"===n.status&&(l+='class="active"'),l+='> <div class="step-title">',l+=a(r.title),l+="</div> ",i(r.fields,function(e){l+=" ",e.ignore||(l+=' <div class="form-group"> <div class="group-title">',l+=a(e.display_name),e.optional||(l+="<span>*</span>"),l+='</div> <div class="group-content"> ',"text"===e.type?(l+=' <input name="',l+=a(e.field_name),l+='" ',l+=e.optional?'class="survey-input-text"':'class="survey-input-text required"',l+=' type="text" value="',l+=a(o),l+='" placeholder="请输入" /> '):"single_choice"===e.type?(l+=" ",i(e.choices,function(t){l+=' <div class="choice-item"> <label> <input name="',l+=a(e.field_name),l+='" ',e.optional||(l+='class="required"'),l+=' type="radio" value="',l+=a(t),l+='" /> <span>',l+=a(t),l+="</span> </label> </div> "}),l+=" "):"multiple_choice"===e.type&&(l+=" ",i(e.choices,function(t){l+=' <div class="choice-item"> <label> <input name="',l+=a(e.field_name),l+='" ',e.optional||(l+='class="required"'),l+=' type="checkbox" value="',l+=a(t),l+='" /> <span>',l+=a(t),l+="</span> </label> </div> "}),l+=" "),l+=" </div> </div> "),l+=" "}),l+=" ",s&&(l+=' <div class="captcha-group"> <div class="group-title">验证码<span>*</span></div> <div class="group-content"> <div class="captcha-input"> <input id="surveyCaptcha" class="required" type="text" /> </div> <div class="captcha-img"> <img id="surveyCaptchaImg" src="" /> </div> </div> </div> '),l+=' <div class="btn-group"> <a id="surveySubmit">提交</a> </div> </div> '),new m(l)}),r("ticket-basic",function(e){"use strict";var t=this,n=(t.$helpers,e.intro),a=t.$escape,i=e.categories,r=t.$each,o=(e.val,e.key,t.$string),s=e.name,l=e.contactRule,u=e.tel,c=e.email,d=e.wechat,f=e.qq,p=e.defaultTemplate,h=e.defaultTemplateContent,g=e.captcha,v="";return v+='<div id="ticketV2" class="active"> ',n&&(v+=' <div class="step-title">',v+=a(n),v+="</div> "),v+=" ",i&&i.length>0&&(v+=' <div class="form-group"> <div class="group-title">分类<span>*</span></div> <div class="group-content"> ',r(i,function(e){v+=' <div class="choice-item"> <label> <input name="categories" type="radio" value="',v+=o(e.id),v+='" /> <span>',v+=o(e.name),v+="</span> </label> </div> "}),v+=" </div> </div> "),v+=" ","open"===s&&(v+=' <div class="form-group"> <div class="group-title"> 姓名 ',"multi"===l&&(v+=" <span>*</span> "),v+=' </div> <div class="group-content"> <input id="ticketName" type="text"> </div> </div> '),v+=" ","open"===u&&(v+=' <div class="form-group"> <div class="group-title"> 手机 ',"multi"===l&&(v+=" <span>*</span> "),v+=' </div> <div class="group-content"> <input id="ticketTel" type="text"> </div> </div> '),v+=" ","open"===c&&(v+=' <div class="form-group"> <div class="group-title"> 邮箱 ',"multi"===l&&(v+=" <span>*</span> "),v+=' </div> <div class="group-content"> <input id="ticketEmail" type="text"> </div> </div> '),v+=" ","open"===d&&(v+=' <div class="form-group"> <div class="group-title"> 微信 ',"multi"===l&&(v+=" <span>*</span> "),v+=' </div> <div class="group-content"> <input id="ticketWechat" type="text"> </div> </div> '),v+=" ","open"===f&&(v+=' <div class="form-group"> <div class="group-title"> QQ ',"multi"===l&&(v+=" <span>*</span> "),v+=' </div> <div class="group-content"> <input id="ticketQq" type="text"> </div> </div> '),v+=' <div class="form-group"> <div class="group-title">留言内容<span>*</span></div> <div class="group-content"> ',"open"===p?(v+=' <textarea id="ticketContent">',v+=a(h),v+="</textarea> "):v+=' <textarea id="ticketContent"></textarea> ',v+=" </div> </div> ","open"===g&&(v+=' <div class="captcha-group"> <div class="group-title">验证码<span>*</span></div> <div class="group-content"> <div class="captcha-input"> <input id="ticketCaptcha" class="required" type="text"/> </div> <div class="captcha-img"> <img id="ticketCaptchaImg" src="" /> </div> </div> </div> '),v+=' <div class="btn-group"> <a id="ticketSubmit">提交</a> </div> </div> ',new m(v)}),r("ticket",function(e){"use strict";var t=this,n=(t.$helpers,e.intro),a=t.$escape,i=e.categories,r=t.$each,o=(e.val,e.key,t.$string),s=e.name,l=e.contactRule,u=e.tel,c=e.email,d=e.wechat,f=e.qq,p=e.defaultTemplate,h=e.defaultTemplateContent,g=e.captcha,v="";return v+='<div id="ticketV2" class="active"> ',n&&(v+=' <div class="step-title">',v+=a(n),v+="</div> "),v+=" ",i&&i.length>0&&(v+=' <div class="form-group"> <div class="group-title">分类<span>*</span></div> <div class="group-content"> ',r(i,function(e){v+=' <div class="choice-item"> <label> <input name="categories" type="radio" value="',v+=o(e.id),v+='" /> <span>',v+=o(e.name),v+="</span> </label> </div> "}),v+=" </div> </div> "),v+=" ","open"===s&&(v+=' <div class="form-group"> <div class="group-title"> 姓名 ',"multi"===l&&(v+=" <span>*</span> "),v+=' </div> <div class="group-content"> <input id="ticketName" type="text" placeholder=" 请输入"> </div> </div> '),v+=" ","open"===u&&(v+=' <div class="form-group"> <div class="group-title"> 手机 ',"multi"===l&&(v+=" <span>*</span> "),v+=' </div> <div class="group-content"> <input id="ticketTel" type="text" placeholder=" 请输入"> </div> </div> '),v+=" ","open"===c&&(v+=' <div class="form-group"> <div class="group-title"> 邮箱 ',"multi"===l&&(v+=" <span>*</span> "),v+=' </div> <div class="group-content"> <input id="ticketEmail" type="text" placeholder=" 请输入"> </div> </div> '),v+=" ","open"===d&&(v+=' <div class="form-group"> <div class="group-title"> ',"multi"===l&&(v+=" <span>*</span> "),v+=' 微信 </div> <div class="group-content"> <input id="ticketWechat" type="text" placeholder=" 请输入"> </div> </div> '),v+=" ","open"===f&&(v+=' <div class="form-group"> <div class="group-title"> QQ ',"multi"===l&&(v+=" <span>*</span> "),v+=' </div> <div class="group-content"> <input id="ticketQq" type="text" placeholder=" 请输入"> </div> </div> '),v+=' <div class="form-group"> <div class="group-title">留言内容<span>*</span></div> <div class="group-content"> ',"open"===p?(v+=' <textarea id="ticketContent" placeholder="请输入留言内容">',v+=a(h),v+="</textarea> "):v+=' <textarea id="ticketContent" placeholder="请输入留言内容"></textarea> ',v+=" </div> </div> ","open"===g&&(v+=' <div class="captcha-group"> <div class="group-title">验证码<span>*</span></div> <div class="group-content"> <div class="captcha-input"> <input id="ticketCaptcha" class="required" type="text" placeholder=" 请输入右侧验证码"/> </div> <div class="captcha-img"> <img id="ticketCaptchaImg" src="" /> </div> </div> </div> '),v+=' <div class="btn-group"> <a id="ticketSubmit">提交</a> </div> </div> ',new m(v)}),r("unable-service",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),a=e.src,i="";return i+='<img src="',i+=n(a),i+='"> <div>客服繁忙或已离线，给我们留言吧</div> <a class="btn-go-ticket">给我们留言</a>',new m(i)}),r("icon-css",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),a=e.cdn,i=e.tail,r="";return r+='.icon { background-image: url("',r+=n(a),r+="/images/icon-desktop.png?v=",r+=n(i),r+='"); background-size: 44px auto; background-repeat: no-repeat; } .emoji-control { background-image: url("',r+=n(a),r+="/images/emoji.png?v=",r+=n(i),r+='"); background-size: 25px auto; background-repeat: no-repeat; } @media only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2) { .icon { background-image: url("',r+=n(a),r+="/images/icon-desktop@2x.png?v=",r+=n(i),r+='"); } .emoji-control { background-image: url("',r+=n(a),r+="/images/emoji@2x.png?v=",r+=n(i),r+='"); } } ',new m(r)}),r("theme-css",function(e){"use strict";var t=this,n=(t.$helpers,t.$escape),a=e.bgColor,i=e.textColor,r=e.subTextColor,o=e.color2,s="";return s+="#pageChat .header, #pageTicket .header, #pageCall .header, #pageSurvey .header { background-color: ",s+=n(a),s+="; color: ",s+=n(i),s+="; } #pageChat #agentInputting { background-color: ",s+=n(a),s+="; } #pageChat .agent-signature { color: ",s+=n(r),s+=" } #pageChat .msg-client .bubble { background-color: ",s+=n(a),s+="; color: ",s+=n(i),s+="; } #pageChat .msg-client .bubble a { color: ",s+=n(i),s+="; } #pageChat .msg-client .arrow { border-left: 6px solid ",s+=n(a),s+="; } #pageChat .footer .feature-holder #btnSend.active { background-color: ",s+=n(a),s+="; color: ",s+=n(i),s+="; } #pageChat #unableService .btn-go-ticket { background-color: ",s+=n(a),s+="; color: ",s+=n(i),s+="; } #pageChat #evaluationSubmit { background-color: ",s+=n(a),s+="; color: ",s+=n(i),s+="; } #pageChat #queueingTips .queue-position-title { color: ",s+=n(a),s+="; } #pageChat #queueingTips #queueingPosition { color: ",s+=n(a),s+="; } #pageChat #queueingTips .btn-go-ticket { background-color: ",s+=n(a),s+="; color: ",s+=n(i),s+='; } #pageSurvey .body .menus-item > a, #pageChat .body-left .msg-bot .bubble .menu-item, #pageChat .body-left .msg-bot .rating a, #pageChat .body-left .msg-bot div.rich-text-bubble a, #pageChat .body-left .msg-agent div.rich-text-bubble a, #pageChat .body-left .msg-common-tips a, #autocomplete li em, #autocomplete li a[data-current="true"] { /*color: ',s+=n(a),s+=";*/ color: #6088e6; } #autocomplete li a:hover { background-color: ",s+=n(a),s+="; } ",s+="white"===o?" .icon-angel-down, .icon-ring-open, .icon-ring-close { opacity: .6; filter: alpha(opacity=60); } .icon-angel-down:hover, .icon-ring-open:hover, .icon-ring-close:hover { opacity: .8; filter: alpha(opacity=80); } .icon-angel-down { background-position: -22px -66px; } .icon-ring-open { background-position: -22px -89px; } .icon-ring-close { background-position: -22px -111px; } ":" .icon-angel-down, .icon-ring-open, .icon-ring-close { opacity: .3; filter: alpha(opacity=30); } .icon-angel-down:hover, .icon-ring-open:hover, .icon-ring-close:hover { opacity: .5; filter: alpha(opacity=50); } .icon-angel-down { background-position: 0 -66px; } .icon-ring-open { background-position: 0 -89px; } .icon-ring-close { background-position: 0 -111px; } ",s+=" #pageTicket #ticketSubmit { background-color: ",s+=n(a),s+="; color: ",s+=n(i),s+="; } #pageTicket #ticketDone { background-color: ",s+=n(a),s+="; color: ",s+=n(i),s+="; } #pageCall .input-active { border-color: ",s+=n(a),s+=" !important; } #pageCall .submit-active { background-color: ",s+=n(a),s+=" !important; } #pageCall .submit-intro { color: ",s+=n(a),s+="; } #pageCall .call-success-icon { background-color: ",s+=n(a),s+="; } #pageSurvey .menus-item >a { color: ",s+=n(a),s+="; } #pageSurvey #surveySubmit { background-color: ",s+=n(a),s+="; color: ",s+=n(i),s+="; } ",new m(s)})}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={agentToken:null,browserId:null,clientMsgNum:0,convId:null,convNewCreate:!1,device:null,emojiGroup:["smile","laughing","blush","heart_eyes","smirk","flushed","grin","kissing_smiling_eyes","wink","kissing_closed_eyes","stuck_out_tongue_winking_eye","sleeping","worried","sweat_smile","cold_sweat","joy","sob","angry","mask","scream","sunglasses","thumbsup","clap","ok_hand"],entId:null,fakeSentMsg:[],features:{emoji:!0,evaluation:!0,photo:!1,upload:!1},groupToken:null,historyArray:[],historyTimes:0,isBasie:null,isEnd:!1,inputting:!1,isReconnect:!1,lastMsgDate:null,limit:5,loserClub:[],messenger:null,msgId:[],msgLimit:10,page:0,ring:!1,ringing:!1,scheduler:!1,scheduling:!1,servability:!1,socket:!0,style:null,tpl:null,trackId:null,type:null,visitId:null,blacklist:!1,fallback:null,surveyRendered:!1,surveyDone:!1,initializeBodyHeight:1}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(6),s=a(o),l=n(4),u=a(l),c=function(e){s["default"](u["default"].tpl(e,{cdn:r["default"].cdn,tail:r["default"].tail}))},d=function(e){var t=u["default"].tpl("theme-css",{bgColor:"#"+e[0],color2:e[1],textColor:"white"===e[1]?"#fff":"#000",subTextColor:"white"===e[1]?"#fff":"#8a8b8c"});s["default"](t)};t["default"]={loadBtnBgi:c,setTheme:d}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var n=document.createElement("style");n.type="text/css",t&&(n.id=t);try{n.appendChild(document.createTextNode(e))}catch(a){n.styleSheet.cssText=e}var i=document.getElementsByTagName("head")[0];i.appendChild(n)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),r=a(i),o=n(9),s=a(o),l=n(10),u=a(l),c=n(12),d=a(c),f=n(13),p=a(f),h=n(14),m=a(h),g=n(4),v=a(g),y=n(5),b=a(y),_=n(15),w=a(_),k=n(27),x=a(k),E=n(28),T=a(E),I=n(29),C=a(I),j=n(62),S=a(j),M=n(65),O=a(M),B=n(66),A=a(B),L=n(67),N=a(L),P=n(54),q=a(P),H=n(68),D=a(H),$=n(71),R=a($);t["default"]=function(){v["default"].messenger=new r["default"]("iframe1","MEIQIA-ECOBOOST"),v["default"].messenger.addTarget(window.parent,"parent"),v["default"].messenger.listen(function(e){e=e.split("^@#");var t=e[0];switch(t){case"startUp":var n=JSON.parse(e[1]);v["default"].protocol=n.protocol,v["default"].entId=n.entId,v["default"].trackId=n.trackId,v["default"].history=n.history,v["default"].visitId=n.visitId,v["default"].browserId=n.browserId,v["default"].initData=n.initData,v["default"].url=n.url,v["default"].title=n.title,v["default"].fallback=n.fallback,v["default"].robot=n.initData.robot_settings||{},v["default"].sendFileStatus=n.initData.send_file_settings.widget_status,v["default"].disableBrandLink=n.disableBrandLink,v["default"].isBasic||(v["default"].ring=void 0===s["default"].get("MEIQIA_RING")?n.initData.widget_settings.ring:s["default"].get("MEIQIA_RING")),s["default"].set("MEIQIA_TRACK_ID",n.trackId,{expires:1/0}),m["default"]("set","MEIQIA_TRACK_ID",n.trackId),s["default"].set("MEIQIA_PANEL_VISIBILITY",n.panelVisibility,{expires:1/0});for(var a=v["default"].tpl("support",{entId:v["default"].entId,disableBrandLink:v["default"].disableBrandLink}),i=document.getElementsByName("supportHolder"),r=0;r<i.length;r++)i[r].innerHTML=a;b["default"].setTheme(n.initData.widget_settings.desktop.panel.theme),v["default"].isBasic?(w["default"]("ticket-basic",n.initData.ticket_config),N["default"]("evaluation-basic",{intro:n.initData.service_evaluation_config.prompt_text})):(w["default"]("ticket",n.initData.ticket_config),N["default"]("evaluation",{intro:n.initData.service_evaluation_config.prompt_text})),"open"===n.initData.widget_settings.removeBrand&&(p["default"].addClass(document.getElementById("pageChat"),"remove-brand"),p["default"].addClass(document.getElementById("pageTicket"),"remove-brand"),p["default"].addClass(document.getElementById("pageCall"),"remove-brand"),p["default"].addClass(document.getElementById("pageSurvey"),"remove-brand")),S["default"].init(),v["default"].isBasic||T["default"](v["default"].ring);var o=O["default"]("get");o&&(o=JSON.stringify(o)),
v["default"].messenger.targets.parent.send("unreadMsg^@#"+o);var l=A["default"]("get");l&&(document.getElementById("textarea").value=l),"close"===v["default"].sendFileStatus&&document.getElementById("uploadBtn")&&(document.getElementById("uploadBtn").style.display="none");break;case"rejectInvitation":x["default"]();break;case"callWidget":var c=!0;if("call"===e[1])R["default"]("pageCall");else if(v["default"].initData.servability){var f="";if(e[1]&&(f=JSON.parse(e[1])),"open"!==v["default"].initData.survey.status||v["default"].surveyDone||"queue"===f.type||"automatic"===f.type){var h={};if(f){var g=v["default"].assignedAgentToken=f.agentToken,y=v["default"].assignedGroupToken=f.groupToken;g?g!==v["default"].agentToken&&(h.agentToken=g):y&&y!==v["default"].groupToken&&(h.groupToken=y),"invisible"!==f.visibility||"automatic"!==f.type&&"queue"!==f.type||(c=!1)}d["default"](h)?v["default"].convId||v["default"].scheduler||C["default"]():C["default"](h),v["default"].isEnd||v["default"].isBasic||document.getElementById("textarea").focus(),R["default"]("pageChat")}else R["default"](v["default"].convId?"pageChat":"pageSurvey"),v["default"].surveyRendered||(v["default"].agentToken=v["default"].assignedAgentToken=f.agentToken,v["default"].groupToken=v["default"].assignedGroupToken=f.groupToken,D["default"]())}else R["default"]("pageTicket");c&&(v["default"].messenger.targets.parent.send("showPanel^@#"),s["default"].set("MEIQIA_PANEL_VISIBILITY","visible",{expires:1/0}),u["default"]("msgWrapper"));break;case"handleUnread":var _=JSON.parse(e[1]);O["default"](_.action,_.msg);break;case"ringing":v["default"].isBasic||q["default"](e[1]);break;case"panelVisibility":s["default"].set("MEIQIA_PANEL_VISIBILITY",e[1],{expires:1/0})}})}},function(e,t){"use strict";function n(e,t){var n="";if(arguments.length<2?n="target error - target and name are both required":"object"!=("undefined"==typeof e?"undefined":i(e))?n="target error - target itself must be window object":"string"!=typeof t&&(n="target error - target name must be string type"),n)throw new Error(n);this.target=e,this.name=t}function a(e,t){this.targets={},this.name=e,this.listenFunc=[],r=t||r,"string"!=typeof r&&(r=r.toString()),this.initListen()}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var r="[PROJECT_NAME]",o="postMessage"in window;n.prototype.send=o?function(e){this.target.postMessage(r+e,"*")}:function(e){var t=window.navigator[r+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(r+e,window)},a.prototype.addTarget=function(e,t){var a=new n(e,t);this.targets[t]=a},a.prototype.initListen=function(){var e=this,t=function(t){"object"==("undefined"==typeof t?"undefined":i(t))&&t.data&&(t=t.data);try{t=t.slice(r.length);for(var n=0;n<e.listenFunc.length;n++)e.listenFunc[n](t)}catch(a){return null}};o?"addEventListener"in document?window.addEventListener("message",t,!1):"attachEvent"in document&&window.attachEvent("onmessage",t):window.navigator[r+this.name]=t},a.prototype.listen=function(e){this.listenFunc.push(e)},a.prototype.clear=function(){this.listenFunc=[]},a.prototype.send=function(e){var t,n=this.targets;for(t in n)n[t].send(e)},t["default"]=a},function(e,t,n){var a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(r,o){"use strict";var s=function(e){if("object"!==i(e.document))throw new Error("Cookies.js requires a `window` with a `document` object");var t=function n(e,t,a){return 1===arguments.length?n.get(e):n.set(e,t,a)};return t._document=e.document,t._cacheKeyPrefix="cookey.",t._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),t.defaults={path:"/",secure:!1},t.get=function(e){t._cachedDocumentCookie!==t._document.cookie&&t._renewCache();var n=t._cache[t._cacheKeyPrefix+e];return n===o?o:decodeURIComponent(n)},t.set=function(e,n,a){return a=t._getExtendedOptions(a),a.expires=t._getExpiresDate(n===o?-1:a.expires),t._document.cookie=t._generateCookieString(e,n,a),t},t.expire=function(e,n){return t.set(e,o,n)},t._getExtendedOptions=function(e){return{path:e&&e.path||t.defaults.path,domain:e&&e.domain||t.defaults.domain,expires:e&&e.expires||t.defaults.expires,secure:e&&e.secure!==o?e.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,n){if(n=n||new Date,"number"==typeof e?e=e===1/0?t._maxExpireDate:new Date(n.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,n){e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent),e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{};var a=e+"="+t;return a+=n.path?";path="+n.path:"",a+=n.domain?";domain="+n.domain:"",a+=n.expires?";expires="+n.expires.toUTCString():"",a+=n.secure?";secure":""},t._getCacheFromString=function(e){for(var n={},a=e?e.split("; "):[],i=0;i<a.length;i++){var r=t._getKeyValuePairFromCookieString(a[i]);n[t._cacheKeyPrefix+r.key]===o&&(n[t._cacheKeyPrefix+r.key]=r.value)}return n},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=0>t?e.length:t;var n,a=e.substr(0,t);try{n=decodeURIComponent(a)}catch(i){console&&"function"==typeof console.warn&&console.warn('Could not decode cookie with key "'+a+'"',i)}return{key:n,value:e.substr(t+1)}},t._renewCache=function(){t._cache=t._getCacheFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){var e="cookies.js",n="1"===t.set(e,1).get(e);return t.expire(e),n},t.enabled=t._areEnabled(),t},l="object"===i(r.document)?s(r):s;a=function(){return l}.call(t,n,t,e),!(a!==o&&(e.exports=a))}("undefined"==typeof window?void 0:window)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){if(!(0>=n)){var a=t-e.scrollTop,r=a/n*10;setTimeout(function(){e.scrollTop=e.scrollTop+r,e.scrollTop!=t&&i(e,t,n-10)},10)}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=a(r);t["default"]=function(e){var t=document.getElementById(e);setTimeout(function(){o["default"].isThisDevice("android")?(t.style["overflow-y"]="hidden",t.scrollTop=t.scrollHeight,t.style["overflow-y"]="auto"):i(t,t.scrollHeight,120)},300)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={isMobile:function n(){var n=!1,e=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase();return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(n=!0),n},isThisDevice:function(e){var t=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase();return e=e.toLowerCase(),t.indexOf(e)>=0?!0:!1},isSafari:function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("safari")>-1&&e.indexOf("chrome")<1},isIE:function(e){var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("msie")&&parseInt(t.split("msie")[1])===e?!0:!1},iOSversion:function(){var e=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase();if(/ip(hone|od|ad)/.test(e)){var t=e.match(/os (\d+)_(\d+)_?(\d+)?/);return+[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)].join("")}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},a=function(e,t){n(e,t)||(e.className+=" "+t)},i=function(e,t){if(n(e,t)){var a=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(a,"")}};t["default"]={hasClass:n,addClass:a,removeClass:i}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,n){try{var a=window.localStorage;if("get"===e)return a.getItem(t);"set"===e?a.setItem(t,n):"remove"===e&&a.removeItem(t)}catch(i){return null}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(4),u=a(l),c=n(20),d=a(c),f=n(22),p=a(f);t["default"]=function(e,t){function n(){var n=u["default"].tpl(e,{name:t.name,qq:t.qq,tel:t.tel,email:t.email,wechat:t.wechat,intro:t.intro,categories:a,captcha:t.captcha,contactRule:t.contactRule,defaultTemplate:t.defaultTemplate,defaultTemplateContent:t.defaultTemplateContent});document.getElementById("ticketForm").innerHTML=n,"open"===t.captcha&&(d["default"]("ticketCaptchaImg","ticketCaptchaToken"),document.getElementById("ticketCaptchaImg").addEventListener("click",function(){d["default"]("ticketCaptchaImg","ticketCaptchaToken")})),document.getElementById("ticketSubmit").addEventListener("click",function(){p["default"](t)})}var a=[];"open"===t.category?s["default"].ajax({url:r["default"].chat+"/client/tickets_v2/categories",type:"get",data:{enterprise_id:u["default"].entId},success:function(e){t.categories=a=e.categories,n()},error:function(){n()}}):n()}},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),n(17);var i=function(e,t){var n=[],a=t&&t.timestamp||1*new Date;for(var i in e)e.hasOwnProperty(i)&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t&&t.sign&&n.push("sign="+t.sign),n.push("v="+a),n.join("&")},r=function(e){e=e||{},e.type=(e.type||"GET").toUpperCase(),e.dataType=e.dataType||"json",e.contentType=e.contentType||"application/x-www-form-urlencoded; charset=UTF-8";var t=i(e.data),n=null;if("undefined"!=typeof XMLHttpRequest)n=new XMLHttpRequest;else for(var r=["Microsoft.XmlHttp","MSXML2.XmlHttp","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.6.0"],o=0,s=r.length;s>o;o++)try{n=new ActiveXObject(r[o]);break}catch(l){}if(n.onreadystatechange=function(){if(4===n.readyState){var t=n.status;if(t>=200&&300>t){var a=n.responseText;"json"===e.dataType&&a&&(a=JSON.parse(n.responseText)),e.success&&e.success(a,n.responseXML)}else e.error&&e.error(n,t,n.responseText)}},"GET"===e.type)n.open("GET",e.url+"?"+t,!0),n.send(null);else if("POST"===e.type){n.open("POST",e.url,!0),n.setRequestHeader("Content-Type",e.contentType);var u=e.header;if(u)for(var c in u)n.setRequestHeader(c,u[c]);var d=e.data;"object"===("undefined"==typeof d?"undefined":a(d))&&(d=JSON.stringify(d)),n.send(d)}return e.beforeSend&&e.beforeSend(n),n},o=function(e){if(e=e||{},!e.url||!e.callback)return!1;e.beforeSend&&e.beforeSend();var t="jsonp"+1*new Date;e.data[e.callback]=t;var n=i(e.data,e.signature),a=document.createElement("script");a.type="text/javascript",a.charset="UTF-8",document.body.appendChild(a),window[t]=function(n){try{document.body.removeChild(a),clearTimeout(a.timer),window[t]=null,e.success&&e.success(n)}catch(i){return null}},a.src=e.url+"?"+n,e.time&&(a.timer=setTimeout(function(){try{window[t]=null,document.body.removeChild(a),e.error&&e.error({message:"超时"})}catch(n){return null}},e.time))},s=function(e){e=e||{};var t=e.data,n=new XMLHttpRequest;n.upload&&(n.upload.onprogress=function(t){e.progress&&e.progress(t)}),n.onload=function(){if(-1!==[200,204].indexOf(n.status)){var t=n.responseText;"json"===e.dataType&&(t=JSON.parse(n.responseText)),e.success&&e.success(t,n.responseXML)}else e.error&&e.error(n,status,n.responseText)};var a=new FormData;for(var i in t)t.hasOwnProperty(i)&&a.append(i,t[i]);n.open("POST",e.url),n.send(a),e.beforeSend&&e.beforeSend(n)};t["default"]={ajax:r,jsonp:o,upload:s}},function(e,t,n){var a;(function(e,i){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};(function(){function o(e,t){function n(e){if(n[e]!==v)return n[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=n("json-stringify")&&n("json-parse");else{var o,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l=t.stringify,c="function"==typeof l&&_;if(c){(o=function(){return 1}).toJSON=o;try{c="0"===l(0)&&"0"===l(new a)&&'""'==l(new i)&&l(b)===v&&l(v)===v&&l()===v&&"1"===l(o)&&"[1]"==l([o])&&"[null]"==l([v])&&"null"==l(null)&&"[null,null,null]"==l([v,b,null])&&l({a:[o,!0,!1,null,"\x00\b\n\f\r	"]})==s&&"1"===l(null,o)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new u(-1))}catch(d){c=!1}}r=c}if("json-parse"==e){var f=t.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){o=f(s);var p=5==o.a.length&&1===o.a[0];if(p){try{p=!f('"	"')}catch(d){}if(p)try{p=1!==f("01")}catch(d){}if(p)try{p=1!==f("1.")}catch(d){}}}}catch(d){p=!1}r=p}}return n[e]=!!r}e||(e=c.Object()),t||(t=c.Object());var a=e.Number||c.Number,i=e.String||c.String,s=e.Object||c.Object,u=e.Date||c.Date,d=e.SyntaxError||c.SyntaxError,f=e.TypeError||c.TypeError,p=e.Math||c.Math,h=e.JSON||c.JSON;"object"==("undefined"==typeof h?"undefined":r(h))&&h&&(t.stringify=h.stringify,t.parse=h.parse);var m,g,v,y=s.prototype,b=y.toString,_=new u(-0xc782b5b800cec);try{_=-109252==_.getUTCFullYear()&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(w){}if(!n("json")){var k="[object Function]",x="[object Date]",E="[object Number]",T="[object String]",I="[object Array]",C="[object Boolean]",j=n("bug-string-char-index");if(!_)var S=p.floor,M=[0,31,59,90,120,151,181,212,243,273,304,334],O=function(e,t){return M[t]+365*(e-1970)+S((e-1969+(t=+(t>1)))/4)-S((e-1901+t)/100)+S((e-1601+t)/400)};if((m=y.hasOwnProperty)||(m=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=b?m=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,m=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,m.call(this,e)}),g=function(e,t){var n,a,i,o=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,a=new n;for(i in a)m.call(a,i)&&o++;return n=a=null,o?g=2==o?function(e,t){var n,a={},i=b.call(e)==k;for(n in e)i&&"prototype"==n||m.call(a,n)||!(a[n]=1)||!m.call(e,n)||t(n)}:function(e,t){var n,a,i=b.call(e)==k;for(n in e)i&&"prototype"==n||!m.call(e,n)||(a="constructor"===n)||t(n);(a||m.call(e,n="constructor"))&&t(n)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var n,i,o=b.call(e)==k,s=!o&&"function"!=typeof e.constructor&&l[r(e.hasOwnProperty)]&&e.hasOwnProperty||m;for(n in e)o&&"prototype"==n||!s.call(e,n)||t(n);for(i=a.length;n=a[--i];s.call(e,n)&&t(n));}),g(e,t)},!n("json-stringify")){var B={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},A="000000",L=function(e,t){return(A+(t||0)).slice(-e)},N="\\u00",P=function(e){for(var t='"',n=0,a=e.length,i=!j||a>10,r=i&&(j?e.split(""):e);a>n;n++){var o=e.charCodeAt(n);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=B[o];break;default:if(32>o){t+=N+L(2,o.toString(16));break}t+=i?r[n]:e.charAt(n)}}return t+'"'},q=function G(e,t,n,a,i,o,s){var l,u,c,d,p,h,y,_,w,k,j,M,B,A,N,q;try{l=t[e]}catch(H){}if("object"==("undefined"==typeof l?"undefined":r(l))&&l)if(u=b.call(l),u!=x||m.call(l,"toJSON"))"function"==typeof l.toJSON&&(u!=E&&u!=T&&u!=I||m.call(l,"toJSON"))&&(l=l.toJSON(e));else if(l>-1/0&&1/0>l){if(O){for(p=S(l/864e5),c=S(p/365.2425)+1970-1;O(c+1,0)<=p;c++);for(d=S((p-O(c,0))/30.42);O(c,d+1)<=p;d++);p=1+p-O(c,d),h=(l%864e5+864e5)%864e5,y=S(h/36e5)%24,_=S(h/6e4)%60,w=S(h/1e3)%60,k=h%1e3}else c=l.getUTCFullYear(),d=l.getUTCMonth(),p=l.getUTCDate(),y=l.getUTCHours(),_=l.getUTCMinutes(),w=l.getUTCSeconds(),k=l.getUTCMilliseconds();l=(0>=c||c>=1e4?(0>c?"-":"+")+L(6,0>c?-c:c):L(4,c))+"-"+L(2,d+1)+"-"+L(2,p)+"T"+L(2,y)+":"+L(2,_)+":"+L(2,w)+"."+L(3,k)+"Z"}else l=null;if(n&&(l=n.call(t,e,l)),null===l)return"null";if(u=b.call(l),u==C)return""+l;if(u==E)return l>-1/0&&1/0>l?""+l:"null";if(u==T)return P(""+l);if("object"==("undefined"==typeof l?"undefined":r(l))){for(A=s.length;A--;)if(s[A]===l)throw f();if(s.push(l),j=[],N=o,o+=i,u==I){for(B=0,A=l.length;A>B;B++)M=G(B,l,n,a,i,o,s),j.push(M===v?"null":M);q=j.length?i?"[\n"+o+j.join(",\n"+o)+"\n"+N+"]":"["+j.join(",")+"]":"[]"}else g(a||l,function(e){var t=G(e,l,n,a,i,o,s);t!==v&&j.push(P(e)+":"+(i?" ":"")+t)}),q=j.length?i?"{\n"+o+j.join(",\n"+o)+"\n"+N+"}":"{"+j.join(",")+"}":"{}";return s.pop(),q}};t.stringify=function(e,t,n){var a,i,o,s;if(l["undefined"==typeof t?"undefined":r(t)]&&t)if((s=b.call(t))==k)i=t;else if(s==I){o={};for(var u,c=0,d=t.length;d>c;u=t[c++],s=b.call(u),(s==T||s==E)&&(o[u]=1));}if(n)if((s=b.call(n))==E){if((n-=n%1)>0)for(a="",n>10&&(n=10);a.length<n;a+=" ");}else s==T&&(a=n.length<=10?n:n.slice(0,10));return q("",(u={},u[""]=e,u),i,o,a,"",[])}}if(!n("json-parse")){var H,D,$=i.fromCharCode,R={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},U=function(){throw H=D=null,d()},z=function(){for(var e,t,n,a,i,r=D,o=r.length;o>H;)switch(i=r.charCodeAt(H)){case 9:case 10:case 13:case 32:H++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=j?r.charAt(H):r[H],H++,e;case 34:for(e="@",H++;o>H;)if(i=r.charCodeAt(H),32>i)U();else if(92==i)switch(i=r.charCodeAt(++H)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=R[i],H++;break;case 117:for(t=++H,n=H+4;n>H;H++)i=r.charCodeAt(H),i>=48&&57>=i||i>=97&&102>=i||i>=65&&70>=i||U();e+=$("0x"+r.slice(t,H));break;default:U()}else{if(34==i)break;for(i=r.charCodeAt(H),t=H;i>=32&&92!=i&&34!=i;)i=r.charCodeAt(++H);e+=r.slice(t,H)}if(34==r.charCodeAt(H))return H++,e;U();default:if(t=H,45==i&&(a=!0,i=r.charCodeAt(++H)),i>=48&&57>=i){for(48==i&&(i=r.charCodeAt(H+1),i>=48&&57>=i)&&U(),a=!1;o>H&&(i=r.charCodeAt(H),i>=48&&57>=i);H++);if(46==r.charCodeAt(H)){for(n=++H;o>n&&(i=r.charCodeAt(n),i>=48&&57>=i);n++);n==H&&U(),H=n}if(i=r.charCodeAt(H),101==i||69==i){for(i=r.charCodeAt(++H),(43==i||45==i)&&H++,n=H;o>n&&(i=r.charCodeAt(n),i>=48&&57>=i);n++);n==H&&U(),H=n}return+r.slice(t,H)}if(a&&U(),"true"==r.slice(H,H+4))return H+=4,!0;if("false"==r.slice(H,H+5))return H+=5,!1;if("null"==r.slice(H,H+4))return H+=4,null;U()}return"$"},F=function X(e){var t,n;if("$"==e&&U(),"string"==typeof e){if("@"==(j?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=z(),"]"!=e;n||(n=!0))n&&(","==e?(e=z(),"]"==e&&U()):U()),","==e&&U(),t.push(X(e));return t}if("{"==e){for(t={};e=z(),"}"!=e;n||(n=!0))n&&(","==e?(e=z(),"}"==e&&U()):U()),(","==e||"string"!=typeof e||"@"!=(j?e.charAt(0):e[0])||":"!=z())&&U(),t[e.slice(1)]=X(z());return t}U()}return e},J=function(e,t,n){var a=W(e,t,n);a===v?delete e[t]:e[t]=a},W=function(e,t,n){var a,i=e[t];if("object"==("undefined"==typeof i?"undefined":r(i))&&i)if(b.call(i)==I)for(a=i.length;a--;)J(i,a,n);else g(i,function(e){J(i,e,n)});return n.call(e,t,i)};t.parse=function(e,t){var n,a;return H=0,D=""+e,n=F(z()),"$"!=z()&&U(),H=D=null,t&&b.call(t)==k?W((a={},a[""]=n,a),"",t):n}}}return t.runInContext=o,t}var s=!0&&n(19),l={"function":!0,object:!0},u=l[r(t)]&&t&&!t.nodeType&&t,c=l["undefined"==typeof window?"undefined":r(window)]&&window||this,d=u&&l[r(e)]&&e&&!e.nodeType&&"object"==("undefined"==typeof i?"undefined":r(i))&&i;if(!d||d.global!==d&&d.window!==d&&d.self!==d||(c=d),u&&!s)o(c,u);else{var f=c.JSON,p=c.JSON3,h=!1,m=o(c,c.JSON3={noConflict:function(){return h||(h=!0,c.JSON=f,c.JSON3=p,f=p=null),m}});c.JSON={parse:m.parse,stringify:m.stringify}}s&&(a=function(){return m}.call(t,n,t,e),!(void 0!==a&&(e.exports=a)))}).call(void 0)}).call(t,n(18)(e),function(){return this}())},function(e,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(4),u=a(l),c=n(21),d=a(c);t["default"]=function(e,t){s["default"].ajax({url:r["default"].chat+"/captchas",type:"post",success:function(n){n.captcha_token?(document.getElementById(e).src=""+r["default"].chat+n.captcha_image_url,u["default"][t]=n.captcha_token):d["default"]("获取验证码失败",3e3)},error:function(){d["default"]("获取验证码失败",3e3)}})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var n=document.getElementById("alert"),a=document.getElementById("alertInside"),i=document.getElementById("alertHide");clearTimeout(window.alertCountdown);var r=e,o="";"hide"===e&&(r="",o="hide"),a.innerHTML=r,n.className=o;var s=function(){a.innerHTML="",n.className="hide"};t&&(window.alertCountdown=setTimeout(function(){s()},t)),i["class"]||i.addEventListener("click",function(){s(),i.title="close-alert"})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(13),u=a(l),c=n(23),d=a(c),f=n(24),p=a(f),h=n(25),m=a(h),g=n(12),v=a(g),y=n(4),b=a(y),_=n(21),w=a(_),k=n(26),x=a(k);t["default"]=function(e){function t(){s["default"].ajax({url:r["default"].chat+"/client/tickets_v2",type:"post",dataType:"json",header:S,contentType:"application/json",data:C,beforeSend:function(){u["default"].addClass(n,"disabled"),n.innerHTML="提交中"},success:function(){d["default"](document.getElementById("ticketForm"),"hide"),d["default"](document.getElementById("ticketSuccess"),"show"),u["default"].removeClass(n,"disabled"),n.innerHTML="提交"},error:function(e){var t={};try{t=JSON.parse(e.responseText)}catch(a){}w["default"](t.message||"留言失败，请稍候再试",3e3),u["default"].removeClass(n,"disabled"),n.innerHTML="提交"}})}var n=document.getElementById("ticketSubmit"),a=document.getElementById("ticketName"),i=document.getElementById("ticketTel"),o=document.getElementById("ticketEmail"),l=document.getElementById("ticketWechat"),c=document.getElementById("ticketQq"),f=document.getElementById("ticketContent"),h=e.contactRule,g="",y="",_="",k="",E="",T="",I={},C={enterprise_id:b["default"].entId,track_id:b["default"].trackId,visit_id:b["default"].visitId,channel:"widget"};if(e.categories&&e.categories.length>0){var j=x["default"]("categories");if(!j)return w["default"]("请选择分类",3e3),!1;C.category_id=parseInt(j[0])}if(a&&a.value){if(g=a.value,!(g.length<50))return w["default"]("请正确填写姓名",3e3),!1;I.name=g}if(i&&i.value){if(y=i.value,!p["default"].isTel(y))return w["default"]("请正确填写手机号",3e3),!1;I.tel=y}if(o&&o.value){if(_=o.value,!p["default"].isEmail(_))return w["default"]("请正确填写联系邮箱",3e3),!1;I.email=_}if(l&&l.value){if(k=l.value,!(k.length<50))return w["default"]("请正确填写微信",3e3),!1;I.weixin=k}if(c&&c.value){if(E=c.value,!p["default"].isNum(E))return w["default"]("请正确填写QQ",3e3),!1;I.qq=E}if("single"===h){if(!(I.name||I.tel||I.email||I.weixin||I.qq))return w["default"]("请至少填写一项联系方式",3e3),!1}else if("multi"===h){if(a&&!I.name)return w["default"]("请正确填写姓名",3e3),!1;if(i&&!I.tel)return w["default"]("请正确填写手机号",3e3),!1;if(o&&!I.email)return w["default"]("请正确填写联系邮箱",3e3),!1;if(l&&!I.weixin)return w["default"]("请正确填写微信",3e3),!1;if(c&&!I.qq)return w["default"]("请正确填写QQ",3e3),!1}if(v["default"](I)||s["default"].jsonp({url:r["default"].chat+"/client/attrs_jsonp",data:{ent_id:b["default"].entId,track_id:b["default"].trackId,browser_id:b["default"].browserId,attrs:JSON.stringify(I)},callback:"jsonp_cb",success:function(){}}),T=f.value.trim(),T.length<1||T.length>1024)return w["default"]("请保持留言内容在 1～1024 字符内",3e3),T.length>1024&&m["default"](f,1024,T.length),!1;C.content=T;var S={};if("open"===e.captcha){var M=document.getElementById("ticketCaptcha").value;if(!M)return w["default"]("请输入验证码",3e3),!1;S={"Captcha-Needed":"true","Captcha-Value":M,"Captcha-Token":b["default"].ticketCaptchaToken}}u["default"].hasClass(n,"disabled")||t()}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){if(!e)return!1;var n="";n=t?"show"===t?"block":"none":0===e.offsetHeight?"block":"none",e.style.display=n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},a=function(e){return isNaN(+e)||e.length<6?!1:!0},i=function(e){var t=/^\d+$/;return t.test(e)},r=function(e){var t=/^(0[1-9]\d[1-9]\d{7}|0[1-9]\d{2}[1-9]\d{6,7}|1\d{10})$/;return t.test(e)};t["default"]={isEmail:n,isTel:a,isNum:i,isPhoneNum:r}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,n){if(e.createTextRange){var a=e.createTextRange();a.collapse(),a.moveEnd("character",n),a.moveStart("character",t),a.select()}e.setSelectionRange&&(e.focus(),e.setSelectionRange(t,n))}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){for(var t=[],n=document.getElementsByName(e),a=0,i=n.length;i>a;a++)n[a].checked&&t.push(n[a].value);return 0===t.length&&(t=null),t}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(4),u=a(l);t["default"]=function(){s["default"].ajax({url:r["default"].chat+"/visit/"+u["default"].entId+"/"+u["default"].trackId+"/reject",type:"post",dataType:"json",contentType:"application/json",data:{browser_id:u["default"].browserId},success:function(){}})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),r=a(i);t["default"]=function(e){"open"===e?(r["default"].removeClass(document.getElementById("iconRing"),"icon-ring-close"),r["default"].addClass(document.getElementById("iconRing"),"icon-ring-open")):(r["default"].removeClass(document.getElementById("iconRing"),"icon-ring-open"),r["default"].addClass(document.getElementById("iconRing"),"icon-ring-close"))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){f["default"].scheduling||!function(){var n=null,a=null;e?(n=e.agentToken,a=e.groupToken):(n=f["default"].agentToken,a=f["default"].groupToken);var i={ent_id:f["default"].entId,track_id:f["default"].trackId,visit_id:f["default"].visitId,agent_token:n,group_token:n?null:a,url:f["default"].url,title:f["default"].title,queueing:!0};f["default"].fallback&&(i.fallback=f["default"].fallback),e&&e.exclude_agent_tokens&&(i.exclude_agent_tokens=e.exclude_agent_tokens),l["default"].ajax({url:f["default"].protocol+o["default"].chat+"/scheduler",type:"post",contentType:"application/json",data:i,beforeSend:function(){f["default"].scheduling=!0,f["default"].scheduler=!0,h["default"]("header-loading","headLeft",{}),f["default"].page=0,f["default"].historyArray=[],f["default"].historyTimes=0,c["default"](document.getElementById("evaluationHolder"),"hide"),t&&(document.getElementById("evaluationHolder").className="",document.getElementById("evaluationContent").value="",document.getElementById("msgHolder").innerHTML="")},success:function(e){if(e.success){if(E["default"](),f["default"].messenger.targets.parent.send("conversation^@#yes"),f["default"].convId=e.conv.id,f["default"].agentToken=e.agent.token,e&&e.agent&&(f["default"].agent=e.agent,f["default"].isBot="bot"===e.agent.privilege),f["default"].convNewCreate=e.conv_new_create,f["default"].groupToken=a,!f["default"].isBasic&&"desktop"===f["default"].device&&f["default"].convNewCreate&&k["default"]("newChat"),"mondeo"===f["default"].style||"fusion"===f["default"].style){var t="header-"+f["default"].style;h["default"](t,"headLeft",{name:e.agent.nickname,signature:e.agent.signature}),h["default"]("profile","profile",{avatar:e.agent.avatar,name:e.agent.nickname,tel:e.agent.telephone,cellphone:e.agent.public_cellphone,email:e.agent.public_email,qq:e.agent.qq,weixin:e.agent.weixin})}else if("customer"===f["default"].style){var n="standalone"===f["default"].type?f["default"].initData.standalone_window_config.desktop:f["default"].initData.widget_settings.desktop.panel;h["default"]("header-customer","headLeft",{photoType:n.customer_photo_type,avatar:e.agent.avatar,name:e.agent.nickname,signature:e.agent.signature}),h["default"]("profile-customer","profile",{name:e.agent.nickname,photoType:n.customer_photo_type,avatar:e.agent.avatar,content:n.customer_content,bgColor:n.theme[2]})}else h["default"]("header","headLeft",{avatar:e.agent.avatar,name:e.agent.nickname,signature:e.agent.signature});if("mobile"===f["default"].device){var i=e.agent.public_cellphone||e.agent.telephone;i&&(document.getElementById("btnTel").href="tel:"+i,c["default"](document.getElementById("btnTel"),"show"))}var r=e.messages;if(M["default"](e.agent&&"bot"===e.agent.privilege),r.length){for(var o=0;o<r.length;o++)f["default"].msgId.push(r[o].action+r[o].id);f["default"].lastMsgDate=r[r.length-1].created_on,g["default"](r,"scheduler",!0)}f["default"].history&&y["default"](!0),_["default"]("hide"),"bot"!==e.agent.privilege&&"desktop"===f["default"].device&&O.requestNotifyPermission()}else"queueing"===e.result?(I["default"]("show",{intro:f["default"].initData.queueing_settings.intro,position:e.position}),j["default"]()):(f["default"].convId=null,f["default"].agentToken=null,f["default"].groupToken=null,
_["default"]());f["default"].scheduling=!1},error:function(){document.getElementById("loading").innerHTML="网络错误，请稍后重试",f["default"].scheduling=!1}})}()}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var r=n(2),o=a(r),s=n(16),l=a(s),u=n(23),c=a(u),d=n(4),f=a(d),p=n(30),h=a(p),m=n(32),g=a(m),v=n(52),y=a(v),b=n(53),_=a(b),w=n(54),k=a(w),x=n(55),E=a(x),T=n(58),I=a(T),C=n(59),j=a(C),S=n(60),M=a(S),O=n(61)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=a(i),o=n(31),s=a(o);t["default"]=function(e,t,n){var a=r["default"].tpl(e,n);document.getElementById(t).innerHTML=a,s["default"]()}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if("standalone"!==s["default"].type||"mobile"!==s["default"].device)return!1;if(!document.querySelectorAll||history.length<2)return!1;for(var t=document.querySelectorAll(".header .pull-left"),n=0;n<t.length;++n){var a=t[n];if(a&&!a.querySelector(".back-button")){var i=r(),o=a.querySelector(".agent-info");o||(o=a.querySelector(".title")),o||(o=a.querySelector("#loading"),o&&(o.innerHTML.length&&!e.ignoreLoading?o=null:o.innerHTML.length||(i.className+=" has-words"))),o&&a.insertBefore&&a.insertBefore(i,o)}}}function r(){var e=document.createElement("a");return e.className="back-button",e.innerHTML="<span></span>",e.onclick=function(){return history.back(-1)},e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var o=n(4),s=a(o)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){return T.sequence(function(e){return h["default"](e,{whiteList:[]})},function(e){return _["default"](e,N["default"].protocol+f["default"].cdn+"/images/emoji")},function(e){return t?e:k["default"].convertAll(e)})(e)}function r(e){return T.map(e,function(e){return"text"===e.type?e.text=e.rich_text?u(e.text):i(e.text):"menu"===e.type&&(e.items=T.map(e.items,function(e){return e.text=i(e.text,!0),e})),e})}function o(e){var t=(new Date).getTime(),n="";return e.uploading?void 0:(n=new Date(e.extra.expire_at).getTime(),n=(n-t)/1e3,n>=3600?n=parseInt(Math.round(n/3600))+"小时":n>=60?n=parseInt(n/60)+"分钟":n+="秒",n)}function s(e,t){return T.map(e,function(e){var n=e.content,a=e.content_robot,s=e.content_type,l=e.from_type;return/^(text|welcome|bot)$/.test(s)&&(C["default"].string(n)&&(e.content=i(n)),C["default"].array(a)&&"bot"===l&&(e.content_robot=r(a))),t&&"photo"===s&&(e.content=N["default"].protocol+f["default"].picture+"/"+e.content),"file"===s&&(e.extra.convert_size=E["default"](e.extra.size,0),e.extra.has_expired=o(e)),"rich_text"===s&&(e.extra.content=u(e.extra.content)),e})}function l(e){return T.map(e,function(e){return"evaluate"===e.sub_type&&(e.sub_type="message"),e})}function u(e){return h["default"](e,{onIgnoreTagAttr:function(e,t,n,a){return"style"===t?t+'="'+h["default"].escapeAttrValue(n)+'"':void 0}})}function c(e,t){var n=S["default"].isThisDevice("micromessenger");return"normal"!==t&&(e=l(e)),e.forEach(function(e){return e.displayDate=O["default"](e.created_on),e}),"history"===t?N["default"].tpl("msg",{list:e.reverse(),historyTimes:N["default"].historyTimes,weixin:n}):N["default"].tpl("msg",{list:e,weixin:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.transformText=i,t.transformBotText=r,t.normalizeDate=o,t.convert=s,t.compile=c;var d=n(2),f=a(d),p=n(33),h=a(p),m=n(43),g=a(m),v=n(10),y=a(v),b=n(44),_=a(b),w=n(45),k=a(w),x=n(46),E=a(x),T=n(47),I=n(48),C=a(I),j=n(11),S=a(j),M=n(49),O=a(M),B=n(50),A=a(B),L=n(4),N=a(L);t["default"]=function(e,t,n){var a=document.getElementById("msgHolder"),i=document.createElement("div");i.className="msg-box",i.innerHTML=c(s(e,n),t),"scheduler"===t?(a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i),y["default"]("msgWrapper")):"history"===t?(document.getElementById("moreHistoryBtn")?g["default"](i,document.getElementById("moreHistoryBtn")):a.insertBefore(i,a.firstChild),1===N["default"].historyTimes&&y["default"]("msgWrapper")):(a.appendChild(i),y["default"]("msgWrapper"));var r=S["default"].isMobile();r&&A["default"](a.getElementsByTagName("img"))}},function(e,t,n){function a(e,t){var n=new s(t);return n.process(e)}var i,r=n(34),o=n(41),s=n(42);t=e.exports=a,t.FilterXSS=s;for(var l in r)t[l]=r[l];for(var l in o)t[l]=o[l];i=function(){return e.exports}.call(t,n,t,e),!(void 0!==i&&(e.exports=i)),"undefined"!=typeof window&&(window.filterXSS=e.exports)},function(e,t,n){"use strict";function a(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","colspan","align","valign"],tfoot:["align","valign"],th:["width","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}function i(e,t,n){}function r(e,t,n){}function o(e,t,n){}function s(e,t,n){}function l(e){return e.replace(E,"&lt;").replace(T,"&gt;")}function u(e,t,n,a){if(a=a||x,n=m(n),"href"===t||"src"===t){if(n=k.trim(n),"#"===n)return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(O.lastIndex=0,O.test(n))return""}else if("style"===t){if(B.lastIndex=0,B.test(n))return"";if(A.lastIndex=0,A.test(n)&&(O.lastIndex=0,O.test(n)))return"";n=a.process(n)}return n=g(n)}function c(e){return e.replace(I,"&quot;")}function d(e){return e.replace(C,'"')}function f(e){return e.replace(j,function(e,t){return String.fromCharCode("x"===t[0]||"X"===t[0]?parseInt(t.substr(1),16):parseInt(t,10))})}function p(e){return e.replace(S,":").replace(M," ")}function h(e){for(var t="",n=0,a=e.length;a>n;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return k.trim(t)}function m(e){return e=d(e),e=f(e),e=p(e),e=h(e)}function g(e){return e=c(e),e=l(e)}function v(){return""}function y(e,t){function n(t){return a?!0:-1!==k.indexOf(e,t)}"function"!=typeof t&&(t=function(){});var a=!Array.isArray(e),i=[],r=!1;return{onIgnoreTag:function(e,a,o){if(n(e)){if(o.isClosing){var s="[/removed]",l=o.position+s.length;return i.push([r!==!1?r:o.position,l]),r=!1,s}return r||(r=o.position),"[removed]"}return t(e,a,o)},remove:function(e){var t="",n=0;return k.forEach(i,function(a){t+=e.slice(n,a[0]),n=a[1]}),t+=e.slice(n)}}}function b(e){return e.replace(L,"")}function _(e){var t=e.split("");return t=t.filter(function(e){var t=e.charCodeAt(0);return 127===t?!1:31>=t?10===t||13===t?!0:!1:!0}),t.join("")}var w=n(35).FilterCSS,k=n(40),x=new w,E=/</g,T=/>/g,I=/"/g,C=/&quot;/g,j=/&#([a-zA-Z0-9]*);?/gim,S=/&colon;?/gim,M=/&newline;?/gim,O=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,B=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,A=/u\s*r\s*l\s*\(.*/gi,L=/<!--[\s\S]*?-->/g;t.whiteList=a(),t.getDefaultWhiteList=a,t.onTag=i,t.onIgnoreTag=r,t.onTagAttr=o,t.onIgnoreTagAttr=s,t.safeAttrValue=u,t.escapeHtml=l,t.escapeQuote=c,t.unescapeQuote=d,t.escapeHtmlEntities=f,t.escapeDangerHtml5Entities=p,t.clearNonPrintableCharacter=h,t.friendlyAttrValue=m,t.escapeAttrValue=g,t.onIgnoreTagStripAll=v,t.StripTagBody=y,t.stripCommentTag=b,t.stripBlankChar=_,t.cssFilter=x},function(e,t,n){function a(e,t){var n=new o(t);return n.process(e)}var i,r=n(36),o=n(37);t=e.exports=a,t.FilterCSS=o;for(var s in r)t[s]=r[s];i=function(){return e.exports}.call(t,n,t,e),!(void 0!==i&&(e.exports=i)),"undefined"!=typeof window&&(window.filterCSS=e.exports)},function(e,t){"use strict";function n(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e["float"]=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function a(e,t,n){}function i(e,t,n){}t.whiteList=n(),t.getDefaultWhiteList=n,t.onAttr=a,t.onIgnoreAttr=i},function(e,t,n){"use strict";function a(e){return void 0===e||null===e}function i(e){e=e||{},e.whiteList=e.whiteList||r.whiteList,e.onAttr=e.onAttr||r.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||r.onIgnoreAttr,this.options=e}{var r=n(36),o=n(38);n(39)}i.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,i=n.whiteList,r=n.onAttr,s=n.onIgnoreAttr,l=o(e,function(e,t,n,o,l){var u=i[n],c=!1;u===!0?c=u:"function"==typeof u?c=u(o):u instanceof RegExp&&(c=u.test(o)),c!==!0&&(c=!1);var d={position:t,sourcePosition:e,source:l,isWhite:c};if(c){var f=r(n,o,d);return a(f)?n+":"+o:f}var f=s(n,o,d);return a(f)?void 0:f});return l},e.exports=i},function(e,t,n){"use strict";function a(e,t){function n(){if(!r){var n=i.trim(e.slice(o,s)),a=n.indexOf(":");if(-1!==a){var u=i.trim(n.slice(0,a)),c=i.trim(n.slice(a+1));if(u){var d=t(o,l.length,u,c,n);d&&(l+=d+"; ")}}}o=s+1}e=i.trimRight(e),";"!==e[e.length-1]&&(e+=";");for(var a=e.length,r=!1,o=0,s=0,l="";a>s;s++){var u=e[s];if("/"===u&&"*"===e[s+1]){var c=e.indexOf("*/",s+2);if(-1===c)break;s=c+1,o=s+1,r=!1}else"("===u?r=!0:")"===u?r=!1:";"===u?r||n():"\n"===u&&n()}return i.trim(l)}var i=n(39);e.exports=a},function(e,t){"use strict";e.exports={indexOf:function(e,t){var n,a;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,a=e.length;a>n;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var a,i;if(Array.prototype.forEach)return e.forEach(t,n);for(a=0,i=e.length;i>a;a++)t.call(n,e[a],a,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},function(e,t){"use strict";e.exports={indexOf:function(e,t){var n,a;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,a=e.length;a>n;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var a,i;if(Array.prototype.forEach)return e.forEach(t,n);for(a=0,i=e.length;i>a;a++)t.call(n,e[a],a,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")}}},function(e,t,n){"use strict";function a(e){var t=e.indexOf(" ");if(-1===t)var n=e.slice(1,-1);else var n=e.slice(1,t+1);return n=d.trim(n).toLowerCase(),"/"===n.slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function i(e){return"</"===e.slice(0,2)}function r(e,t,n){"user strict";var r="",o=0,s=!1,l=!1,u=0,c=e.length,d="",f="";for(u=0;c>u;u++){var p=e.charAt(u);if(s===!1){if("<"===p){s=u;continue}}else if(l===!1){if("<"===p){r+=n(e.slice(o,u)),s=u,o=u;continue}if(">"===p){r+=n(e.slice(o,s)),d=e.slice(s,u+1),f=a(d),r+=t(s,r.length,f,d,i(d)),o=u+1,s=!1;continue}if(('"'===p||"'"===p)&&"="===e.charAt(u-1)){l=p;continue}}else if(p===l){l=!1;continue}}return o<e.length&&(r+=n(e.substr(o))),r}function o(e,t){"user strict";function n(e,n){if(e=d.trim(e),e=e.replace(f,"").toLowerCase(),!(e.length<1)){var a=t(e,n||"");a&&i.push(a)}}for(var a=0,i=[],r=!1,o=e.length,u=0;o>u;u++){var p,h,m=e.charAt(u);if(r!==!1||"="!==m)if(r===!1||u!==a||'"'!==m&&"'"!==m||"="!==e.charAt(u-1))if(" "!==m);else{if(r===!1){if(h=s(e,u),-1===h){p=d.trim(e.slice(a,u)),n(p),r=!1,a=u+1;continue}u=h-1;continue}if(h=l(e,u-1),-1===h){p=d.trim(e.slice(a,u)),p=c(p),n(r,p),r=!1,a=u+1;continue}}else{if(h=e.indexOf(m,u+1),-1===h)break;p=d.trim(e.slice(a+1,h)),n(r,p),r=!1,u=h,a=u+1}else r=e.slice(a,u),a=u+1}return a<e.length&&(r===!1?n(e.slice(a)):n(r,c(d.trim(e.slice(a))))),d.trim(i.join(" "))}function s(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function l(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function u(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]?!0:!1}function c(e){return u(e)?e.substr(1,e.length-2):e}var d=n(40),f=/[^a-zA-Z0-9_:\.\-]/gim;t.parseTag=r,t.parseAttr=o},function(e,t,n){"use strict";function a(e){return void 0===e||null===e}function i(e){var t=e.indexOf(" ");if(-1===t)return{html:"",closing:"/"===e[e.length-2]};e=d.trim(e.slice(t+1,-1));var n="/"===e[e.length-1];return n&&(e=d.trim(e.slice(0,-1))),{html:e,closing:n}}function r(e){e=e||{},e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=s.onIgnoreTagStripAll),e.whiteList=e.whiteList||s.whiteList,e.onTag=e.onTag||s.onTag,e.onTagAttr=e.onTagAttr||s.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||s.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||s.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||s.safeAttrValue,e.escapeHtml=e.escapeHtml||s.escapeHtml,e.css=e.css||{},this.options=e,this.cssFilter=new o(e.css)}var o=n(35).FilterCSS,s=n(34),l=n(41),u=l.parseTag,c=l.parseAttr,d=n(40);r.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,o=n.onTag,l=n.onIgnoreTag,f=n.onTagAttr,p=n.onIgnoreTagAttr,h=n.safeAttrValue,m=n.escapeHtml,g=t.cssFilter;n.stripBlankChar&&(e=s.stripBlankChar(e)),n.allowCommentTag||(e=s.stripCommentTag(e));var v=!1;if(n.stripIgnoreTagBody){var v=s.StripTagBody(n.stripIgnoreTagBody,l);l=v.onIgnoreTag}var y=u(e,function(e,t,n,s,u){var v={sourcePosition:e,position:t,isClosing:u,isWhite:n in r},y=o(n,s,v);if(!a(y))return y;if(v.isWhite){if(v.isClosing)return"</"+n+">";var b=i(s),_=r[n],w=c(b.html,function(e,t){var i=-1!==d.indexOf(_,e),r=f(n,e,t,i);if(!a(r))return r;if(i)return t=h(n,e,t,g),t?e+'="'+t+'"':e;var r=p(n,e,t,i);return a(r)?void 0:r}),s="<"+n;return w&&(s+=" "+w),b.closing&&(s+=" /"),s+=">"}var y=l(n,s,v);return a(y)?m(s):y},m);return v&&(y=v.remove(y)),y},e.exports=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={title:function(e,t,n){return null!=n?""+n+" ("+t+")":t},alt:function(e){return e}},a="emoji",i=function(e,t,n,a){var i=void 0,r=void 0,o=void 0,s=void 0;r="<img class='"+n+"' src='"+t+"/"+encodeURIComponent(e[1])+".png' ",s=a.attributes;for(i in s)o=s[i],r+=""+i+"='"+o.apply(a,e)+"' ";return r+"/>"},r=/\:([a-z0-9_+-]+)(?:\[((?:[^\]]|\][^:])*\]?)\])?\:/g,o=function(){return["+1","-1","100","1234","8ball","a","ab","abc","abcd","accept","aerial_tramway","airplane","alarm_clock","alien","ambulance","anchor","angel","anger","angry","anguished","ant","apple","aquarius","aries","arrow_backward","arrow_double_down","arrow_double_up","arrow_down","arrow_down_small","arrow_forward","arrow_heading_down","arrow_heading_up","arrow_left","arrow_lower_left","arrow_lower_right","arrow_right","arrow_right_hook","arrow_up","arrow_up_down","arrow_up_small","arrow_upper_left","arrow_upper_right","arrows_clockwise","arrows_counterclockwise","art","articulated_lorry","astonished","atm","b","baby","baby_bottle","baby_chick","baby_symbol","baggage_claim","balloon","ballot_box_with_check","bamboo","banana","bangbang","bank","bar_chart","barber","baseball","basketball","bath","bathtub","battery","bear","bee","beer","beers","beetle","beginner","bell","bento","bicyclist","bike","bikini","bird","birthday","black_circle","black_joker","black_nib","black_square","black_square_button","blossom","blowfish","blue_book","blue_car","blue_heart","blush","boar","boat","bomb","book","bookmark","bookmark_tabs","books","boom","boot","bouquet","bow","bowling","bowtie","boy","bread","bride_with_veil","bridge_at_night","briefcase","broken_heart","bug","bulb","bullettrain_front","bullettrain_side","bus","busstop","bust_in_silhouette","busts_in_silhouette","cactus","cake","calendar","calling","camel","camera","cancer","candy","capital_abcd","capricorn","car","card_index","carousel_horse","cat","cat2","cd","chart","chart_with_downwards_trend","chart_with_upwards_trend","checkered_flag","cherries","cherry_blossom","chestnut","chicken","children_crossing","chocolate_bar","christmas_tree","church","cinema","circus_tent","city_sunrise","city_sunset","cl","clap","clapper","clipboard","clock1","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","closed_book","closed_lock_with_key","closed_umbrella","cloud","clubs","cn","cocktail","coffee","cold_sweat","collision","computer","confetti_ball","confounded","confused","congratulations","construction","construction_worker","convenience_store","cookie","cool","cop","copyright","corn","couple","couple_with_heart","couplekiss","cow","cow2","credit_card","crocodile","crossed_flags","crown","cry","crying_cat_face","crystal_ball","cupid","curly_loop","currency_exchange","curry","custard","customs","cyclone","dancer","dancers","dango","dart","dash","date","de","deciduous_tree","department_store","diamond_shape_with_a_dot_inside","diamonds","disappointed","disappointed_relieved","dizzy","dizzy_face","do_not_litter","dog","dog2","dollar","dolls","dolphin","donut","door","doughnut","dragon","dragon_face","dress","dromedary_camel","droplet","dvd","e-mail","ear","ear_of_rice","earth_africa","earth_americas","earth_asia","egg","eggplant","eight","eight_pointed_black_star","eight_spoked_asterisk","electric_plug","elephant","email","end","envelope","es","euro","european_castle","european_post_office","evergreen_tree","exclamation","expressionless","eyeglasses","eyes","facepunch","factory","fallen_leaf","family","fast_forward","fax","fearful","feelsgood","feet","ferris_wheel","file_folder","finnadie","fire","fire_engine","fireworks","first_quarter_moon","first_quarter_moon_with_face","fish","fish_cake","fishing_pole_and_fish","fist","five","flags","flashlight","floppy_disk","flower_playing_cards","flushed","foggy","football","fork_and_knife","fountain","four","four_leaf_clover","fr","free","fried_shrimp","fries","frog","frowning","fu","fuelpump","full_moon","full_moon_with_face","game_die","gb","gem","gemini","ghost","gift","gift_heart","girl","globe_with_meridians","goat","goberserk","godmode","golf","grapes","green_apple","green_book","green_heart","grey_exclamation","grey_question","grimacing","grin","grinning","guardsman","guitar","gun","haircut","hamburger","hammer","hamster","hand","handbag","hankey","hash","hatched_chick","hatching_chick","headphones","hear_no_evil","heart","heart_decoration","heart_eyes","heart_eyes_cat","heartbeat","heartpulse","hearts","heavy_check_mark","heavy_division_sign","heavy_dollar_sign","heavy_exclamation_mark","heavy_minus_sign","heavy_multiplication_x","heavy_plus_sign","helicopter","herb","hibiscus","high_brightness","high_heel","hocho","honey_pot","honeybee","horse","horse_racing","hospital","hotel","hotsprings","hourglass","hourglass_flowing_sand","house","house_with_garden","hurtrealbad","hushed","ice_cream","icecream","id","ideograph_advantage","imp","inbox_tray","incoming_envelope","information_desk_person","information_source","innocent","interrobang","iphone","it","izakaya_lantern","jack_o_lantern","japan","japanese_castle","japanese_goblin","japanese_ogre","jeans","joy","joy_cat","jp","key","keycap_ten","kimono","kiss","kissing","kissing_cat","kissing_closed_eyes","kissing_face","kissing_heart","kissing_smiling_eyes","koala","koko","kr","large_blue_circle","large_blue_diamond","large_orange_diamond","last_quarter_moon","last_quarter_moon_with_face","laughing","leaves","ledger","left_luggage","left_right_arrow","leftwards_arrow_with_hook","lemon","leo","leopard","libra","light_rail","link","lips","lipstick","lock","lock_with_ink_pen","lollipop","loop","loudspeaker","love_hotel","love_letter","low_brightness","m","mag","mag_right","mahjong","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","man","man_with_gua_pi_mao","man_with_turban","mans_shoe","maple_leaf","mask","massage","meat_on_bone","mega","melon","memo","mens","metal","metro","microphone","microscope","milky_way","minibus","minidisc","mobile_phone_off","money_with_wings","moneybag","monkey","monkey_face","monorail","moon","mortar_board","mount_fuji","mountain_bicyclist","mountain_cableway","mountain_railway","mouse","mouse2","movie_camera","moyai","muscle","mushroom","musical_keyboard","musical_note","musical_score","mute","nail_care","name_badge","neckbeard","necktie","negative_squared_cross_mark","neutral_face","new","new_moon","new_moon_with_face","newspaper","ng","nine","no_bell","no_bicycles","no_entry","no_entry_sign","no_good","no_mobile_phones","no_mouth","no_pedestrians","no_smoking","non-potable_water","nose","notebook","notebook_with_decorative_cover","notes","nut_and_bolt","o","o2","ocean","octocat","octopus","oden","office","ok","ok_hand","ok_woman","older_man","older_woman","on","oncoming_automobile","oncoming_bus","oncoming_police_car","oncoming_taxi","one","open_file_folder","open_hands","open_mouth","ophiuchus","orange_book","outbox_tray","ox","page_facing_up","page_with_curl","pager","palm_tree","panda_face","paperclip","parking","part_alternation_mark","partly_sunny","passport_control","paw_prints","peach","pear","pencil","pencil2","penguin","pensive","performing_arts","persevere","person_frowning","person_with_blond_hair","person_with_pouting_face","phone","pig","pig2","pig_nose","pill","pineapple","pisces","pizza","plus1","point_down","point_left","point_right","point_up","point_up_2","police_car","poodle","poop","post_office","postal_horn","postbox","potable_water","pouch","poultry_leg","pound","pouting_cat","pray","princess","punch","purple_heart","purse","pushpin","put_litter_in_its_place","question","rabbit","rabbit2","racehorse","radio","radio_button","rage","rage1","rage2","rage3","rage4","railway_car","rainbow","raised_hand","raised_hands","raising_hand","ram","ramen","rat","recycle","red_car","red_circle","registered","relaxed","relieved","repeat","repeat_one","restroom","revolving_hearts","rewind","ribbon","rice","rice_ball","rice_cracker","rice_scene","ring","rocket","roller_coaster","rooster","rose","rotating_light","round_pushpin","rowboat","ru","rugby_football","runner","running","running_shirt_with_sash","sa","sagittarius","sailboat","sake","sandal","santa","satellite","satisfied","saxophone","school","school_satchel","scissors","scorpius","scream","scream_cat","scroll","seat","secret","see_no_evil","seedling","seven","shaved_ice","sheep","shell","ship","shipit","shirt","shit","shoe","shower","signal_strength","six","six_pointed_star","ski","skull","sleeping","sleepy","slot_machine","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","smile","smile_cat","smiley","smiley_cat","smiling_imp","smirk","smirk_cat","smoking","snail","snake","snowboarder","snowflake","snowman","sob","soccer","soon","sos","sound","space_invader","spades","spaghetti","sparkler","sparkles","sparkling_heart","speak_no_evil","speaker","speech_balloon","speedboat","squirrel","star","star2","stars","station","statue_of_liberty","steam_locomotive","stew","straight_ruler","strawberry","stuck_out_tongue","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","sun_with_face","sunflower","sunglasses","sunny","sunrise","sunrise_over_mountains","surfer","sushi","suspect","suspension_railway","sweat","sweat_drops","sweat_smile","sweet_potato","swimmer","symbols","syringe","tada","tanabata_tree","tangerine","taurus","taxi","tea","telephone","telephone_receiver","telescope","tennis","tent","thought_balloon","three","thumbsdown","thumbsup","ticket","tiger","tiger2","tired_face","tm","toilet","tokyo_tower","tomato","tongue","top","tophat","tractor","traffic_light","train","train2","tram","triangular_flag_on_post","triangular_ruler","trident","triumph","trolleybus","trollface","trophy","tropical_drink","tropical_fish","truck","trumpet","tshirt","tulip","turtle","tv","twisted_rightwards_arrows","two","two_hearts","two_men_holding_hands","two_women_holding_hands","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7981","u7a7a","uk","umbrella","unamused","underage","unlock","up","us","v","vertical_traffic_light","vhs","vibration_mode","video_camera","video_game","violin","virgo","volcano","vs","walking","waning_crescent_moon","waning_gibbous_moon","warning","watch","water_buffalo","watermelon","wave","wavy_dash","waxing_crescent_moon","waxing_gibbous_moon","wc","weary","wedding","whale","whale2","wheelchair","white_check_mark","white_circle","white_flower","white_large_square","white_square_button","wind_chime","wine_glass","wink","wolf","woman","womans_clothes","womans_hat","womens","worried","wrench","x","yellow_heart","yen","yum","zap","zero","zzz"];

},s=function(){var e=function(e,t,s){var l=void 0,u=void 0;return null==s&&(s={}),u=o(),"function"==typeof s?s={parser:s}:(null==s.attributes&&(s.attributes=n),null==s.parser&&(s.parser=i)),l=null!=s.classes?s.classes:a,e.replace(r,function(e,n,a){return-1===u.indexOf(n)?e:s.parser([e,n,a],t,l,s)})};return e};t["default"]=s()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return[[RegExp("^"+e+"$","gm"),'<a target="_blank" href="tel:$1">$1</a>'],[RegExp("^"+e+"(\\D)","gm"),'<a target="_blank" href="tel:$1">$1</a>$2'],[RegExp("(\\D)"+e+"$","gm"),'$1<a target="_blank" href="tel:$2">$2</a>'],[RegExp("(\\D)"+e+"(\\D)","gm"),'$1<a target="_blank" href="tel:$2">$2</a>$3']]},a=[[/((http:\/\/|https:\/\/)[\.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi))[\/?#]([^u4e00-u9fa5]|[A-Za-z0-9])+\/$)/gim,'<a target="_blank" href="$1">$1</a>'],[/([\.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi))[\/?#]([^u4e00-u9fa5]|[A-Za-z0-9])+\/$)/gim,'<a target="_blank" href="http://$1">$1</a>'],[/((ftp:\/\/)[^\u4E00-\u9FA5 ]+)/gi,'<a target="_blank" href="$1">$1</a>'],[/((http:\/\/|https:\/\/)[^\u4E00-\u9FA5 ]+)/gi,'<a target="_blank" href="$1">$1</a>'],[/((www\.)[^\u4E00-\u9FA5 ]+)/gi,'<a target="_blank" href="http://$1">$1</a>'],[/([\.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi))[\/?#][^\u4E00-\u9FA5，]+)/gim,'<a target="_blank" href="http://$1">$1</a>'],[/([\.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi))[\/?#])/gim,'<a target="_blank" href="http://$1">$1</a>'],[/([\.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi)))([0-9\s\u4E00-\u9FA5，]+)/gim,'<a target="_blank" href="http://$1">$1</a>$18'],[/([\.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi)))$/gim,'<a target="_blank" href="http://$1">$1</a>']],i=[[/([A-Z0-9\._%+-]+@[A-Z0-9\.-]+\.[A-Z]{2,15})/gim,'<a href="mailto:$1">$1</a>']],r=[];r=r.concat(n("([1]\\d{10})")),r=r.concat(n("([48]00\\d?-?\\d{3,4}-?\\d{3,4})")),r=r.concat(n("(0\\d{2,3}-?\\d{7,8})")),r=r.concat(n("(\\d{8})"));var o=function(e,t){var n=document.createElement("div");n.innerHTML=e;for(var a in n.childNodes){var i=n.childNodes[a];if(3===i.nodeType){var r=document.createElement("em");r.appendChild(i.cloneNode(!0));var o=r.innerHTML;r.innerHTML=r.innerHTML.replace(t[0],t[1]),r.innerHTML!==o&&n.replaceChild(r,i)}}return n.innerHTML.replace(/\<em\>/g,"").replace(/\<\/em\>/g,"")},s=function(e){for(var t in r)e=o(e,r[t]);return e},l=function(e){for(var t in a)e=o(e,a[t]);return e},u=function(e){for(var t in i)e=o(e,i[t]);return e},c=function(e){return e.replace(/\n/g,"<br/>")},d=function(e){return e=c(e),e=u(e),e=l(e),e=s(e)};t["default"]={convertTel:s,convertUrl:l,convertEmail:u,convertBr:c,convertAll:d}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){if(!e)return"0 B";var n=1e3;t=t+1||2;var a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(t))+" "+a[i]}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=u["default"].func(t)?t:c;if(u["default"].array(e))for(var a=0;a<e.length;++a)n(e[a],a)}function r(e,t){var n=[];return i(e,function(e,a){return n.push(t(e,a))}),n}function o(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return i(t,function(t){return e=t(e)}),e}}function s(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return i(t.reverse(),function(t){return e=t(e)}),e}}Object.defineProperty(t,"__esModule",{value:!0}),t.each=i,t.map=r,t.sequence=o,t.compose=s;var l=n(48),u=a(l),c=function(){}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={},a=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"};n.array=function(e){return a("Array",e)},n.string=function(e){return a("String",e)},n.object=function(e){return a("Object",e)},n.regexp=function(e){return a("RegExp",e)},n.number=function(e){return a("Number",e)},n.func=function(e){return a("Function",e)},n.nil=function(e){return a("Null",e)},n.undef=function(e){return a("Undefined",e)},n.emptyObject=function(e){if(!n.object(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t["default"]=n},function(e,t){"use strict";function n(e){var t=a(e),n=0==t.getHours()?"12":t.getHours()>12?t.getHours()-12:t.getHours();n=10>n?"0"+n:n;var i=(t.getMinutes()<10?"0":"")+t.getMinutes(),r=t.getHours()<12?"AM":"PM",o=n+":"+i+r;return o}function a(e){if(e&&e.indexOf("T")>0){var t=e.split("T")[0].split("-"),n=e.split("T")[1].split(":"),a=new Date(t[0],t[1],t[2],n[0],n[1],n[2]);return a.setMinutes(a.getMinutes()-a.getTimezoneOffset()),a}return new Date}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,t.toLocalTime=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=document.getElementById("light-box-mask");t||(t=l(s),h.appendChild(t)),d(e,function(e){e.removeEventListener("click",r),e.addEventListener("click",r)})}function r(e){e.preventDefault();var t=(document.getElementById("light-box-mask"),e.srcElement),n=t.cloneNode();n.setAttribute("id","light-box-content");var a=c(t),i=c(h),r=a.height/a.width*i.width,l=(i.height-r)/2;if(u(n,{position:"relative",zIndex:6,top:l+"px",height:"auto"}),m)u(n,{width:"100%"});else{var d=300;u(n,{width:a.width+"px",transition:"width "+d+"ms",WebkitTransition:"width "+d+"ms",MozTransition:"width "+d+"ms"})}o(n),m||window.setTimeout(function(){return u(n,{width:"100%"})},100),n.addEventListener("click",function(e){s(n),e.stopPropagation()})}function o(e){var t=document.getElementById("light-box-mask");u(t,{display:""}),t.appendChild(e)}function s(){var e=document.getElementById("light-box-mask");e.innerHTML="",u(e,{display:"none"})}function l(e){var t=document.createElement("div");return t.setAttribute("id","light-box-mask"),u(t,{position:"absolute",textAlign:"center",top:0,right:0,left:0,bottom:0,zIndex:5,width:"100%",height:"auto",backgroundColor:"rgba(0, 0, 0, 1)",display:"none"}),t.addEventListener("click",e),t}function u(e,t){if(e)for(var n in t)e.style[n]=t[n]}function c(e){var t=e.currentStyle?e.currentStyle:window.getComputedStyle(e,null);return{width:parseInt(t.width)||0,height:parseInt(t.height)||0}}function d(e,t){for(var n=0;n<e.length;n++)t(e[n],n,e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var f=n(51),p=a(f),h=document.body,m=p["default"]()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return/micromessenger/.test(window.navigator.userAgent.toLowerCase())}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(13),u=a(l),c=n(4),d=a(c),f=n(32),p=a(f),h=function(){document.getElementById("moreHistoryBtn")&&document.getElementById("moreHistoryBtn").parentNode.removeChild(document.getElementById("moreHistoryBtn"));var e=document.getElementById("msgHolder"),t=document.createElement("a");t.id="moreHistoryBtn",t.innerHTML="加载历史消息",e.insertBefore(t,e.firstChild),t.addEventListener("click",function(e){u["default"].hasClass(e.target,"disabled")||m()})},m=function(e,t){function n(t){if(d["default"].historyArray.length)if(e)h();else{var n=d["default"].historyArray.splice(0,d["default"].msgLimit);p["default"](n,"history",!0)}e||!function(){var e=document.getElementById("moreHistoryBtn");if(d["default"].historyArray.length||!t){var n=document.getElementById("moreHistoryBtn");n.innerHTML="加载更多历史消息",u["default"].removeClass(n,"disabled")}else e.innerHTML="没有更多了",u["default"].addClass(e,"disabled"),setTimeout(function(){e.style.display="none"},1500)}()}function a(){s["default"].ajax({url:d["default"].protocol+r["default"].chat+"/client/history_conversation",type:"get",data:{ent_id:d["default"].entId,track_id:d["default"].trackId,page:d["default"].page,limit:d["default"].limit},beforeSend:function(){if(d["default"].page>0&&!e){var t=document.getElementById("moreHistoryBtn");t.innerHTML="加载中...",u["default"].addClass(t,"disabled")}},success:function(e){var a=e.conversations;if(a.length){for(var i=a.length-1;i>=0;i--)for(var r=0;r<a[i].messages.length;r++)d["default"].historyArray.unshift(a[i].messages[r]);d["default"].page+=1,a.length<d["default"].limit?n(!0):n()}else n(!0);t&&t()},error:function(){n(!0)}})}d["default"].historyTimes+=1,d["default"].historyArray.length<d["default"].msgLimit?a():n()};t["default"]=m},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(13),s=a(o),l=n(23),u=a(l),c=n(31),d=a(c),f=n(4),p=a(f);t["default"]=function(e){if("hide"===e)s["default"].addClass(document.getElementById("unableService"),"hide");else{var t=p["default"].tpl("unable-service",{src:r["default"].cdn+"/images/icon-unable-service.png"});document.getElementById("unableService").innerHTML=t,s["default"].removeClass(document.getElementById("unableService"),"hide"),"mobile"===p["default"].device&&u["default"](document.getElementById("btnTel"),"hide"),u["default"](document.getElementById("btnCallAgent"),"hide"),document.getElementById("loading")&&(document.getElementById("loading").innerHTML="",d["default"]())}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=a(i);t["default"]=function(e){"open"!==r["default"].ring||r["default"].ringing||(r["default"].ringing=!0,document.getElementById(e).play(),setTimeout(function(){r["default"].ringing=!1},1e3))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(){if(o["default"].fakeSentMsg.length){for(var e=0;e<o["default"].fakeSentMsg.length;e++)c["default"]([{id:o["default"].fakeSentMsg[e].id,from_type:"client",content_type:"text",status:"sending",content:o["default"].fakeSentMsg[e].content,type:"text"}]),l["default"](o["default"].fakeSentMsg[e]);o["default"].fakeSentMsg=[]}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var r=n(4),o=a(r),s=n(56),l=a(s),u=n(32),c=a(u)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(13),u=a(l),c=n(4),d=a(c),f=n(54),p=a(f),h=n(57),m=a(h),g=n(49),v=a(g);t["default"]=function(e){var t=e.content;"photo"===e.content_type&&(t=t.split("/"),t=t[t.length-1]);var n={ent_id:d["default"].entId,track_id:d["default"].trackId,type:e.content_type,content:t,browser_id:d["default"].browserId};"file"===e.content_type&&(n.extra=e.extra);var a=function(t,n){var a=e.content_type;if("text"===a){var i=document.getElementById("status"+e.id);"beforeSend"===t?u["default"].removeClass(i,"status-fail"):"error"===t&&(u["default"].addClass(i,"status-fail"),d["default"].loserClub[i.id]=e)}if("photo"===a){var o=document.getElementById("photo"+e.id);"beforeSend"===t?(u["default"].removeClass(o,"photo-send-fail"),o.src=r["default"].cdn+"/images/photo-sending.png",o.parentElement.removeAttribute("href")):"success"===t?(o.src=e.content,o.parentElement.href=e.content):(u["default"].addClass(o,"photo-send-fail"),o.src=r["default"].cdn+"/images/photo-fail.png",d["default"].loserClub[o.id]=e)}else if("file"===a){var s=document.getElementById("fileState"+e.id),l=document.getElementById("cancelUpload"+e.id),c=document.getElementById("progress"+e.id);"success"===t?s.innerHTML="上传成功":"error"===t&&(s.innerHTML="上传失败"),l.style.display="none",c.style.display="none"}"success"===t&&n&&(document.getElementById("date"+e.id).innerHTML=n)};s["default"].ajax({url:r["default"].chat+"/client/send_msg",type:"post",dataType:"json",contentType:"application/json",data:n,beforeSend:function(){a("beforeSend")},success:function(e){e.success?(d["default"].isBasic||"desktop"!==d["default"].device||p["default"]("sentMessage"),d["default"].msgId.push("message"+e.msg.id),a("success",v["default"](e.msg.created_on))):("conversation not found"===e.msg&&m["default"](),a("error"))},error:function(){a("error")}})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),r=a(i),o=n(4),s=a(o);t["default"]=function(){var e=s["default"].tpl("chat-has-end",{});document.getElementById("chatHasEnd").innerHTML=e,r["default"].removeClass(document.getElementById("chatHasEnd"),"hide")}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),r=a(i),o=n(23),s=a(o),l=n(31),u=a(l),c=n(4),d=a(c);t["default"]=function(e,t){if("hide"===e)r["default"].addClass(document.getElementById("queueingTips"),"hide");else{var n=d["default"].tpl("queueing",{intro:t.intro,position:t.position});document.getElementById("queueingTips").innerHTML=n,r["default"].removeClass(document.getElementById("queueingTips"),"hide"),"mobile"===d["default"].device&&s["default"](document.getElementById("btnTel"),"hide"),document.getElementById("loading").innerHTML="排队等待中...",u["default"]({ignoreLoading:!0})}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(4),u=a(l),c=function d(){clearTimeout(window._QUEUE_POSITION_TIMEOUT),s["default"].ajax({url:r["default"].chat+"/client/queue/position",type:"get",data:{ent_id:u["default"].entId,track_id:u["default"].trackId},success:function(e){u["default"].convId?clearTimeout(window._QUEUE_POSITION_TIMEOUT):e.in_queue===!1?document.getElementById("queueingTips").innerHTML="排队失败，请刷新重试":(e.position&&document.getElementById("queueingPosition")&&(document.getElementById("queueingPosition").innerHTML=e.position),window._QUEUE_POSITION_TIMEOUT=setTimeout(function(){d()},15e3))}})};t["default"]=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t="show",n="hide";e&&(t="hide",o["default"].robot.show_switch&&(n="show")),l["default"](document.getElementById("evaluationBtn"),t),l["default"](document.getElementById("btnCallAgent"),n)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var r=n(4),o=a(r),s=n(23),l=a(s)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(!h||!e)return e;var t=h.documentElement;t.innerHTML=(e||"").trim();var n=t.innerText||t.textContent||"";return n}function r(e){return"string"!=typeof e?"":i(e.replace(/<img\sclass="emoji".+?alt="\:(\w+)\:">/g,function(e,t){return":"+t+":"}).replace(/<br\/?>/g," ")).replace(/^\s+|\s+$/g,"")}function o(){var e=document.getElementById("textarea");e&&e.focus&&setTimeout(function(){e.focus(),e.blur(),e.focus()},400)}function s(e){return f&&p&&document.hidden?void("granted"===Notification.permission?m.show(e):"denied"!==Notification.permission&&Notification.requestPermission(function(t){"granted"===t&&m.show(e)})):!1}function l(){p&&Notification.requestPermission()}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){if(e[0]&&"agent"===e[0].from_type){var t=c["default"].agent.nickname||c["default"].agent.realname||"管理员";if("[推广消息]"===e[0].content)return!1;"file"===e[0].content_type&&(e[0].content="「发来了一个文件」"),"photo"===e[0].content_type&&(e[0].content="「发来了一张图片」");var n=r(e[0].content);if(!n.length)return!1;s({title:"新消息",icon:c["default"].agent.avatar,body:t+": "+n,tag:t})}},t.requestNotifyPermission=l;var u=n(4),c=a(u),d=8e3,f="hidden"in document,p="Notification"in window,h=null;document.implementation&&document.implementation.createHTMLDocument&&(h=document.implementation.createHTMLDocument("sinker"));var m={__instance:null,__timer:null,close:function(e){var t=this;this.__timer&&clearTimeout(this.__timer),this.__timer=setTimeout(function(){t.__instance&&t.__instance.close&&t.__instance.close(),t.__instance=null},e||0)},show:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.__instance=new Notification(t.title||"美洽客服消息",{body:t.body||"",icon:t.icon||"",tag:t.tag||""}),this.__instance.onclick=function(){window.parent.focus(),e.close(),o()},this.close(d)}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(63),s=a(o),l=n(16),u=a(l),c=n(4),d=a(c),f=n(21),p=a(f),h=n(64),m=a(h),g=["xhr-streaming","xdr-streaming","xhr-polling","xdr-polling","iframe-xhr-polling","jsonp-polling"];void 0!==window.WebSocket&&(g=["websocket"]);var v=function(e){return new Date(e).getTime()},y=function(){u["default"].ajax({url:d["default"].protocol+r["default"].chat+"/client/timeline",type:"get",data:{ent_id:d["default"].entId,track_id:d["default"].trackId,filter_type:"after",dt:d["default"].lastMsgDate},success:function(e){var t=e.events,n=e.messages,a=t.concat(n);if(a.length){a.sort(function(e,t){return v(e.created_on)>v(t.created_on)?1:v(e.created_on)<v(t.created_on)?-1:0});for(var i=0;i<a.length;i++)m["default"](a[i].action+a[i].id)||(d["default"].lastMsgDate=a[i].created_on,d["default"].handleSocketMsg(a[i]))}}})};s["default"].prototype._setHeartbeatTimeout=function(){var e=this;clearTimeout(e.heartbeatTimeoutTimer),e.heartbeatTimeoutTimer=setTimeout(function(){e._close(1007,"Heartbeat timed out.")},27e3)};var b=function _(){var e=r["default"].socket+"?browser_id="+d["default"].browserId+"&ent_id="+d["default"].entId+"&track_id="+d["default"].trackId+"&visit_id="+d["default"].visitId,t=null,n=new s["default"](e,t,{transports:g});n.onheartbeat=function(){n.send("h"),n._setHeartbeatTimeout()},n.onopen=function(){if(d["default"].isReconnect&&d["default"].scheduler&&!d["default"].isEnd){clearTimeout(window._TIMELINE_TIMEOUT);var e=1e3*Math.floor(4*Math.random()+2);window._TIMELINE_TIMEOUT=setTimeout(function(){y()},e)}d["default"].socket=!0,p["default"]("hide"),n._setHeartbeatTimeout()},n.onmessage=function(e){var t=JSON.parse(e.data);n.send(t.id),m["default"](t.action+t.id)||d["default"].handleSocketMsg(t)},n.onclose=function(e){var t="正在获取消息...";1006===e.code&&(t="连接断开，请刷新页面"),d["default"].socket=!1,d["default"].isReconnect=!0,setTimeout(function(){_()},2e3),setTimeout(function(){d["default"].socket||p["default"](t)},8e3)}};t["default"]={init:b}},function(e,t,n){var a,i,r,o,o;(function(n){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(n){if("object"==s(t)&&"undefined"!=typeof e)e.exports=n();else{i=[],a=n,r="function"==typeof a?a.apply(t,i):a,!(void 0!==r&&(e.exports=r))}}(function(){var e;return function t(e,n,a){function i(s,l){if(!n[s]){if(!e[s]){var u="function"==typeof o&&o;if(!l&&u)return o(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return i(n?n:t)},d,d.exports,t,e,n,a)}return n[s].exports}for(var r="function"==typeof o&&o,s=0;s<a.length;s++)i(a[s]);return i}({1:[function(e,t,a){(function(n){var a=e("./transport-list");t.exports=e("./main")(a),"_sockjs_onload"in n&&setTimeout(n._sockjs_onload,1)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":14,"./transport-list":16}],2:[function(e,t,n){function a(){r.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}var i=e("inherits"),r=e("./event");i(a,r),t.exports=a},{"./event":4,inherits:57}],3:[function(e,t,n){function a(){r.call(this)}var i=e("inherits"),r=e("./eventtarget");i(a,r),a.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},a.prototype.once=function(e,t){function n(){a.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}var a=this,i=!1;this.on(e,n)},a.prototype.emit=function(e){var t=this._listeners[e];if(t)for(var n=Array.prototype.slice.call(arguments,1),a=0;a<t.length;a++)t[a].apply(this,n)},a.prototype.on=a.prototype.addListener=r.prototype.addEventListener,a.prototype.removeListener=r.prototype.removeEventListener,t.exports.EventEmitter=a},{"./eventtarget":5,inherits:57}],4:[function(e,t,n){function a(e){this.type=e}a.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},a.prototype.stopPropagation=function(){},a.prototype.preventDefault=function(){},a.CAPTURING_PHASE=1,a.AT_TARGET=2,a.BUBBLING_PHASE=3,t.exports=a},{}],5:[function(e,t,n){function a(){this._listeners={}}a.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},a.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var a=n.indexOf(t);return-1!==a?void(n.length>1?this._listeners[e]=n.slice(0,a).concat(n.slice(a+1)):delete this._listeners[e]):void 0}},a.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var a=this._listeners[t],i=0;i<a.length;i++)a[i].apply(this,n)},t.exports=a},{}],6:[function(e,t,n){function a(e){r.call(this),this.initEvent("message",!1,!1),this.data=e}var i=e("inherits"),r=e("./event");i(a,r),t.exports=a},{"./event":4,inherits:57}],7:[function(e,t,n){function a(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}var i=e("json3"),r=e("./utils/iframe");a.prototype._transportClose=function(e,t){r.postMessage("c",i.stringify([e,t]))},a.prototype._transportMessage=function(e){r.postMessage("t",e)},a.prototype._send=function(e){this._transport.send(e)},a.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},t.exports=a},{"./utils/iframe":47,json3:58}],8:[function(e,t,n){(function(n){var a=e("./utils/url"),i=e("./utils/event"),r=e("json3"),o=e("./facade"),s=e("./info-iframe-receiver"),l=e("./utils/iframe"),u=e("./location"),c=function(){};c=e("debug")("sockjs-client:iframe-bootstrap"),t.exports=function(e,t){var n={};t.forEach(function(e){e.facadeTransport&&(n[e.facadeTransport.transportName]=e.facadeTransport)}),n[s.transportName]=s;var d;e.bootstrap_iframe=function(){var t;l.currentWindowId=u.hash.slice(1);var s=function(i){if(i.source===parent&&("undefined"==typeof d&&(d=i.origin),i.origin===d)){var s;try{s=r.parse(i.data)}catch(f){return void c("bad json",i.data)}if(s.windowId===l.currentWindowId)switch(s.type){case"s":var p;try{p=r.parse(s.data)}catch(f){c("bad json",s.data);break}var h=p[0],m=p[1],g=p[2],v=p[3];if(c(h,m,g,v),h!==e.version)throw new Error('Incompatibile SockJS! Main site uses: "'+h+'", the iframe: "'+e.version+'".');if(!a.isOriginEqual(g,u.href)||!a.isOriginEqual(v,u.href))throw new Error("Can't connect to different domain from within an iframe. ("+u.href+", "+g+", "+v+")");t=new o(new n[m](g,v));break;case"m":t._send(s.data);break;case"c":t&&t._close(),t=null}}};i.attachEvent("message",s),l.postMessage("s")}}}).call(this,{env:{}})},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:54,json3:58}],9:[function(e,t,n){(function(n){function a(e,t){i.call(this);var n=this,a=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(e,t){var i,r;if(200===e){if(r=+new Date-a,t)try{i=o.parse(t)}catch(u){l("bad json",t)}s.isObject(i)||(i={})}n.emit("finish",i,r),n.removeAllListeners()})}var i=e("events").EventEmitter,r=e("inherits"),o=e("json3"),s=e("./utils/object"),l=function(){};l=e("debug")("sockjs-client:info-ajax"),r(a,i),a.prototype.close=function(){this.removeAllListeners(),this.xo.close()},t.exports=a}).call(this,{env:{}})},{"./utils/object":49,debug:54,events:3,inherits:57,json3:58}],10:[function(e,t,n){function a(e){var t=this;r.call(this),this.ir=new l(e,s),this.ir.once("finish",function(e,n){t.ir=null,t.emit("message",o.stringify([e,n]))})}var i=e("inherits"),r=e("events").EventEmitter,o=e("json3"),s=e("./transport/sender/xhr-local"),l=e("./info-ajax");i(a,r),a.transportName="iframe-info-receiver",a.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},t.exports=a},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:57,json3:58}],11:[function(e,t,a){(function(n,a){function i(e,t){var n=this;r.call(this);var i=function(){var a=n.ifr=new u(c.transportName,t,e);a.once("message",function(e){if(e){var t;try{t=s.parse(e)}catch(a){return d("bad json",e),n.emit("finish"),void n.close()}var i=t[0],r=t[1];n.emit("finish",i,r)}n.close()}),a.once("close",function(){n.emit("finish"),n.close()})};a.document.body?i():l.attachEvent("load",i)}var r=e("events").EventEmitter,o=e("inherits"),s=e("json3"),l=e("./utils/event"),u=e("./transport/iframe"),c=e("./info-iframe-receiver"),d=function(){};d=e("debug")("sockjs-client:info-iframe"),o(i,r),i.enabled=function(){return u.enabled()},i.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},t.exports=i}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:54,events:3,inherits:57,json3:58}],12:[function(e,t,n){(function(n){function a(e,t){p(e);var n=this;i.call(this),setTimeout(function(){n.doXhr(e,t)},0)}var i=e("events").EventEmitter,r=e("inherits"),o=e("./utils/url"),s=e("./transport/sender/xdr"),l=e("./transport/sender/xhr-cors"),u=e("./transport/sender/xhr-local"),c=e("./transport/sender/xhr-fake"),d=e("./info-iframe"),f=e("./info-ajax"),p=function(){};p=e("debug")("sockjs-client:info-receiver"),r(a,i),a._getReceiver=function(e,t,n){return n.sameOrigin?new f(t,u):l.enabled?new f(t,l):s.enabled&&n.sameScheme?new f(t,s):d.enabled()?new d(e,t):new f(t,c)},a.prototype.doXhr=function(e,t){var n=this,i=o.addPath(e,"/info");p("doXhr",i),this.xo=a._getReceiver(e,i,t),this.timeoutRef=setTimeout(function(){p("timeout"),n._cleanup(!1),n.emit("finish")},a.timeout),this.xo.once("finish",function(e,t){p("finish",e,t),n._cleanup(!0),n.emit("finish",e,t)})},a.prototype._cleanup=function(e){p("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},a.prototype.close=function(){p("close"),this.removeAllListeners(),this._cleanup(!1)},a.timeout=8e3,t.exports=a}).call(this,{env:{}})},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:54,events:3,inherits:57}],13:[function(e,t,a){(function(e){t.exports=e.location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,a){(function(n,a){function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");y.call(this),this.readyState=i.CONNECTING,this.extensions="",this.protocol="",n=n||{},n.protocols_whitelist&&g.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports;var a=n.sessionId||8;if("function"==typeof a)this._generateSessionId=a;else{if("number"!=typeof a)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return u.string(a)}}this._server=n.server||u.numberString(1e3);var r=new o(e);if(!r.host||!r.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(r.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==r.protocol&&"https:"!==r.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+r.protocol+"' is not allowed.");var s="https:"===r.protocol;if("https"===b.protocol&&!s)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var l=t.sort();l.forEach(function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<l.length-1&&e===l[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")});var c=d.getOrigin(b.href);this._origin=c?c.toLowerCase():null,r.set("pathname",r.pathname.replace(/\/+$/,"")),this.url=r.href,x("using url",this.url),this._urlInfo={nullOrigin:!m.hasDomain(),sameOrigin:d.isOriginEqual(this.url,b.href),sameScheme:d.isSchemeEqual(this.url,b.href)},this._ir=new k(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function r(e){return 1e3===e||e>=3e3&&4999>=e}e("./shims");var o=e("url-parse"),s=e("inherits"),l=e("json3"),u=e("./utils/random"),c=e("./utils/escape"),d=e("./utils/url"),f=e("./utils/event"),p=e("./utils/transport"),h=e("./utils/object"),m=e("./utils/browser"),g=e("./utils/log"),v=e("./event/event"),y=e("./event/eventtarget"),b=e("./location"),_=e("./event/close"),w=e("./event/trans-message"),k=e("./info-receiver"),x=function(){};x=e("debug")("sockjs-client:main");var E;s(i,y),i.prototype.close=function(e,t){if(e&&!r(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==i.CLOSING&&this.readyState!==i.CLOSED){var n=!0;this._close(e||1e3,t||"Normal closure",n)}},i.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===i.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===i.OPEN&&this._transport.send(c.quote(e))},i.version=e("./version"),i.CONNECTING=0,i.OPEN=1,i.CLOSING=2,i.CLOSED=3,i.prototype._receiveInfo=function(e,t){if(x("_receiveInfo",t),this._ir=null,!e)return void this._close(1002,"Cannot connect to server");this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=h.extend(e,this._urlInfo),x("info",e);var n=E.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,x(this._transports.length+" enabled transports"),this._connect()},i.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(x("attempt",e.transportName),e.needBody&&(!a.document.body||"undefined"!=typeof a.document.readyState&&"complete"!==a.document.readyState&&"interactive"!==a.document.readyState))return x("waiting for body"),this._transports.unshift(e),void f.attachEvent("load",this._connect.bind(this));var t=this._rto*e.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t),x("using timeout",t);var n=d.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId());x("transport url",n);var i=new e(n,this._transUrl);return i.on("message",this._transportMessage.bind(this)),i.once("close",this._transportClose.bind(this)),i.transportName=e.transportName,void(this._transport=i)}this._close(2e3,"All transports failed",!1)},i.prototype._transportTimeout=function(){x("_transportTimeout"),this.readyState===i.CONNECTING&&this._transportClose(2007,"Transport timed out")},i.prototype._transportMessage=function(e){x("_transportMessage",e);var t,n=this,a=e.slice(0,1),i=e.slice(1);switch(a){case"o":return void this._open();case"h":return this.dispatchEvent(new v("heartbeat")),void x("heartbeat",this.transport);

}if(i)try{t=l.parse(i)}catch(r){x("bad json",i)}if("undefined"==typeof t)return void x("empty payload",i);switch(a){case"a":Array.isArray(t)&&t.forEach(function(e){x("message",n.transport,e),n.dispatchEvent(new w(e))});break;case"m":x("message",this.transport,t),this.dispatchEvent(new w(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},i.prototype._transportClose=function(e,t){return x("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),r(e)||2e3===e||this.readyState!==i.CONNECTING?void this._close(e,t):void this._connect()},i.prototype._open=function(){x("_open",this._transport.transportName,this.readyState),this.readyState===i.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=i.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new v("open")),x("connected",this.transport)):this._close(1006,"Server lost session")},i.prototype._close=function(e,t,n){x("_close",this.transport,e,t,n,this.readyState);var a=!1;this._ir&&(a=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===i.CLOSED,this.readyState=i.CLOSING,setTimeout(function(){this.readyState=i.CLOSED,a&&this.dispatchEvent(new v("error"));var r=new _("close");r.wasClean=n||!1,r.code=e||1e3,r.reason=t,this.dispatchEvent(r),this.onmessage=this.onclose=this.onerror=null,x("disconnected")}.bind(this),0)},i.prototype.countRTO=function(e){return e>100?4*e:300+e},t.exports=function(t){return E=p(t),e("./iframe-bootstrap")(i,t),i}}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:54,inherits:57,json3:58,"url-parse":59}],15:[function(e,t,n){function a(e){var t=+e;return t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function i(e){return e>>>0}function r(){}var o,l=Array.prototype,u=Object.prototype,c=Function.prototype,d=String.prototype,f=l.slice,p=u.toString,h=function(e){return"[object Function]"===u.toString.call(e)},m=function(e){return"[object Array]"===p.call(e)},g=function(e){return"[object String]"===p.call(e)},v=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();o=v?function(e,t,n,a){!a&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,a){!a&&t in e||(e[t]=n)};var y=function(e,t,n){for(var a in t)u.hasOwnProperty.call(t,a)&&o(e,a,t[a],n)},b=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};y(c,{bind:function(e){var t=this;if(!h(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=f.call(arguments,1),a=function(){if(this instanceof l){var a=t.apply(this,n.concat(f.call(arguments)));return Object(a)===a?a:this}return t.apply(e,n.concat(f.call(arguments)))},i=Math.max(0,t.length-n.length),o=[],s=0;i>s;s++)o.push("$"+s);var l=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this, arguments); }")(a);return t.prototype&&(r.prototype=t.prototype,l.prototype=new r,r.prototype=null),l}}),y(Array,{isArray:m});var _=Object("a"),w="a"!==_[0]||!(0 in _),k=function(e){var t=!0,n=!0;return e&&(e.call("foo",function(e,n,a){"object"!==("undefined"==typeof a?"undefined":s(a))&&(t=!1)}),e.call([1],function(){n="string"==typeof this},"x")),!!e&&t&&n};y(l,{forEach:function(e){var t=b(this),n=w&&g(this)?this.split(""):t,a=arguments[1],i=-1,r=n.length>>>0;if(!h(e))throw new TypeError;for(;++i<r;)i in n&&e.call(a,n[i],i,t)}},!k(l.forEach));var x=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);y(l,{indexOf:function(e){var t=w&&g(this)?this.split(""):b(this),n=t.length>>>0;if(!n)return-1;var i=0;for(arguments.length>1&&(i=a(arguments[1])),i=i>=0?i:Math.max(0,n+i);n>i;i++)if(i in t&&t[i]===e)return i;return-1}},x);var E=d.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var e=void 0===/()??/.exec("")[1];d.split=function(t,n){var a=this;if(void 0===t&&0===n)return[];if("[object RegExp]"!==p.call(t))return E.call(this,t,n);var r,o,s,u,c=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),f=0;for(t=new RegExp(t.source,d+"g"),a+="",e||(r=new RegExp("^"+t.source+"$(?!\\s)",d)),n=void 0===n?-1>>>0:i(n);(o=t.exec(a))&&(s=o.index+o[0].length,!(s>f&&(c.push(a.slice(f,o.index)),!e&&o.length>1&&o[0].replace(r,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(o[e]=void 0)}),o.length>1&&o.index<a.length&&l.push.apply(c,o.slice(1)),u=o[0].length,f=s,c.length>=n)));)t.lastIndex===o.index&&t.lastIndex++;return f===a.length?(u||!t.test(""))&&c.push(""):c.push(a.slice(f)),c.length>n?c.slice(0,n):c}}():"0".split(void 0,0).length&&(d.split=function(e,t){return void 0===e&&0===t?[]:E.call(this,e,t)});var T="	\n\f\r   ᠎             　\u2028\u2029",I="​",C="["+T+"]",j=new RegExp("^"+C+C+"*"),S=new RegExp(C+C+"*$"),M=d.trim&&(T.trim()||!I.trim());y(d,{trim:function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(j,"").replace(S,"")}},M);var O=d.substr,B="".substr&&"b"!=="0b".substr(-1);y(d,{substr:function(e,t){return O.call(this,0>e&&(e=this.length+e)<0?0:e,t)}},B)},{}],16:[function(e,t,n){t.exports=[e("./transport/websocket"),e("./transport/xhr-streaming"),e("./transport/xdr-streaming"),e("./transport/eventsource"),e("./transport/lib/iframe-wrap")(e("./transport/eventsource")),e("./transport/htmlfile"),e("./transport/lib/iframe-wrap")(e("./transport/htmlfile")),e("./transport/xhr-polling"),e("./transport/xdr-polling"),e("./transport/lib/iframe-wrap")(e("./transport/xhr-polling")),e("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(e,t,a){(function(n,a){function i(e,t,n,a){c(e,t);var i=this;r.call(this),setTimeout(function(){i._start(e,t,n,a)},0)}var r=e("events").EventEmitter,o=e("inherits"),s=e("../../utils/event"),l=e("../../utils/url"),u=a.XMLHttpRequest,c=function(){};c=e("debug")("sockjs-client:browser:xhr"),o(i,r),i.prototype._start=function(e,t,n,a){var r=this;try{this.xhr=new u}catch(o){}if(!this.xhr)return c("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();t=l.addQuery(t,"t="+ +new Date),this.unloadRef=s.unloadAdd(function(){c("unload cleanup"),r._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){c("xhr timeout"),r.emit("finish",0,""),r._cleanup(!1)})}catch(d){return c("exception",d),this.emit("finish",0,""),void this._cleanup(!1)}if(a&&a.noCredentials||!i.supportsCORS||(c("withCredentials"),this.xhr.withCredentials="true"),a&&a.headers)for(var f in a.headers)this.xhr.setRequestHeader(f,a.headers[f]);this.xhr.onreadystatechange=function(){if(r.xhr){var e,t,n=r.xhr;switch(c("readyState",n.readyState),n.readyState){case 3:try{t=n.status,e=n.responseText}catch(a){}c("status",t),1223===t&&(t=204),200===t&&e&&e.length>0&&(c("chunk"),r.emit("chunk",t,e));break;case 4:t=n.status,c("status",t),1223===t&&(t=204),(12005===t||12029===t)&&(t=0),c("finish",t,n.responseText),r.emit("finish",t,n.responseText),r._cleanup(!1)}}};try{r.xhr.send(n)}catch(d){r.emit("finish",0,""),r._cleanup(!1)}},i.prototype._cleanup=function(e){if(c("cleanup"),this.xhr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(t){}this.unloadRef=this.xhr=null}},i.prototype.close=function(){c("close"),this._cleanup(!0)},i.enabled=!!u;var d=["Active"].concat("Object").join("X");!i.enabled&&d in a&&(c("overriding xmlhttprequest"),u=function(){try{return new a[d]("Microsoft.XMLHTTP")}catch(e){return null}},i.enabled=!!new u);var f=!1;try{f="withCredentials"in new u}catch(p){}i.supportsCORS=f,t.exports=i}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:54,events:3,inherits:57}],18:[function(e,t,a){(function(e){t.exports=e.EventSource}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(e,t,a){(function(e){t.exports=e.WebSocket||e.MozWebSocket}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,n){function a(e){if(!a.enabled())throw new Error("Transport created when disabled");r.call(this,e,"/eventsource",o,s)}var i=e("inherits"),r=e("./lib/ajax-based"),o=e("./receiver/eventsource"),s=e("./sender/xhr-cors"),l=e("eventsource");i(a,r),a.enabled=function(){return!!l},a.transportName="eventsource",a.roundTrips=2,t.exports=a},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:57}],21:[function(e,t,n){function a(e){if(!r.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/htmlfile",r,o)}var i=e("inherits"),r=e("./receiver/htmlfile"),o=e("./sender/xhr-local"),s=e("./lib/ajax-based");i(a,s),a.enabled=function(e){return r.enabled&&e.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,t.exports=a},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:57}],22:[function(e,t,n){(function(n){function a(e,t,n){if(!a.enabled())throw new Error("Transport created when disabled");o.call(this);var i=this;this.origin=l.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=d.string(8);var r=l.addPath(n,"/iframe.html")+"#"+this.windowId;f(e,t,r),this.iframeObj=u.createIframe(r,function(e){f("err callback"),i.emit("close",1006,"Unable to load an iframe ("+e+")"),i.close()}),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}var i=e("inherits"),r=e("json3"),o=e("events").EventEmitter,s=e("../version"),l=e("../utils/url"),u=e("../utils/iframe"),c=e("../utils/event"),d=e("../utils/random"),f=function(){};f=e("debug")("sockjs-client:transport:iframe"),i(a,o),a.prototype.close=function(){if(f("close"),this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},a.prototype._message=function(e){if(f("message",e.data),!l.isOriginEqual(e.origin,this.origin))return void f("not same origin",e.origin,this.origin);var t;try{t=r.parse(e.data)}catch(n){return void f("bad json",e.data)}if(t.windowId!==this.windowId)return void f("mismatched window id",t.windowId,this.windowId);switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",r.stringify([s,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var a;try{a=r.parse(t.data)}catch(n){return void f("bad json",t.data)}this.emit("close",a[0],a[1]),this.close()}},a.prototype.postMessage=function(e,t){f("postMessage",e,t),this.iframeObj.post(r.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},a.prototype.send=function(e){f("send",e),this.postMessage("m",e)},a.enabled=function(){return u.iframeEnabled},a.transportName="iframe",a.roundTrips=2,t.exports=a}).call(this,{env:{}})},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:54,events:3,inherits:57,json3:58}],23:[function(e,t,a){(function(n){function a(e){if(!a.enabled())throw new Error("Transport created when disabled");r.call(this,e,"/jsonp",s,o)}var i=e("inherits"),r=e("./lib/sender-receiver"),o=e("./receiver/jsonp"),s=e("./sender/jsonp");i(a,r),a.enabled=function(){return!!n.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,t.exports=a}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:57}],24:[function(e,t,n){(function(n){function a(e){return function(t,n,a){l("create ajax sender",t,n);var i={};"string"==typeof n&&(i.headers={"Content-type":"text/plain"});var r=o.addPath(t,"/xhr_send"),s=new e("POST",r,n,i);return s.once("finish",function(e){return l("finish",e),s=null,200!==e&&204!==e?a(new Error("http status "+e)):void a()}),function(){l("abort"),s.close(),s=null;var e=new Error("Aborted");e.code=1e3,a(e)}}}function i(e,t,n,i){s.call(this,e,t,a(i),n,i)}var r=e("inherits"),o=e("../../utils/url"),s=e("./sender-receiver"),l=function(){};l=e("debug")("sockjs-client:ajax-based"),r(i,s),t.exports=i}).call(this,{env:{}})},{"../../utils/url":52,"./sender-receiver":28,debug:54,inherits:57}],25:[function(e,t,n){(function(n){function a(e,t){o(e),r.call(this),this.sendBuffer=[],this.sender=t,this.url=e}var i=e("inherits"),r=e("events").EventEmitter,o=function(){};o=e("debug")("sockjs-client:buffered-sender"),i(a,r),a.prototype.send=function(e){o("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},a.prototype.sendScheduleWait=function(){o("sendScheduleWait");var e,t=this;this.sendStop=function(){o("sendStop"),t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){o("timeout"),t.sendStop=null,t.sendSchedule()},25)},a.prototype.sendSchedule=function(){o("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(t){e.sendStop=null,t?(o("error",t),e.emit("close",t.code||1006,"Sending error: "+t),e._cleanup()):e.sendScheduleWait()}),this.sendBuffer=[]}},a.prototype._cleanup=function(){o("_cleanup"),this.removeAllListeners()},a.prototype.stop=function(){o("stop"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},t.exports=a}).call(this,{env:{}})},{debug:54,events:3,inherits:57}],26:[function(e,t,a){(function(n){var a=e("inherits"),i=e("../iframe"),r=e("../../utils/object");t.exports=function(e){function t(t,n){i.call(this,e.transportName,t,n)}return a(t,i),t.enabled=function(t,a){if(!n.document)return!1;var o=r.extend({},a);return o.sameOrigin=!0,e.enabled(o)&&i.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=i.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/object":49,"../iframe":22,inherits:57}],27:[function(e,t,n){(function(n){function a(e,t,n){o(t),r.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}var i=e("inherits"),r=e("events").EventEmitter,o=function(){};o=e("debug")("sockjs-client:polling"),i(a,r),a.prototype._scheduleReceiver=function(){o("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(t){o("message",t),e.emit("message",t)}),t.once("close",function(n,a){o("close",n,a,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||("network"===a?e._scheduleReceiver():(e.emit("close",n||1006,a),e.removeAllListeners()))})},a.prototype.abort=function(){o("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},t.exports=a}).call(this,{env:{}})},{debug:54,events:3,inherits:57}],28:[function(e,t,n){(function(n){function a(e,t,n,a,i){var u=r.addPath(e,t);l(u);var c=this;o.call(this,e,n),this.poll=new s(a,u,i),this.poll.on("message",function(e){l("poll message",e),c.emit("message",e)}),this.poll.once("close",function(e,t){l("poll close",e,t),c.poll=null,c.emit("close",e,t),c.close()})}var i=e("inherits"),r=e("../../utils/url"),o=e("./buffered-sender"),s=e("./polling"),l=function(){};l=e("debug")("sockjs-client:sender-receiver"),i(a,o),a.prototype.close=function(){l("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null),this.stop()},t.exports=a}).call(this,{env:{}})},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:54,inherits:57}],29:[function(e,t,n){(function(n){function a(e){s(e),r.call(this);var t=this,n=this.es=new o(e);n.onmessage=function(e){s("message",e.data),t.emit("message",decodeURI(e.data))},n.onerror=function(e){s("error",n.readyState,e);var a=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(a)}}var i=e("inherits"),r=e("events").EventEmitter,o=e("eventsource"),s=function(){};s=e("debug")("sockjs-client:receiver:eventsource"),i(a,r),a.prototype.abort=function(){s("abort"),this._cleanup(),this._close("user")},a.prototype._cleanup=function(){s("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},a.prototype._close=function(e){s("close",e);var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)},t.exports=a}).call(this,{env:{}})},{debug:54,events:3,eventsource:18,inherits:57}],30:[function(e,t,a){(function(n,a){function i(e){c(e),l.call(this);var t=this;o.polluteGlobalNamespace(),this.id="a"+u.string(6),e=s.addQuery(e,"c="+decodeURIComponent(o.WPrefix+"."+this.id)),c("using htmlfile",i.htmlfileEnabled);var n=i.htmlfileEnabled?o.createHtmlfile:o.createIframe;a[o.WPrefix][this.id]={start:function(){c("start"),t.iframeObj.loaded()},message:function(e){c("message",e),t.emit("message",e)},stop:function(){c("stop"),t._cleanup(),t._close("network")}},this.iframeObj=n(e,function(){c("callback"),t._cleanup(),t._close("permanent")})}var r=e("inherits"),o=e("../../utils/iframe"),s=e("../../utils/url"),l=e("events").EventEmitter,u=e("../../utils/random"),c=function(){};c=e("debug")("sockjs-client:receiver:htmlfile"),r(i,l),i.prototype.abort=function(){c("abort"),this._cleanup(),this._close("user")},i.prototype._cleanup=function(){c("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete a[o.WPrefix][this.id]},i.prototype._close=function(e){c("_close",e),this.emit("close",null,e),this.removeAllListeners()},i.htmlfileEnabled=!1;var d=["Active"].concat("Object").join("X");if(d in a)try{i.htmlfileEnabled=!!new a[d]("htmlfile")}catch(f){}i.enabled=i.htmlfileEnabled||o.iframeEnabled,t.exports=i}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:54,events:3,inherits:57}],31:[function(e,t,a){(function(n,a){function i(e){d(e);var t=this;c.call(this),r.polluteGlobalNamespace(),this.id="a"+o.string(6);var n=l.addQuery(e,"c="+encodeURIComponent(r.WPrefix+"."+this.id));a[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(n),this.timeoutId=setTimeout(function(){d("timeout"),t._abort(new Error("JSONP script loaded abnormally (timeout)"))},i.timeout)}var r=e("../../utils/iframe"),o=e("../../utils/random"),s=e("../../utils/browser"),l=e("../../utils/url"),u=e("inherits"),c=e("events").EventEmitter,d=function(){};d=e("debug")("sockjs-client:receiver:jsonp"),u(i,c),i.prototype.abort=function(){if(d("abort"),a[r.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},i.timeout=35e3,i.scriptErrorTimeout=1e3,i.prototype._callback=function(e){d("_callback",e),this._cleanup(),this.aborting||(e&&(d("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())},i.prototype._abort=function(e){d("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},i.prototype._cleanup=function(){if(d("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete a[r.WPrefix][this.id]},i.prototype._scriptError=function(){d("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},i.scriptErrorTimeout))},i.prototype._createScript=function(e){d("_createScript",e);var t,n=this,i=this.script=a.document.createElement("script");if(i.id="a"+o.string(8),i.src=e,i.type="text/javascript",i.charset="UTF-8",i.onerror=this._scriptError.bind(this),i.onload=function(){d("onload"),n._abort(new Error("JSONP script loaded abnormally (onload)"))},i.onreadystatechange=function(){if(d("onreadystatechange",i.readyState),/loaded|closed/.test(i.readyState)){if(i&&i.htmlFor&&i.onclick){n.loadedOkay=!0;try{i.onclick()}catch(e){}}i&&n._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof i.async&&a.document.attachEvent)if(s.isOpera())t=this.script2=a.document.createElement("script"),t.text="try{var a = document.getElementById('"+i.id+"'); if(a)a.onerror();}catch(x){};",i.async=t.async=!1;else{try{i.htmlFor=i.id,i.event="onclick"}catch(r){}i.async=!0}"undefined"!=typeof i.async&&(i.async=!0);var l=a.document.getElementsByTagName("head")[0];l.insertBefore(i,l.firstChild),t&&l.insertBefore(t,l.firstChild)},t.exports=i}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:54,events:3,inherits:57}],32:[function(e,t,n){(function(n){function a(e,t){o(e),r.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(e,t){o("finish",e,t),n._chunkHandler(e,t),n.xo=null;var a=200===e?"network":"permanent";o("close",a),n.emit("close",null,a),n._cleanup()})}var i=e("inherits"),r=e("events").EventEmitter,o=function(){};o=e("debug")("sockjs-client:receiver:xhr"),i(a,r),a.prototype._chunkHandler=function(e,t){if(o("_chunkHandler",e),200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var a=t.slice(this.bufferPosition);if(n=a.indexOf("\n"),-1===n)break;var i=a.slice(0,n);i&&(o("message",i),this.emit("message",i))}},a.prototype._cleanup=function(){o("_cleanup"),this.removeAllListeners()},a.prototype.abort=function(){o("abort"),this.xo&&(this.xo.close(),o("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},t.exports=a}).call(this,{env:{}})},{debug:54,events:3,inherits:57}],33:[function(e,t,a){(function(n,a){function i(e){l("createIframe",e);try{return a.document.createElement('<iframe name="'+e+'">')}catch(t){var n=a.document.createElement("iframe");return n.name=e,n}}function r(){l("createForm"),u=a.document.createElement("form"),u.style.display="none",u.style.position="absolute",u.method="POST",u.enctype="application/x-www-form-urlencoded",u.acceptCharset="UTF-8",c=a.document.createElement("textarea"),c.name="d",u.appendChild(c),a.document.body.appendChild(u)}var o=e("../../utils/random"),s=e("../../utils/url"),l=function(){};l=e("debug")("sockjs-client:sender:jsonp");var u,c;t.exports=function(e,t,n){l(e,t),u||r();var a="a"+o.string(8);u.target=a,u.action=s.addQuery(s.addPath(e,"/jsonp_send"),"i="+a);var d=i(a);d.id=a,d.style.display="none",u.appendChild(d);try{c.value=t}catch(f){}u.submit();var p=function(e){l("completed",a,e),d.onerror&&(d.onreadystatechange=d.onerror=d.onload=null,setTimeout(function(){l("cleaning up",a),d.parentNode.removeChild(d),d=null},500),c.value="",n(e))};return d.onerror=function(){l("onerror",a),p()},d.onload=function(){l("onload",a),p()},d.onreadystatechange=function(e){l("onreadystatechange",a,d.readyState,e),"complete"===d.readyState&&p()},function(){l("aborted",a),p(new Error("Aborted"))}}}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:54}],34:[function(e,t,a){(function(n,a){function i(e,t,n){c(e,t);var a=this;r.call(this),setTimeout(function(){a._start(e,t,n)},0)}var r=e("events").EventEmitter,o=e("inherits"),s=e("../../utils/event"),l=e("../../utils/browser"),u=e("../../utils/url"),c=function(){};c=e("debug")("sockjs-client:sender:xdr"),o(i,r),i.prototype._start=function(e,t,n){c("_start");var i=this,r=new a.XDomainRequest;t=u.addQuery(t,"t="+ +new Date),r.onerror=function(){c("onerror"),i._error()},r.ontimeout=function(){c("ontimeout"),i._error()},r.onprogress=function(){c("progress",r.responseText),i.emit("chunk",200,r.responseText)},r.onload=function(){c("load"),i.emit("finish",200,r.responseText),i._cleanup(!1)},this.xdr=r,this.unloadRef=s.unloadAdd(function(){i._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch(o){this._error()}},i.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},i.prototype._cleanup=function(e){if(c("cleanup",e),this.xdr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}},i.prototype.close=function(){c("close"),this._cleanup(!0)},i.enabled=!(!a.XDomainRequest||!l.hasDomain()),t.exports=i}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:54,events:3,inherits:57}],35:[function(e,t,n){function a(e,t,n,a){r.call(this,e,t,n,a)}var i=e("inherits"),r=e("../driver/xhr");i(a,r),a.enabled=r.enabled&&r.supportsCORS,t.exports=a},{"../driver/xhr":17,inherits:57}],36:[function(e,t,n){function a(){var e=this;i.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},a.timeout)}var i=e("events").EventEmitter,r=e("inherits");r(a,i),a.prototype.close=function(){clearTimeout(this.to)},a.timeout=2e3,t.exports=a},{events:3,inherits:57}],37:[function(e,t,n){function a(e,t,n){r.call(this,e,t,n,{noCredentials:!0})}var i=e("inherits"),r=e("../driver/xhr");i(a,r),a.enabled=r.enabled,t.exports=a},{"../driver/xhr":17,inherits:57}],38:[function(e,t,n){(function(n){function a(e){if(!a.enabled())throw new Error("Transport created when disabled");s.call(this),u("constructor",e);var t=this,n=r.addPath(e,"/websocket");n="https"===n.slice(0,5)?"wss"+n.slice(5):"ws"+n.slice(4),this.url=n,this.ws=new l(this.url),this.ws.onmessage=function(e){u("message event",e.data),t.emit("message",e.data)},this.unloadRef=i.unloadAdd(function(){u("unload"),t.ws.close()}),this.ws.onclose=function(e){u("close event",e.code,e.reason),t.emit("close",e.code,e.reason),t._cleanup()},this.ws.onerror=function(e){u("error event",e),t.emit("close",1006,"WebSocket connection broken"),t._cleanup()}}var i=e("../utils/event"),r=e("../utils/url"),o=e("inherits"),s=e("events").EventEmitter,l=e("./driver/websocket"),u=function(){};u=e("debug")("sockjs-client:websocket"),o(a,s),a.prototype.send=function(e){var t="["+e+"]";u("send",t),this.ws.send(t)},a.prototype.close=function(){u("close"),this.ws&&this.ws.close(),this._cleanup()},a.prototype._cleanup=function(){u("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),i.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},a.enabled=function(){return u("enabled"),!!l},a.transportName="websocket",a.roundTrips=2,t.exports=a}).call(this,{env:{}})},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:54,events:3,inherits:57}],39:[function(e,t,n){function a(e){if(!l.enabled)throw new Error("Transport created when disabled");r.call(this,e,"/xhr",s,l)}var i=e("inherits"),r=e("./lib/ajax-based"),o=e("./xdr-streaming"),s=e("./receiver/xhr"),l=e("./sender/xdr");i(a,r),a.enabled=o.enabled,a.transportName="xdr-polling",a.roundTrips=2,t.exports=a},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:57}],40:[function(e,t,n){function a(e){if(!s.enabled)throw new Error("Transport created when disabled");r.call(this,e,"/xhr_streaming",o,s)}var i=e("inherits"),r=e("./lib/ajax-based"),o=e("./receiver/xhr"),s=e("./sender/xdr");i(a,r),a.enabled=function(e){return e.cookie_needed||e.nullOrigin?!1:s.enabled&&e.sameScheme},a.transportName="xdr-streaming",a.roundTrips=2,t.exports=a},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:57}],41:[function(e,t,n){function a(e){if(!l.enabled&&!s.enabled)throw new Error("Transport created when disabled");r.call(this,e,"/xhr",o,s)}var i=e("inherits"),r=e("./lib/ajax-based"),o=e("./receiver/xhr"),s=e("./sender/xhr-cors"),l=e("./sender/xhr-local");i(a,r),a.enabled=function(e){return e.nullOrigin?!1:l.enabled&&e.sameOrigin?!0:s.enabled},a.transportName="xhr-polling",a.roundTrips=2,t.exports=a},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:57}],42:[function(e,t,a){(function(n){function a(e){if(!l.enabled&&!s.enabled)throw new Error("Transport created when disabled");r.call(this,e,"/xhr_streaming",o,s)}var i=e("inherits"),r=e("./lib/ajax-based"),o=e("./receiver/xhr"),s=e("./sender/xhr-cors"),l=e("./sender/xhr-local"),u=e("../utils/browser");i(a,r),a.enabled=function(e){return e.nullOrigin?!1:u.isOpera()?!1:s.enabled},a.transportName="xhr-streaming",a.roundTrips=2,a.needBody=!!n.document,t.exports=a}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:57}],43:[function(e,t,a){(function(e){t.exports.randomBytes=e.crypto&&e.crypto.getRandomValues?function(t){var n=new Uint8Array(t);return e.crypto.getRandomValues(n),n}:function(e){for(var t=new Array(e),n=0;e>n;n++)t[n]=Math.floor(256*Math.random());return t}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(e,t,a){(function(e){t.exports={isOpera:function(){return e.navigator&&/opera/i.test(e.navigator.userAgent)},isKonqueror:function(){return e.navigator&&/konqueror/i.test(e.navigator.userAgent)},hasDomain:function(){if(!e.document)return!0;try{return!!e.document.domain}catch(t){return!1}}}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,n){var a,i=e("json3"),r=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,o=function(e){var t,n={},a=[];for(t=0;65536>t;t++)a.push(String.fromCharCode(t));return e.lastIndex=0,
a.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};t.exports={quote:function(e){var t=i.stringify(e);return r.lastIndex=0,r.test(t)?(a||(a=o(r)),t.replace(r,function(e){return a[e]})):t}}},{json3:58}],46:[function(e,t,a){(function(n){var a=e("./random"),i={},r=!1,o=n.chrome&&n.chrome.app&&n.chrome.app.runtime;t.exports={attachEvent:function(e,t){"undefined"!=typeof n.addEventListener?n.addEventListener(e,t,!1):n.document&&n.attachEvent&&(n.document.attachEvent("on"+e,t),n.attachEvent("on"+e,t))},detachEvent:function(e,t){"undefined"!=typeof n.addEventListener?n.removeEventListener(e,t,!1):n.document&&n.detachEvent&&(n.document.detachEvent("on"+e,t),n.detachEvent("on"+e,t))},unloadAdd:function(e){if(o)return null;var t=a.string(8);return i[t]=e,r&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in i&&delete i[e]},triggerUnloadCallbacks:function(){for(var e in i)i[e](),delete i[e]}};var s=function(){r||(r=!0,t.exports.triggerUnloadCallbacks())};o||t.exports.attachEvent("unload",s)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./random":50}],47:[function(e,t,a){(function(n,a){var i=e("./event"),r=e("json3"),o=e("./browser"),l=function(){};l=e("debug")("sockjs-client:utils:iframe"),t.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){t.exports.WPrefix in a||(a[t.exports.WPrefix]={})},postMessage:function(e,n){a.parent!==a?a.parent.postMessage(r.stringify({windowId:t.exports.currentWindowId,type:e,data:n||""}),"*"):l("Cannot postMessage, no parent window.",e,n)},createIframe:function(e,t){var n,r,o=a.document.createElement("iframe"),s=function(){l("unattach"),clearTimeout(n);try{o.onload=null}catch(e){}o.onerror=null},u=function(){l("cleanup"),o&&(s(),setTimeout(function(){o&&o.parentNode.removeChild(o),o=null},0),i.unloadDel(r))},c=function(e){l("onerror",e),o&&(u(),t(e))},d=function(e,t){l("post",e,t);try{setTimeout(function(){o&&o.contentWindow&&o.contentWindow.postMessage(e,t)},0)}catch(n){}};return o.src=e,o.style.display="none",o.style.position="absolute",o.onerror=function(){c("onerror")},o.onload=function(){l("onload"),clearTimeout(n),n=setTimeout(function(){c("onload timeout")},2e3)},a.document.body.appendChild(o),n=setTimeout(function(){c("timeout")},15e3),r=i.unloadAdd(u),{post:d,cleanup:u,loaded:s}},createHtmlfile:function(e,n){var r,o,s,u=["Active"].concat("Object").join("X"),c=new a[u]("htmlfile"),d=function(){clearTimeout(r),s.onerror=null},f=function(){c&&(d(),i.unloadDel(o),s.parentNode.removeChild(s),s=c=null,CollectGarbage())},p=function(e){l("onerror",e),c&&(f(),n(e))},h=function(e,t){try{setTimeout(function(){s&&s.contentWindow&&s.contentWindow.postMessage(e,t)},0)}catch(n){}};c.open(),c.write('<html><script>document.domain="'+a.document.domain+'";</script></html>'),c.close(),c.parentWindow[t.exports.WPrefix]=a[t.exports.WPrefix];var m=c.createElement("div");return c.body.appendChild(m),s=c.createElement("iframe"),m.appendChild(s),s.src=e,s.onerror=function(){p("onerror")},r=setTimeout(function(){p("timeout")},15e3),o=i.unloadAdd(f),{post:h,cleanup:f,loaded:d}}},t.exports.iframeEnabled=!1,a.document&&(t.exports.iframeEnabled=("function"==typeof a.postMessage||"object"===s(a.postMessage))&&!o.isKonqueror())}).call(this,{env:{}},"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./browser":44,"./event":46,debug:54,json3:58}],48:[function(e,t,a){(function(e){var n={};["log","debug","warn"].forEach(function(t){var a;try{a=e.console&&e.console[t]&&e.console[t].apply}catch(i){}n[t]=a?function(){return e.console[t].apply(e.console,arguments)}:"log"===t?function(){}:n.log}),t.exports=n}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t,n){t.exports={isObject:function(e){var t="undefined"==typeof e?"undefined":s(e);return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,a=1,i=arguments.length;i>a;a++){t=arguments[a];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}}},{}],50:[function(e,t,n){var a=e("crypto"),i="abcdefghijklmnopqrstuvwxyz012345";t.exports={string:function(e){for(var t=i.length,n=a.randomBytes(e),r=[],o=0;e>o;o++)r.push(i.substr(n[o]%t,1));return r.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length,n=new Array(t+1).join("0");return(n+this.number(e)).slice(-t)}}},{crypto:43}],51:[function(e,t,n){(function(n){var a=function(){};a=e("debug")("sockjs-client:utils:transport"),t.exports=function(e){return{filterToEnabled:function(t,n){var i={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach(function(e){return e?"websocket"===e.transportName&&n.websocket===!1?void a("disabled from server","websocket"):t.length&&-1===t.indexOf(e.transportName)?void a("not in whitelist",e.transportName):void(e.enabled(n)?(a("enabled",e.transportName),i.main.push(e),e.facadeTransport&&i.facade.push(e.facadeTransport)):a("disabled",e.transportName)):void 0}),i}}}}).call(this,{env:{}})},{debug:54}],52:[function(e,t,n){(function(n){var a=e("url-parse"),i=function(){};i=e("debug")("sockjs-client:utils:url"),t.exports={getOrigin:function(e){if(!e)return null;var t=new a(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return i("same",e,t,n),n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}}).call(this,{env:{}})},{debug:54,"url-parse":59}],53:[function(e,t,n){t.exports="1.0.3"},{}],54:[function(e,t,n){function a(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var a="color: "+this.color;e=[e[0],a,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,r=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(r=i))}),e.splice(r,0,a),e}function r(){return"object"===("undefined"==typeof console?"undefined":s(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function l(){var e;try{e=n.storage.debug}catch(t){}return e}function u(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=r,n.formatArgs=i,n.save=o,n.load=l,n.useColors=a,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(l())},{"./debug":55}],55:[function(e,t,n){function a(){return n.colors[c++%n.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,r=t-(u||t);e.diff=r,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=a());var o=Array.prototype.slice.call(arguments);o[0]=n.coerce(o[0]),"string"!=typeof o[0]&&(o=["%o"].concat(o));var s=0;o[0]=o[0].replace(/%([a-z%])/g,function(t,a){if("%%"===t)return t;s++;var i=n.formatters[a];if("function"==typeof i){var r=o[s];t=i.call(e,r),o.splice(s,1),s--}return t}),"function"==typeof n.formatArgs&&(o=n.formatArgs.apply(e,o));var l=i.log||n.log||console.log.bind(console);l.apply(e,o)}t.enabled=!1,i.enabled=!0;var r=n.enabled(e)?i:t;return r.namespace=e,r}function r(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),a=t.length,i=0;a>i;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function o(){n.enable("")}function s(e){var t,a;for(t=0,a=n.skips.length;a>t;t++)if(n.skips[t].test(e))return!1;for(t=0,a=n.names.length;a>t;t++)if(n.names[t].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i,n.coerce=l,n.disable=o,n.enable=r,n.enabled=s,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var u,c=0},{ms:56}],56:[function(e,t,n){function a(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),a=(t[2]||"ms").toLowerCase();switch(a){case"years":case"year":case"yrs":case"yr":case"y":return n*d;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*l;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=l?Math.round(e/l)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function r(e){return o(e,c,"day")||o(e,u,"hour")||o(e,l,"minute")||o(e,s,"second")||e+" ms"}function o(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,l=60*s,u=60*l,c=24*u,d=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?a(e):t["long"]?r(e):i(e)}},{}],57:[function(e,t,n){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],58:[function(t,a,i){(function(t){(function(){function n(e,t){function a(e){if(a[e]!==v)return a[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=a("json-stringify")&&a("json-parse");else{var o,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l=t.stringify,u="function"==typeof l&&_;if(u){(o=function(){return 1}).toJSON=o;try{u="0"===l(0)&&"0"===l(new i)&&'""'==l(new r)&&l(b)===v&&l(v)===v&&l()===v&&"1"===l(o)&&"[1]"==l([o])&&"[null]"==l([v])&&"null"==l(null)&&"[null,null,null]"==l([v,b,null])&&l({a:[o,!0,!1,null,"\x00\b\n\f\r	"]})==s&&"1"===l(null,o)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new c(-1))}catch(d){u=!1}}n=u}if("json-parse"==e){var f=t.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){o=f(s);var p=5==o.a.length&&1===o.a[0];if(p){try{p=!f('"	"')}catch(d){}if(p)try{p=1!==f("01")}catch(d){}if(p)try{p=1!==f("1.")}catch(d){}}}}catch(d){p=!1}n=p}}return a[e]=!!n}e||(e=u.Object()),t||(t=u.Object());var i=e.Number||u.Number,r=e.String||u.String,l=e.Object||u.Object,c=e.Date||u.Date,d=e.SyntaxError||u.SyntaxError,f=e.TypeError||u.TypeError,p=e.Math||u.Math,h=e.JSON||u.JSON;"object"==("undefined"==typeof h?"undefined":s(h))&&h&&(t.stringify=h.stringify,t.parse=h.parse);var m,g,v,y=l.prototype,b=y.toString,_=new c(-0xc782b5b800cec);try{_=-109252==_.getUTCFullYear()&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(w){}if(!a("json")){var k="[object Function]",x="[object Date]",E="[object Number]",T="[object String]",I="[object Array]",C="[object Boolean]",j=a("bug-string-char-index");if(!_)var S=p.floor,M=[0,31,59,90,120,151,181,212,243,273,304,334],O=function(e,t){return M[t]+365*(e-1970)+S((e-1969+(t=+(t>1)))/4)-S((e-1901+t)/100)+S((e-1601+t)/400)};if((m=y.hasOwnProperty)||(m=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=b?m=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,m=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,m.call(this,e)}),g=function(e,t){var n,a,i,r=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,a=new n;for(i in a)m.call(a,i)&&r++;return n=a=null,r?g=2==r?function(e,t){var n,a={},i=b.call(e)==k;for(n in e)i&&"prototype"==n||m.call(a,n)||!(a[n]=1)||!m.call(e,n)||t(n)}:function(e,t){var n,a,i=b.call(e)==k;for(n in e)i&&"prototype"==n||!m.call(e,n)||(a="constructor"===n)||t(n);(a||m.call(e,n="constructor"))&&t(n)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var n,i,r=b.call(e)==k,l=!r&&"function"!=typeof e.constructor&&o[s(e.hasOwnProperty)]&&e.hasOwnProperty||m;for(n in e)r&&"prototype"==n||!l.call(e,n)||t(n);for(i=a.length;n=a[--i];l.call(e,n)&&t(n));}),g(e,t)},!a("json-stringify")){var B={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},A="000000",L=function(e,t){return(A+(t||0)).slice(-e)},N="\\u00",P=function(e){for(var t='"',n=0,a=e.length,i=!j||a>10,r=i&&(j?e.split(""):e);a>n;n++){var o=e.charCodeAt(n);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=B[o];break;default:if(32>o){t+=N+L(2,o.toString(16));break}t+=i?r[n]:e.charAt(n)}}return t+'"'},q=function G(e,t,n,a,i,r,o){var l,u,c,d,p,h,y,_,w,k,j,M,B,A,N,q;try{l=t[e]}catch(H){}if("object"==("undefined"==typeof l?"undefined":s(l))&&l)if(u=b.call(l),u!=x||m.call(l,"toJSON"))"function"==typeof l.toJSON&&(u!=E&&u!=T&&u!=I||m.call(l,"toJSON"))&&(l=l.toJSON(e));else if(l>-1/0&&1/0>l){if(O){for(p=S(l/864e5),c=S(p/365.2425)+1970-1;O(c+1,0)<=p;c++);for(d=S((p-O(c,0))/30.42);O(c,d+1)<=p;d++);p=1+p-O(c,d),h=(l%864e5+864e5)%864e5,y=S(h/36e5)%24,_=S(h/6e4)%60,w=S(h/1e3)%60,k=h%1e3}else c=l.getUTCFullYear(),d=l.getUTCMonth(),p=l.getUTCDate(),y=l.getUTCHours(),_=l.getUTCMinutes(),w=l.getUTCSeconds(),k=l.getUTCMilliseconds();l=(0>=c||c>=1e4?(0>c?"-":"+")+L(6,0>c?-c:c):L(4,c))+"-"+L(2,d+1)+"-"+L(2,p)+"T"+L(2,y)+":"+L(2,_)+":"+L(2,w)+"."+L(3,k)+"Z"}else l=null;if(n&&(l=n.call(t,e,l)),null===l)return"null";if(u=b.call(l),u==C)return""+l;if(u==E)return l>-1/0&&1/0>l?""+l:"null";if(u==T)return P(""+l);if("object"==("undefined"==typeof l?"undefined":s(l))){for(A=o.length;A--;)if(o[A]===l)throw f();if(o.push(l),j=[],N=r,r+=i,u==I){for(B=0,A=l.length;A>B;B++)M=G(B,l,n,a,i,r,o),j.push(M===v?"null":M);q=j.length?i?"[\n"+r+j.join(",\n"+r)+"\n"+N+"]":"["+j.join(",")+"]":"[]"}else g(a||l,function(e){var t=G(e,l,n,a,i,r,o);t!==v&&j.push(P(e)+":"+(i?" ":"")+t)}),q=j.length?i?"{\n"+r+j.join(",\n"+r)+"\n"+N+"}":"{"+j.join(",")+"}":"{}";return o.pop(),q}};t.stringify=function(e,t,n){var a,i,r,l;if(o["undefined"==typeof t?"undefined":s(t)]&&t)if((l=b.call(t))==k)i=t;else if(l==I){r={};for(var u,c=0,d=t.length;d>c;u=t[c++],l=b.call(u),(l==T||l==E)&&(r[u]=1));}if(n)if((l=b.call(n))==E){if((n-=n%1)>0)for(a="",n>10&&(n=10);a.length<n;a+=" ");}else l==T&&(a=n.length<=10?n:n.slice(0,10));return q("",(u={},u[""]=e,u),i,r,a,"",[])}}if(!a("json-parse")){var H,D,$=r.fromCharCode,R={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},U=function(){throw H=D=null,d()},z=function(){for(var e,t,n,a,i,r=D,o=r.length;o>H;)switch(i=r.charCodeAt(H)){case 9:case 10:case 13:case 32:H++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=j?r.charAt(H):r[H],H++,e;case 34:for(e="@",H++;o>H;)if(i=r.charCodeAt(H),32>i)U();else if(92==i)switch(i=r.charCodeAt(++H)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=R[i],H++;break;case 117:for(t=++H,n=H+4;n>H;H++)i=r.charCodeAt(H),i>=48&&57>=i||i>=97&&102>=i||i>=65&&70>=i||U();e+=$("0x"+r.slice(t,H));break;default:U()}else{if(34==i)break;for(i=r.charCodeAt(H),t=H;i>=32&&92!=i&&34!=i;)i=r.charCodeAt(++H);e+=r.slice(t,H)}if(34==r.charCodeAt(H))return H++,e;U();default:if(t=H,45==i&&(a=!0,i=r.charCodeAt(++H)),i>=48&&57>=i){for(48==i&&(i=r.charCodeAt(H+1),i>=48&&57>=i)&&U(),a=!1;o>H&&(i=r.charCodeAt(H),i>=48&&57>=i);H++);if(46==r.charCodeAt(H)){for(n=++H;o>n&&(i=r.charCodeAt(n),i>=48&&57>=i);n++);n==H&&U(),H=n}if(i=r.charCodeAt(H),101==i||69==i){for(i=r.charCodeAt(++H),(43==i||45==i)&&H++,n=H;o>n&&(i=r.charCodeAt(n),i>=48&&57>=i);n++);n==H&&U(),H=n}return+r.slice(t,H)}if(a&&U(),"true"==r.slice(H,H+4))return H+=4,!0;if("false"==r.slice(H,H+5))return H+=5,!1;if("null"==r.slice(H,H+4))return H+=4,null;U()}return"$"},F=function X(e){var t,n;if("$"==e&&U(),"string"==typeof e){if("@"==(j?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=z(),"]"!=e;n||(n=!0))n&&(","==e?(e=z(),"]"==e&&U()):U()),","==e&&U(),t.push(X(e));return t}if("{"==e){for(t={};e=z(),"}"!=e;n||(n=!0))n&&(","==e?(e=z(),"}"==e&&U()):U()),(","==e||"string"!=typeof e||"@"!=(j?e.charAt(0):e[0])||":"!=z())&&U(),t[e.slice(1)]=X(z());return t}U()}return e},J=function(e,t,n){var a=W(e,t,n);a===v?delete e[t]:e[t]=a},W=function(e,t,n){var a,i=e[t];if("object"==("undefined"==typeof i?"undefined":s(i))&&i)if(b.call(i)==I)for(a=i.length;a--;)J(i,a,n);else g(i,function(e){J(i,e,n)});return n.call(e,t,i)};t.parse=function(e,t){var n,a;return H=0,D=""+e,n=F(z()),"$"!=z()&&U(),H=D=null,t&&b.call(t)==k?W((a={},a[""]=n,a),"",t):n}}}return t.runInContext=n,t}var r="function"==typeof e&&e.amd,o={"function":!0,object:!0},l=o["undefined"==typeof i?"undefined":s(i)]&&i&&!i.nodeType&&i,u=o["undefined"==typeof window?"undefined":s(window)]&&window||this,c=l&&o["undefined"==typeof a?"undefined":s(a)]&&a&&!a.nodeType&&"object"==("undefined"==typeof t?"undefined":s(t))&&t;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(u=c),l&&!r)n(u,l);else{var d=u.JSON,f=u.JSON3,p=!1,h=n(u,u.JSON3={noConflict:function(){return p||(p=!0,u.JSON=d,u.JSON3=f,d=f=null),h}});u.JSON={parse:h.parse,stringify:h.stringify}}r&&e(function(){return h})}).call(this)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(e,t,n){function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);var c,d,f,p,h=l.test(e),m="undefined"==typeof t?"undefined":s(t),g=this,v=0;for("object"!==m&&"string"!==m&&(n=t,t=null),n&&"function"!=typeof n&&(n=o.parse),t=r(t);v<u.length;v++)d=u[v],c=d[0],p=d[1],c!==c?g[p]=e:"string"==typeof c?~(f=e.indexOf(c))&&("number"==typeof d[2]?(g[p]=e.slice(0,f),e=e.slice(f+d[2])):(g[p]=e.slice(f),e=e.slice(0,f))):(f=c.exec(e))&&(g[p]=f[1],e=e.slice(0,e.length-f[0].length)),g[p]=g[p]||(d[3]||"port"===p&&h?t[p]||"":""),d[4]&&(g[p]=g[p].toLowerCase());n&&(g.query=n(g.query)),i(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(d=g.auth.split(":"),g.username=d[0]||"",g.password=d[1]||""),g.href=g.toString()}var i=e("requires-port"),r=e("./lolcation"),o=e("querystringify"),l=/^\/(?!\/)/,u=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[0/0,"host",void 0,1,1],[/\:(\d+)$/,"port"],[0/0,"hostname",void 0,1,1]];a.prototype.set=function(e,t,n){var a=this;return"query"===e?("string"==typeof t&&t.length&&(t=(n||o.parse)(t)),a[e]=t):"port"===e?(a[e]=t,i(t,a.protocol)?t&&(a.host=a.hostname+":"+t):(a.host=a.hostname,a[e]="")):"hostname"===e?(a[e]=t,a.port&&(t+=":"+a.port),a.host=t):"host"===e?(a[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),a.hostname=t[0],a.port=t[1])):a[e]=t,a.href=a.toString(),a},a.prototype.toString=function(e){e&&"function"==typeof e||(e=o.stringify);var t,n=this,a=n.protocol+"//";return n.username&&(a+=n.username,n.password&&(a+=":"+n.password),a+="@"),a+=n.hostname,n.port&&(a+=":"+n.port),a+=n.pathname,t="object"===s(n.query)?e(n.query):n.query,t&&(a+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(a+=n.hash),a},a.qs=o,a.location=r,t.exports=a},{"./lolcation":60,querystringify:61,"requires-port":62}],60:[function(e,t,a){(function(n){var a,i={hash:1,query:1};t.exports=function(t){t=t||n.location||{},a=a||e("./");var r,o={},l="undefined"==typeof t?"undefined":s(t);if("blob:"===t.protocol)o=new a(unescape(t.pathname),{});else if("string"===l){o=new a(t,{});for(r in i)delete o[r]}else if("object"===l)for(r in t)r in i||(o[r]=t[r]);return o}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":59}],61:[function(e,t,n){function a(e){for(var t,n=/([^=?&]+)=([^&]*)/g,a={};t=n.exec(e);a[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return a}function i(e,t){t=t||"";var n=[];"string"!=typeof t&&(t="?");for(var a in e)r.call(e,a)&&n.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return n.length?t+n.join("&"):""}var r=Object.prototype.hasOwnProperty;n.stringify=i,n.parse=a},{}],62:[function(e,t,n){t.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}]},{},[1])(1)})}).call(t,function(){return this}())},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=a(i);t["default"]=function(e){return r["default"].msgId.indexOf(e)<0?(r["default"].msgId.length>200&&(r["default"].msgId=[]),r["default"].msgId.push(e),!1):!0}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e){for(var t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t].id===e[n].id&&e.splice(n--,1);return e}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=a(r);t["default"]=function(e,t){try{var n=window.localStorage,a="unreadMsg-"+o["default"].entId+"-"+o["default"].trackId;if("get"===e)return n.getItem(a);if("set"===e){var r=n.getItem(a);r?(r=JSON.parse(r),t=JSON.parse(t),r=JSON.stringify(i(r.concat(t)))):r=t,n.setItem(a,r)}else"remove"===e&&n.removeItem(a)}catch(s){return null}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=a(i);t["default"]=function(e,t){try{var n=window.localStorage,a="unsentMsg-"+r["default"].entId+"-"+r["default"].trackId;if("get"===e)return n.getItem(a);if("set"===e)return n.setItem(a,t),!0;if("remove"===e)return n.removeItem(a),!0}catch(i){return!1}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=a(i);t["default"]=function(e,t){var n=r["default"].tpl(e,{intro:t.intro});document.getElementById("evaluationHolder").innerHTML=n}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(69),u=a(l),c=n(70),d=a(c),f=n(26),p=a(f),h=n(11),m=a(h),g=n(4),v=a(g),y=n(71),b=a(y),_=n(13),w=a(_),k=n(21),x=a(k),E=n(20),T=a(E),I=n(72),C=a(I),j=n(29),S=a(j);t["default"]=function(){v["default"].surveyRendered=!0;var e=function(e){var t=v["default"].initData.survey.has_submitted_form;if(t){for(var n=e.form_def.inputs.fields,a=0,i=0;i<n.length;i++)n[i].ignore_returned_customer&&(n[i].ignore=!0,a++);if(!v["default"].convId&&!v["default"].scheduler&&"close"===e.form_def.menus.status&&a===n.length&&!e.captcha)return b["default"]("pageChat"),S["default"](),!1}var r=v["default"].tpl("survey",e.form_def);document.getElementById("surveyBody").innerHTML=r,"open"===e.form_def.menus.status&&u["default"]("surveyMenus","click",function(t){var n=t.target.title,a=t.target.id.split("_")[0],i=t.target.id.split("_")[1];"agent"===a&&(v["default"].agentToken=v["default"].assignedAgentToken=i),"group"===a&&(v["default"].groupToken=v["default"].assignedGroupToken=i,v["default"].agentToken=v["default"].assignedAgentToken=null);var r=1*new Date;v["default"].fakeSentMsg.push({id:r,content_type:"text",content:n}),"open"===e.form_def.inputs.status?(v["default"].menusResult=n,w["default"].removeClass(document.getElementById("surveyStep1"),"active"),w["default"].addClass(document.getElementById("surveyStep2"),"active")):(b["default"]("pageChat"),S["default"]())}),"open"===e.form_def.inputs.status&&!function(){var t=function(){var t=n();if(t)if(e.form_def.captcha){var a=document.getElementById("surveyCaptcha").value;a?C["default"](t,{"Captcha-Value":a,"Captcha-Token":v["default"].surveyCaptchaToken}):x["default"]("请输入验证码",5e3)}else C["default"](t)};e.form_def.captcha&&(T["default"]("surveyCaptchaImg","surveyCaptchaToken"),document.getElementById("surveyCaptchaImg").addEventListener("click",function(){T["default"]("surveyCaptchaImg","surveyCaptchaToken")}),document.getElementById("surveyCaptcha").addEventListener("keydown",function(e){var n=e.which||e.keyCode;return 13===n?(t(),e.preventDefault&&e.preventDefault(),!1):void 0}));var n=function(){for(var t={},n=e.form_def.inputs.fields,a=0;a<n.length;a++)if(!n[a].ignore){var i=n[a].field_name,r=n[a].display_name,o=void 0;switch(n[a].type){case"text":if(o=document.getElementsByName(i)[0].value){if(!(o.length>0&&o.length<=100))return x["default"]("请控制「"+n[a].display_name+"」在1到100个字符",5e3),!1;t[i]=o||null}else if(!n[a].optional)return x["default"]("请填写必填字段「"+n[a].display_name+"」",5e3),!1;break;case"single_choice":if(o=p["default"](i))t[r]=o[0];else if(!n[a].optional)return x["default"]("请选择「"+n[a].display_name+"」",5e3),!1;break;case"multiple_choice":if(o=p["default"](i))t[r]=o;else if(!n[a].optional)return x["default"]("请选择「"+n[a].display_name+"」",5e3),!1}}return t};document.getElementById("surveySubmit").addEventListener("click",function(){w["default"].hasClass(document.getElementById("surveySubmit"),"disabled")||t()});var a=d["default"]("survey-input-text");if(a&&a.length>0)for(var i=0;i<a.length;i++)a[i].addEventListener("keydown",function(e){var n=e.which||e.keyCode;return 13===n?(t(),e.preventDefault&&e.preventDefault(),!1):void 0}),!m["default"].isMobile()&&m["default"].isSafari()&&a[i].addEventListener("click",function(e){e.target.focus()})}()};s["default"].ajax({url:r["default"].chat+"/client/forms",data:{ent_id:v["default"].entId},type:"get",success:function(t){e(t)},error:function(e){var t={};try{t=JSON.parse(e.responseText)}catch(n){}x["default"](t.message||"加载询前表单失败，请稍后重试",3e3)}})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,n){var a=document.getElementsByName(e);if(a.length)for(var i=0;i<a.length;i++)a[i].addEventListener(t,n)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,n){if(document.getElementsByClassName){var a=(t||document).getElementsByClassName(e),i=[];if(n&&"*"!==n)for(var r=0;r<a.length;r++)a[r].tagName===n.toUpperCase()&&i.push(a[r]);else i=a;return i}t=t||document,n=n||"*";for(var o=e.split(" "),s="*"===n&&t.all?t.all:t.getElementsByTagName(n),l=[],u=void 0,c=void 0,i=[],r=o.length;--r>=0;)l.push(new RegExp("(^|\\s)"+o[r]+"(\\s|$)"));for(var d=s.length;--d>=0;){u=s[d],c=!1;for(var f=0,p=l.length;p>f&&(c=l[f].test(u.className),c);f++);c&&i.push(u)}return i}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(23),r=a(i),o=n(31),s=a(o);t["default"]=function(e){for(var t=["pageChat","pageTicket","pageCall","pageSurvey"],n=0;n<t.length;n++)r["default"](document.getElementById(t[n]),t[n]===e?"show":"hide");s["default"]()}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(13),u=a(l),c=n(4),d=a(c),f=n(21),p=a(f),h=n(29),m=a(h),g=n(71),v=a(g);t["default"]=function(e,t){var n=document.getElementById("surveySubmit");s["default"].ajax({url:r["default"].chat+"/client/forms",type:"post",dataType:"json",contentType:"application/json",header:t,data:{ent_id:d["default"].entId,track_id:d["default"].trackId,data:e},beforeSend:function(){u["default"].addClass(n,"disabled")},success:function(){v["default"]("pageChat"),m["default"]()},error:function(e){var t={};try{t=JSON.parse(e.responseText)}catch(a){}p["default"](t.message||"提交失败，请稍候再试",3e3),u["default"].removeClass(n,"disabled")}})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=a(i),o=n(23),s=a(o),l=n(13),u=a(l),c=n(4),d=a(c),f=n(57),p=a(f),h=n(54),m=a(h),g=n(30),v=a(g),y=n(32),b=a(y),_=n(65),w=a(_),k=n(53),x=a(k),E=n(58),T=a(E),I=n(74),C=a(I),j=n(76),S=a(j),M=n(77),O=a(M),B=n(60),A=a(B),L=n(52),N=a(L),P=n(55),q=a(P),H=n(61),D=a(H);t["default"]=function(e){var t="";switch(e.action){case"message":d["default"].isBasic||m["default"]("visible"===r["default"].get("MEIQIA_PANEL_VISIBILITY")?"newMessage":"newChat"),d["default"].lastMsgDate=e.created_on,/^(text|welcome|photo|file|bot|rich_text)$/.test(e.content_type)&&(t=[e]),b["default"](t,"normal",!0),D["default"](t),d["default"].messenger.targets.parent.send("newMsg^@#"+JSON.stringify(t)),"redirect"===e.sub_type&&O["default"](),/queueing|manual_redirect/.test(e.sub_type)&&S["default"]("很抱歉没能理解您的提问"),"reply"===e.sub_type&&C["default"]();break;case"end_conv_timeout":case"end_conv_agent":case"end_conv_client":d["default"].isEnd=!0,w["default"]("remove"),d["default"].blacklist||(m["default"]("newChat"),p["default"](),document.activeElement.blur(),document.getElementById("textarea").blur(),d["default"].messenger.targets.parent.send("conversation^@#no"),e.body.evaluation&&(s["default"](document.getElementById("evaluationHolder"),"show"),s["default"](document.getElementById("evaluationMask"),"show")));break;case"agent_visit_inviting":d["default"].convId||d["default"].messenger.targets.parent.send("inviting^@#"+e.body.token);break;case"agent_redirect":case"timeout_redirect":m["default"]("newChat");var n={id:1*new Date,from_type:"redirect",toNickname:e.body.to.nickname};b["default"]([n]),d["default"].agent=e.body.to,d["default"].agentToken=e.body.to.token,d["default"].convId=e.body.conversation_id,"mondeo"===d["default"].style?(v["default"]("header-mondeo","headLeft",{name:e.body.to.nickname,signature:e.body.to.signature}),v["default"]("profile","profile",{avatar:e.body.to.avatar,name:e.body.to.nickname,tel:e.body.to.telephone,cellphone:e.body.to.public_cellphone,email:e.body.to.public_email,qq:e.body.to.qq,weixin:e.body.to.weixin})):v["default"]("header","headLeft",{avatar:e.body.to.avatar,name:e.body.to.nickname,signature:e.body.to.signature}),A["default"]("bot"===e.body.to.privilege);break;case"agent_inputting":d["default"].initData.servability&&!function(){clearTimeout(window.AGENT_INPUTTING);var e=document.getElementById("agentInputting");s["default"](e,"show"),window.AGENT_INPUTTING=setTimeout(function(){s["default"](e,"hide")},4e3)}();break;case"invite_evaluation":m["default"]("newChat"),s["default"](document.getElementById("evaluationHolder"),"show"),s["default"](document.getElementById("evaluationMask"),"show");break;case"visit_black_add":m["default"]("newChat"),d["default"].blacklist=!0,d["default"].isEnd&&u["default"].addClass(document.getElementById("chatHasEnd"),"hide"),document.getElementById("blacklistTips").innerHTML="抱歉，客服系统暂时无法使用",u["default"].removeClass(document.getElementById("blacklistTips"),"hide"),document.activeElement.blur(),document.getElementById("textarea").blur();break;case"visit_black_del":m["default"]("newChat"),d["default"].blacklist=!1,u["default"].addClass(document.getElementById("blacklistTips"),"hide"),d["default"].isEnd&&(p["default"](),document.activeElement.blur(),document.getElementById("textarea").blur());break;case"init_conv":d["default"].scheduler=!0,d["default"].messenger.targets.parent.send("conversation^@#yes"),d["default"].convId=e.body.id,d["default"].agentToken=e.body.agent.token,d["default"].agent=e.body.agent,d["default"].isBasic||m["default"]("newChat"),"mondeo"===d["default"].style?(v["default"]("header-"+d["default"].style,"headLeft",{
name:e.body.agent.nickname,signature:e.body.agent.signature}),v["default"]("profile","profile",{avatar:e.body.agent.avatar,name:e.body.agent.nickname,tel:e.body.agent.telephone,cellphone:e.body.agent.public_cellphone,email:e.body.agent.public_email,qq:e.body.agent.qq,weixin:e.body.agent.weixin})):v["default"]("header","headLeft",{avatar:e.body.agent.avatar,name:e.body.agent.nickname,signature:e.body.agent.signature}),N["default"](!0,q["default"]),A["default"]("bot"===e.body.agent.privilege),x["default"]("hide"),T["default"]("hide")}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=l["default"](e||'抱歉没能理解您的提问，可选择 <a role="reply" href="javascript:;;">留言</a>');if(!t)return!1;var n=t.getElementsByTagName("a")[0];n&&n.addEventListener("click",function(e){e.preventDefault(),o["default"](document.getElementById("pageChat"),"hide"),o["default"](document.getElementById("pageTicket"),"show")})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var r=n(23),o=a(r),s=n(75),l=a(s)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){if(!e)return!1;var t=document.createElement("div");return t.className="msg-common-tips",t.innerHTML=e,document.getElementById("msgHolder").appendChild(t),r["default"]("msgWrapper"),t};var i=n(10),r=a(i)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=document.getElementById("msgHolder").lastChild;if(!t)return!1;var n=t.getElementsByTagName("a")[0];if(n&&"redirect"===n.getAttribute("role"))return!1;var a=o["default"](e+'，可试下<a role="redirect" href="javascript:;;"> 转人工</a>');if(!a)return!1;var i=a.getElementsByTagName("a")[0];i&&i.addEventListener("click",function(e){e.preventDefault(),l["default"]()})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var r=n(75),o=a(r),s=n(77),l=a(s)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){p["default"](document.getElementById("btnCallAgent"),"hide");var e="redirect-to-agent-tip";if(document.getElementById(e))return!1;var t=u["default"]("正在为您转接，请稍候..");t.id=e,d["default"].addClass(document.getElementById("chatHasEnd"),"hide"),setTimeout(function(){var e={exclude_agent_tokens:[r["default"].agentToken]};r["default"].assignedAgentToken?e.agentToken=r["default"].assignedAgentToken:r["default"].assignedGroupToken&&(e.groupToken=r["default"].assignedGroupToken),s["default"](e,!0)},2e3)};var i=n(4),r=a(i),o=n(29),s=a(o),l=n(75),u=a(l),c=n(13),d=a(c),f=n(23),p=a(f)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(9),s=a(o),l=n(13),u=a(l),c=n(79),d=a(c),f=n(23),p=a(f),h=n(10),m=a(h),g=n(25),v=a(g),y=n(69),b=a(y),_=n(24),w=a(_),k=n(3),x=a(k),E=n(4),T=a(E),I=n(56),C=a(I),j=n(80),S=a(j),M=n(81),O=a(M),B=n(21),A=a(B),L=n(82),N=a(L),P=n(28),q=a(P),H=n(32),D=a(H),$=n(83),R=a($),U=n(29),z=a(U),F=n(66),J=a(F),W=n(85),G=a(W),X=n(86),Q=a(X),Z=n(87),V=a(Z),K=n(90),Y=a(K),ee=n(91),te=a(ee),ne=n(77),ae=a(ne),ie=n(92),re=a(ie),oe=n(20),se=a(oe),le=n(71),ue=a(le),ce=n(93),de=a(ce);t["default"]=function(){window.FormData&&"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof FileReader&&(T["default"].features.photo=!0,T["default"].features.upload=!0),document.getElementById("featureBtns").innerHTML=x["default"]("features",T["default"].features),T["default"].features.photo&&!function(){var e=document.getElementById("photoFile");e.addEventListener("change",function(){if(p["default"](document.getElementById("emojiHolder"),"hide"),e.value){var t=e.value.split(".");if(t=t[t.length-1].toLowerCase(),"png"===t||"jpg"===t||"jpeg"===t||"gif"===t){var n={id:1*new Date,from_type:"client",content_type:"photo",status:"sending",content:T["default"].protocol+r["default"].cdn+"/images/photo-sending.png",file:e.files[0]};D["default"]([n]),N["default"](n)}else A["default"]("只能发送图片哦（png/jpg/jpeg/gif）",5e3)}}),G["default"](document.getElementById("textarea"))}(),T["default"].features.upload&&!function(){var e=document.getElementById("uploadFile");e.addEventListener("change",function(){if(e.value){var t=e.files[0];if(t.size>5e7)A["default"]("只能发送小于 50MB 的文件哦",5e3);else{var n={id:1*new Date,from_type:"client",content_type:"file",status:"sending",file:t,uploading:!0,extra:{filename:t.name,size:t.size,type:t.type}};D["default"]([n]),V["default"](n)}}})}(),document.getElementById("emojiHolder").innerHTML=x["default"]("emoji",{list:T["default"].emojiGroup}),b["default"]("btnHidePanel","click",function(){T["default"].messenger.targets.parent.send("hidePanel^@#true")}),document.getElementById("btnSend").addEventListener("click",function(){R["default"](),de["default"].remove()}),document.getElementById("textarea").addEventListener("keyup",function(e){var t=document.getElementById("textarea"),n=t.value.trim();n.length>2048&&(t.value=n.substr(0,2048),A["default"]("最多只能发送 2048 个字符哦",5e3)),S["default"](n),J["default"]("set",n);var a=e.which||e.keyCode;38!==a&&40!==a&&de["default"].search(n)}),document.getElementById("textarea").addEventListener("keydown",function(e){var t=e.which||e.keyCode;return 13===t?(R["default"](),de["default"].remove(),e.preventDefault&&e.preventDefault(),!1):void(38==t?de["default"].select("prev"):40==t&&de["default"].select("next"))}),document.getElementById("textarea").addEventListener("focus",function(){var e=function t(){clearTimeout(window._TEXTAREA_FOCUS_TIMEOUT),O["default"](document.getElementById("textarea").value.trim()),window._TEXTAREA_FOCUS_TIMEOUT=setTimeout(function(){t()},350)};e()}),document.getElementById("textarea").addEventListener("blur",function(){clearTimeout(window._TEXTAREA_FOCUS_TIMEOUT),setTimeout(function(){de["default"].remove()},300)}),document.getElementById("emojiBtn").addEventListener("click",function(){p["default"](document.getElementById("emojiHolder"))}),window.CHOSE_EMOJI=function(e){p["default"](document.getElementById("emojiHolder"),"hide"),d["default"]("textarea",e);var t=document.getElementById("textarea"),n=t.value.trim();n.length>2048&&(t.value=n.substr(0,2048),A["default"]("最多只能发送 2048 个字符哦",5e3)),S["default"](n),J["default"]("set",n)},document.getElementById("msgHolder").addEventListener("click",function(e){if(u["default"].hasClass(e.target,"status-fail")||u["default"].hasClass(e.target,"photo-sned-fail")){var t=T["default"].loserClub[e.target.id];t&&C["default"](t)}else if(u["default"].hasClass(e.target,"photo-upload-fail")){var t=T["default"].loserClub[e.target.id];t&&N["default"](t)}else if(u["default"].hasClass(e.target,"btn-download")||u["default"].hasClass(e.target.parentNode,"btn-download")){var n=e.target.name||e.target.parentNode.name;n=n.split(",");var a=+n[0],i=+n[1];Y["default"](a,i)}});var e=!0;document.getElementById("msgHolder").addEventListener("click",function(t){if(u["default"].hasClass(t.target,"menu-item")){var n=t.target.innerHTML.trim().replace(/^\d+\.\s+/,"");n&&e&&(e=!1,setTimeout(function(){e=!0},500),document.getElementById("textarea").value=n,R["default"]())}u["default"].hasClass(t.target,"option")&&te["default"](t.target)}),document.getElementById("ticketAgain").addEventListener("click",function(){document.getElementById("ticketContent").value="",p["default"](document.getElementById("ticketSuccess"),"hide"),p["default"](document.getElementById("ticketForm"),"show")}),document.getElementById("chatHasEnd").addEventListener("click",function(e){"btn-restart-chat"===e.target.className&&(z["default"](),u["default"].addClass(document.getElementById("chatHasEnd"),"hide")),"btn-go-ticket"===e.target.className&&ue["default"]("pageTicket")}),document.getElementById("unableService").addEventListener("click",function(e){"btn-go-ticket"===e.target.className&&ue["default"]("pageTicket")}),document.getElementById("queueingTips").addEventListener("click",function(e){"btn-go-ticket"===e.target.className&&ue["default"]("pageTicket")}),window.SCROLL_TO_LAST=function(){m["default"]("msgWrapper")},T["default"].isBasic||document.getElementById("btnRing").addEventListener("click",function(){T["default"].ring="open"===T["default"].ring?"close":"open",q["default"](T["default"].ring),s["default"].set("MEIQIA_RING",T["default"].ring,{expires:1/0})});var t=document.getElementById("btnCallAgent");t&&t.addEventListener("click",ae["default"]),document.getElementById("evaluationBtn").addEventListener("click",function(){p["default"](document.getElementById("evaluationHolder")),p["default"](document.getElementById("evaluationMask"))}),document.getElementById("evaluationHolder").addEventListener("click",function(e){if(("evaluationHide"===e.target.id||"evaluationHide"===e.target.parentNode.id)&&(p["default"](document.getElementById("evaluationHolder"),"hide"),p["default"](document.getElementById("evaluationMask"),"hide")),("evaluation2"===e.target.id||"evaluation2"===e.target.parentNode.id)&&Q["default"].select(2),("evaluation1"===e.target.id||"evaluation1"===e.target.parentNode.id)&&Q["default"].select(1),("evaluation0"===e.target.id||"evaluation0"===e.target.parentNode.id)&&Q["default"].select(0),"evaluationSubmit"===e.target.id){var t=document.getElementById("evaluationLevel").value,n=document.getElementById("evaluationContent").value.trim();if(""===t)return A["default"]("请选择评价等级",5e3),!1;if(n.length>200)return A["default"]("最多只能发送 200 个字符哦",5e3),v["default"](document.getElementById("evaluationContent"),200,n.length),!1;Q["default"].submit(+t,n)}}),document.getElementById("evaluationMask").addEventListener("click",function(){p["default"](document.getElementById("evaluationHolder"),"hide"),p["default"](document.getElementById("evaluationMask"),"hide")}),document.getElementById("captchaImg").addEventListener("click",function(){se["default"]("captchaImg","callCaptchaToken")});var n=document.getElementById("callTel"),a=document.getElementById("callCaptcha"),i=document.getElementById("callTelGroup"),o=document.getElementById("captchaGroup"),l=document.getElementById("submitCall");n.addEventListener("keyup",function(){n.value?(u["default"].addClass(i,"input-active"),u["default"].hasClass(o,"hide")?w["default"].isPhoneNum(n.value)?u["default"].addClass(l,"submit-active"):u["default"].removeClass(l,"submit-active"):a.value?u["default"].addClass(l,"submit-active"):u["default"].removeClass(l,"submit-active")):(u["default"].removeClass(i,"input-active"),u["default"].removeClass(l,"submit-active"))}),a.addEventListener("keyup",function(){u["default"].hasClass(o,"hide")||(a.value?(u["default"].addClass(o,"input-active"),w["default"].isPhoneNum(n.value)?u["default"].addClass(l,"submit-active"):u["default"].removeClass(l,"submit-active")):(u["default"].removeClass(o,"input-active"),u["default"].removeClass(l,"submit-active")))}),document.getElementById("submitCall").addEventListener("click",function(){re["default"]()})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),r=a(i);t["default"]=function(e,t){var n=document.getElementById(e),a=n.scrollTop;if(document.selection)if(r["default"].isIE(6)||r["default"].isIE(7)||r["default"].isIE(8)||r["default"].isIE(9))n.focus(),n.value+=t;else{n.focus();var i=document.selection.createRange();i.text=t,i.moveStart("character",-n.value.length),i.moveStart("character",i.text.length+t.length),i.moveEnd("character",0)}else if(n.selectionStart||"0"==n.selectionStart){var o=n.selectionStart,s=n.selectionEnd;n.value=n.value.substring(0,o)+t+n.value.substring(s,n.value.length),n.selectionStart=o+t.length,n.selectionEnd=o+t.length,n.focus()}else n.focus(),n.value+=t;n.scrollTop=a}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(4),u=a(l),c=function d(e){u["default"].inputting||(e=e?e:document.getElementById("textarea").value.trim(),s["default"].ajax({url:r["default"].chat+"/client/inputting",type:"post",dataType:"json",contentType:"application/json",data:{ent_id:u["default"].entId,track_id:u["default"].trackId,content:e},beforeSend:function(){u["default"].inputting=!0},success:function(){setTimeout(function(){u["default"].inputting=!1,e!==document.getElementById("textarea").value.trim()&&d()},3e3)}}))};t["default"]=function(e){c(e)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),r=a(i);t["default"]=function(e){var t=document.getElementById("btnSend");e?r["default"].addClass(t,"active"):r["default"].removeClass(t,"active")}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(13),u=a(l),c=n(4),d=a(c),f=n(56),p=a(f);t["default"]=function(e){var t=document.getElementById("photo"+e.id),n={client_id:d["default"].trackId,agent_id:d["default"].agentToken,conv_id:d["default"].convId,from:"client"},a=function(){s["default"].upload({url:r["default"].upload+"/upload",dataType:"json",data:n,beforeSend:function(){u["default"].removeClass(t,"photo-upload-fail"),t.src=r["default"].cdn+"/images/photo-sending.png"},success:function(n){n.success?(p["default"]({id:e.id,content_type:"photo",content:n.photo_url}),document.getElementById("photoFile").value="",d["default"].loserClub[t.id]=""):(u["default"].addClass(t,"photo-upload-fail"),t.src=r["default"].cdn+"/images/photo-fail.png",d["default"].loserClub[t.id]=e)},error:function(){u["default"].addClass(t,"photo-upload-fail"),t.src=r["default"].cdn+"/images/photo-fail.png",d["default"].loserClub[t.id]=e}})};e.base64?(n.b64encoded=e.base64,n.filename=e.fileName,a()):document.createElement("canvas").getContext&&window.FileReader&&"mobile"===d["default"].device?!function(){var t=800,i=800,r=new FileReader;r.onload=function(r){var o=new Image;o.onload=function(){var r=o.width,s=o.height;if(r>t||s>i){var l=document.createElement("canvas");r>s?r>t&&(s*=t/r,r=t):s>i&&(r*=i/s,s=i),l.width=r,l.height=s,l.getContext("2d").drawImage(o,0,0,r,s),e.base64=l.toDataURL("image/png").split(",")[1],e.fileName=Math.random().toString(36).substr(2)+".png",n.b64encoded=e.base64,n.filename=e.fileName}else n.file=e.file;a()},o.src=r.target.result},r.readAsDataURL(e.file)}():(n.file=e.file,a())}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),r=a(i),o=n(84),s=a(o),l=n(4),u=a(l),c=n(56),d=a(c),f=n(32),p=a(f),h=n(66),m=a(h);t["default"]=s["default"](function(){var e=document.getElementById("textarea"),t=e.value.trim();if(t){e.value="",m["default"]("remove"),r["default"].removeClass(document.getElementById("btnSend"),"active");var n=1*new Date;p["default"]([{id:n,from_type:"client",content_type:"text",status:"sending",content:t,type:"text"}]),u["default"].convId?d["default"]({id:n,content_type:"text",content:t}):u["default"].fakeSentMsg.push({id:n,content_type:"text",content:t})}},500,!0)},function(e,t){"use strict";var n=arguments;Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,a){var i=void 0;return function(){var r=void 0,o=n,s=function(){i=null,a||e.apply(r,o)},l=a&&!i;clearTimeout(i),i=setTimeout(s,t),l&&e.apply(r,o)}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(11),s=a(o),l=n(4),u=a(l),c=n(82),d=a(c),f=n(32),p=a(f),h=n(21),m=a(h);t["default"]=function(e){"desktop"===u["default"].device&&s["default"].isThisDevice("chrome")&&e.addEventListener("paste",function(e){if(e.clipboardData.items)for(var t=e.clipboardData.items,n=0,a=t.length;a>n;n++)t[n].type.match(/^image\//)&&!function(){var e=new FileReader,a=t[n].getAsFile();e.onload=function(e){var t=e.target.result.split(",")[1],n=/^image\/(.+)$/.exec(a.type);n=n?n[1]:"png";var i=Math.random().toString(36).substr(2)+"."+n;if(t&&i){var o={id:1*new Date,from_type:"client",content_type:"photo",status:"sending",content:u["default"].protocol+r["default"].cdn+"/images/photo-sending.png",base64:t,fileName:i};p["default"]([o]),d["default"](o)}else m["default"]("粘贴图片失败，请用「图片按钮」上传图片")},e.readAsDataURL(a)}()})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(13),u=a(l),c=n(23),d=a(c),f=n(4),p=a(f),h=n(21),m=a(h),g=n(32),v=a(g),y=function(e,t){s["default"].ajax({url:p["default"].protocol+r["default"].chat+"/conversation/"+p["default"].convId+"/evaluation",type:"post",contentType:"application/json",data:{level:e,content:t},beforeSend:function(){d["default"](document.getElementById("evaluationHolder"),"hide"),d["default"](document.getElementById("evaluationMask"),"hide")},success:function(n){if(n.success){var a="好评";0===e&&(a="差评"),1===e&&(a="中评");var i={id:1*new Date,from_type:"evaluation",level:e,levelText:a,content:t};v["default"]([i])}else m["default"]("评价失败，请稍后重试",3e3)},error:function(){m["default"]("评价失败，请稍后重试",3e3)}})},b=function(e){document.getElementById("evaluationLevel").value=e,document.getElementById("evaluationHolder").className="",u["default"].addClass(document.getElementById("evaluationHolder"),"evaluation-active-"+e)};t["default"]={submit:y,select:b}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(46),u=a(l),c=n(88),d=a(c),f=n(56),p=a(f),h=n(89),m=a(h);t["default"]=function(e){var t=function(t){var n=document.getElementById("cancelUpload"+e.id),a=document.getElementById("fileState"+e.id),i=document.getElementById("progress"+e.id);n.addEventListener("click",function(){t.abort(),m["default"](e.extra),a.innerHTML="取消上传",i.style.display="none",n.style.display="none"})};s["default"].ajax({url:r["default"].chat+"/upload/policies",contentType:"application/json",type:"POST",data:{filename:e.extra.filename},success:function(n){var a={};for(var i in n.policy.fields)"Content-Type"!==i&&(a[i]=n.policy.fields[i]);a.file=e.file;var r=(new Date).getTime();s["default"].upload({url:n.policy.url,data:a,beforeSend:function(e){t(e),document.getElementById("uploadFile").value=""},progress:function(t){var n=t.position||t.loaded,a=t.totalSize||t.total,i=((new Date).getTime()-r)/1e3,o=u["default"](i?n/i:0);document.getElementById("progressBar"+e.id).style.width=Math.round(n/a*100)+"%",document.getElementById("speed"+e.id).innerHTML=o+"/s"},success:function(){p["default"]({id:e.id,content_type:"file",content:n.policy.fields.key,extra:{filename:e.extra.filename,size:e.extra.size,type:e.extra.type,expire_at:d["default"]((new Date).setDate((new Date).getDate()+1))}})},error:function(){document.getElementById("fileState"+e.id).innerHTML="上传失败",document.getElementById("cancelUpload"+e.id).style.display="none",document.getElementById("progress"+e.id).style.display="none"}})},error:function(){}})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e.getUTCFullYear||(e=new Date(e)),e.getUTCFullYear()+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e6).toFixed(6).slice(2)};t["default"]=n;var a=function(e){return 10>e?"0"+e:e}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(4),u=a(l);t["default"]=function(e){s["default"].ajax({url:r["default"].chat+"/client/cancel_upload",type:"post",dataType:"json",contentType:"application/json",data:{ent_id:u["default"].entId,track_id:u["default"].trackId,conversation_id:u["default"].convId,browser_id:u["default"].browserId,type:e.type,size:e.size,filename:e.filename}})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(4),u=a(l);t["default"]=function(e,t){s["default"].ajax({url:r["default"].chat+"/client/file_downloaded",type:"post",dataType:"json",contentType:"application/json",data:{ent_id:u["default"].entId,track_id:u["default"].trackId,conversation_id:t,msg_id:e}})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(13),u=a(l),c=n(4),d=a(c),f=n(21),p=a(f),h=n(76),m=a(h),g=n(32),v=a(g);t["default"]=function(e){if(!e)return!1;var t=e.parentNode,n=t.getAttribute("data-question-id"),a="useful"===e.getAttribute("data-option")?1:0;if(!n)return!1;var i={ent_id:d["default"].entId,track_id:d["default"].trackId,useful:a,conv_id:d["default"].convId};s["default"].ajax({url:r["default"].chat+"/knowledge/questions/"+n+"/evaluate",type:"post",dataType:"json",contentType:"application/json",data:i,beforeSend:function(){u["default"].addClass(t,"pending")},success:function(e){u["default"].removeClass(t,"pending"),u["default"].addClass(t,"rated"),e.message&&v["default"]([{id:Math.random(),from_type:"bot",agent:{nickname:""},content_type:"text",content:e.message}]),i.useful||m["default"]("很抱歉您对此回答不满意")},error:function(e){var n={};try{n=JSON.parse(e.responseText)}catch(a){}setTimeout(function(){p["default"](n.message||"提交失败，请稍候再试",3e3),u["default"].removeClass(t,"pending")},1e3)}})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=a(i),o=n(16),s=a(o),l=n(13),u=a(l),c=n(23),d=a(c),f=n(24),p=a(f),h=n(4),m=a(h),g=n(21),v=a(g);t["default"]=function(){function e(){s["default"].ajax({url:r["default"].chat+"/web_callback/calls",type:"post",dataType:"json",contentType:"application/json",header:l,data:o,beforeSend:function(){u["default"].addClass(t,"disabled")},success:function(){d["default"](document.getElementById("callForm"),"hide"),d["default"](document.getElementById("callSuccess"),"show"),u["default"].removeClass(t,"disabled")},error:function(e){var n={};try{n=JSON.parse(e.responseText),n.captcha_token&&(m["default"].callCaptchaToken=n.captcha_token,document.getElementById("captchaImg").src=n.captcha_image_url,u["default"].removeClass(a,"hide"))}catch(i){}v["default"](n.message||"提交失败，请稍候再试",3e3),u["default"].removeClass(t,"disabled")}})}var t=document.getElementById("submitCall"),n=document.getElementById("callTel"),a=document.getElementById("captchaGroup"),i=document.getElementById("callCaptcha"),o={ent_id:m["default"].entId,track_id:m["default"].trackId},l=void 0;if(!p["default"].isPhoneNum(n.value))return v["default"]("请正确填写手机或带区号的座机号码",3e3),!1;if(o.phone=n.value,!u["default"].hasClass(a,"hide")){if(!i.value)return v["default"]("请正确填写验证码",3e3),!1;l={"Captcha-Value":i.value,"Captcha-Token":m["default"].callCaptchaToken}}u["default"].hasClass(t,"disabled")||e()}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(){k&&k.abort&&k.abort()}function r(e,t){if(e>t){var n=[t,e];e=n[0],t=n[1]}var a=e-1;return{curr:function(){return a},prev:function(){return e>=a?a=t:a-=1},next:function(){return a>=t?a=e:a+=1}}}function o(e){e&&e.getAttribute&&(document.getElementById("textarea").value=(e.getAttribute("data-question")||"").replace(/<em>|<\/em>/g,""))}function s(e){if(!e.length)return!1;var t=v.map(e.slice(0,8),function(e){return'\n        <li>\n            <a class="autocomplete-item" data-question="'+e.question+'">\n                '+e.question+"\n            </a>\n        </li>\n    "}).join(""),n=document.getElementById("autocomplete");if(!n){n=document.createElement("div"),n.id="autocomplete",C&&(n.style.border="1px solid #f0f0f0");var a=document.getElementById("msgWrapper");a&&a.parentNode&&a.parentNode.appendChild(n)}n.innerHTML="<ul>"+t+"</ul>",T=n.getElementsByTagName("a");for(var i=0;i<T.length;++i)!function(e){e.onclick=function(){o(e),j.remove(),b["default"]()},e.onmouseenter=function(){var e=T[E.curr()];E&&e&&e.removeAttribute("data-current")}}(T[i]);E=r(0,T.length-1)}function l(e,t){return i(),x[e]?t(x[e]):void(k=h["default"].ajax({url:c["default"].chat+"/robot/auto_complete",type:"get",data:{text:e,ent_id:f["default"].entId},success:function(n){n&&n.success&&t(x[e]=n.data||[])}}))}Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),c=a(u),d=n(4),f=a(d),p=n(16),h=a(p),m=n(48),g=a(m),v=n(47),y=n(83),b=a(y),_=n(94),w=a(_),k=null,x={},E=null,T=[],I="",C=!w["default"]("box-shadow"),j={search:function(e){return I===e?!1:f["default"].isBot?g["default"].string(e)&&e.length?(I=e,void l(e,s)):j.remove():!1},remove:function(){i();var e=document.getElementById("autocomplete");return e&&e.parentNode.removeChild(e),E=null,T=[],I="",!1},select:function(e){var t=document.getElementById("autocomplete");if(t&&E&&T.length){var n=T[E.curr()];n&&n.removeAttribute("data-current"),/^(prev|next)$/.test(e)&&E[e](),o(n=T[E.curr()]),n&&n.setAttribute("data-current","true")}}};t["default"]=j},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=document.createElement("div"),n="Ms O Moz Webkit".split(" "),a=n.length;if(e in t.style)return!0;for(e=e.replace(/^[a-z]/,function(e){return e.toUpperCase()});a--;)if(n[a]+e in t.style)return!0;return!1}},,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),r=a(i),o=n(3),s=a(o),l=n(4),u=a(l),c=n(5),d=a(c),f=n(7),p=a(f),h=n(73),m=a(h),g=n(78),v=a(g);u["default"].type="normal",u["default"].style="fiesta",u["default"].device="desktop",u["default"].isBasic=!1,u["default"].tpl=s["default"],u["default"].handleSocketMsg=m["default"],document.getElementById("audioHolder").innerHTML=u["default"].tpl("audio",{cdn:r["default"].cdn}),d["default"].loadBtnBgi("icon-css"),p["default"](),v["default"](),u["default"].messenger.targets.parent.send("chatReady^@#true")}]);