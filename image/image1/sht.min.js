!function(){var t=Array.prototype,e=Object.prototype,n=t.slice,r=e.toString,i=e.hasOwnProperty,o=window.console,u=window.navigator,a=window.document,c=u.userAgent,f={},s="https:"==a.location.protocol?"https://":"http://",l=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,p=!1,h={api_host:s+"dc.sanhao.com",debug:!1};!function(){var e=t.forEach,o=Array.isArray,u={};f.each=function(t,n,r){if(null!=t)if(e&&t.forEach===e)t.forEach(n,r);else if(t.length===+t.length){for(var o=0,a=t.length;a>o;o++)if(o in t&&n.call(r,t[o],o,t)===u)return}else for(var c in t)if(i.call(t,c)&&n.call(r,t[c],c,t)===u)return},f.extend=function(t){return f.each(n.call(arguments,1),function(e){for(var n in e)void 0!==e[n]&&(t[n]=e[n])}),t},f.isUndefined=function(t){return void 0===t},f.isString=function(t){return"[object String]"==r.call(t)},f.isArray=o||function(t){return"[object Array]"===r.call(t)},f.isFunction=function(t){try{return/^\s*\bfunction\b/.test(t)}catch(e){return!1}},f.isArguments=function(t){return!(!t||!i.call(t,"callee"))},f.toArray=function(t){return t?t.toArray?t.toArray():f.isArray(t)?n.call(t):f.isArguments(t)?n.call(t):f.values(t):[]},f.isObject=function(t){return t===Object(t)&&!f.isArray(t)},f.includes=function(t,e){return-1!==t.indexOf(e)}}(),f.truncate=function(t,e){var n;return"string"==typeof t?n=t.slice(0,e):f.isArray(t)?(n=[],f.each(t,function(t){n.push(f.truncate(t,e))})):f.isObject(t)?(n={},f.each(t,function(t,r){n[r]=f.truncate(t,e)})):n=t,n},f.strip_empty_properties=function(t){var e={};return f.each(t,function(t,n){f.isString(t)&&t.length>0&&(e[n]=t)}),e},f.JSONEncode=function(){return function(t){var e=t,n=function(t){var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return e.lastIndex=0,e.test(t)?'"'+t.replace(e,function(t){var e=n[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'},o=function(t,e){var u="",a="    ",c=0,f="",s="",l=0,p=u,h=[],d=e[t];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(t)),typeof d){case"string":return n(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(u+=a,h=[],"[object Array]"===r.apply(d)){for(l=d.length,c=0;l>c;c+=1)h[c]=o(c,d)||"null";return s=0===h.length?"[]":u?"[\n"+u+h.join(",\n"+u)+"\n"+p+"]":"["+h.join(",")+"]",u=p,s}for(f in d)i.call(d,f)&&(s=o(f,d),s&&h.push(n(f)+(u?": ":":")+s));return s=0===h.length?"{}":u?"{"+h.join(",")+p+"}":"{"+h.join(",")+"}",u=p,s}};return o("",{"":e})}}(),f.JSONDecode=function(){var t,e,n,r,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},o=function(e){throw{name:"SyntaxError",message:e,at:t,text:n}},u=function(r){return r&&r!==e&&o("Expected '"+r+"' instead of '"+e+"'"),e=n.charAt(t),t+=1,e},a=function(){var t,n="";for("-"===e&&(n="-",u("-"));e>="0"&&"9">=e;)n+=e,u();if("."===e)for(n+=".";u()&&e>="0"&&"9">=e;)n+=e;if("e"===e||"E"===e)for(n+=e,u(),("-"===e||"+"===e)&&(n+=e,u());e>="0"&&"9">=e;)n+=e,u();return t=+n,isFinite(t)?t:void o("Bad number")},c=function(){var t,n,r,a="";if('"'===e)for(;u();){if('"'===e)return u(),a;if("\\"===e)if(u(),"u"===e){for(r=0,n=0;4>n&&(t=parseInt(u(),16),isFinite(t));n+=1)r=16*r+t;a+=String.fromCharCode(r)}else{if("string"!=typeof i[e])break;a+=i[e]}else a+=e}o("Bad string")},f=function(){for(;e&&" ">=e;)u()},s=function(){switch(e){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}o("Unexpected '"+e+"'")},l=function(){var t=[];if("["===e){if(u("["),f(),"]"===e)return u("]"),t;for(;e;){if(t.push(r()),f(),"]"===e)return u("]"),t;u(","),f()}}o("Bad array")},p=function(){var t,n={};if("{"===e){if(u("{"),f(),"}"===e)return u("}"),n;for(;e;){if(t=c(),f(),u(":"),Object.hasOwnProperty.call(n,t)&&o('Duplicate key "'+t+'"'),n[t]=r(),f(),"}"===e)return u("}"),n;u(","),f()}}o("Bad object")};return r=function(){switch(f(),e){case"{":return p();case"[":return l();case'"':return c();case"-":return a();default:return e>="0"&&"9">=e?a():s()}},function(i){var u;return n=i,t=0,e=" ",u=r(),f(),e&&o("Syntax error"),u}}(),f.HTTPBuildQuery=function(t,e){var n,r,i=[];return"undefined"==typeof e&&(e="&"),f.each(t,function(t,e){n=encodeURIComponent(t.toString()),r=encodeURIComponent(e),i[i.length]=r+"="+n}),i.join(e)},f.getQueryParam=function(t,e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&#]"+e+"=([^&#]*)",r=new RegExp(n),i=r.exec(t);return null===i||i&&"string"!=typeof i[1]&&i[1].length?"":decodeURIComponent(i[1]).replace(/\+/g," ")},f.register_event=function(){function t(t,n,r){var i=function(i){if(i=i||e(window.event),!i)return void 0;var o,u,a=!0;return f.isFunction(r)&&(o=r(i)),u=n.call(t,i),(!1===o||!1===u)&&(a=!1),a};return i}function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}var n=function(e,n,r,i){if(!e)return void d.error("No valid element provided to register_event");if(e.addEventListener&&!i)e.addEventListener(n,r,!1);else{var o="on"+n,u=e[o];e[o]=t(e,r,u)}};return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},n}(),f.cookie={get:function(t){for(var e=t+"=",n=a.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e))return decodeURIComponent(i.substring(e.length,i.length))}return null},parse:function(t){var e;try{e=f.JSONDecode(f.cookie.get(t))||{}}catch(n){}return e},set:function(t,e,n,r,i){var o="",u="",c="";if(r){var f=a.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),s=f?f[0]:"";o=s?"; domain=."+s:""}if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),u="; expires="+l.toGMTString()}i&&(c="; secure"),a.cookie=t+"="+encodeURIComponent(e)+u+"; path=/"+o+c},remove:function(t,e){f.cookie.set(t,"",-1,e)}},f.UUID=function(){var t=function(){for(var t=1*new Date,e=0;t==1*new Date;)e++;return t.toString(16)+e.toString(16)},e=function(){return Math.random().toString(16).replace(".","")},n=function(){function t(t,e){var n,r=0;for(n=0;n<e.length;n++)r|=i[n]<<8*n;return t^r}var e,n,r=c,i=[],o=0;for(e=0;e<r.length;e++)n=r.charCodeAt(e),i.unshift(255&n),i.length>=4&&(o=t(o,i),i=[]);return i.length>0&&(o=t(o,i)),o.toString(16)};return function(){return n()+t()+e()}}(),f.info={resolution:function(){return screen.width+"*"+screen.height},properties:function(){var t=a.referrer;return f.strip_empty_properties({rs:f.info.resolution(),url:a.URL,referrer:t})}};var d={log:function(){if(p&&!f.isUndefined(o)&&o)try{o.log.apply(o,arguments)}catch(t){f.each(arguments,function(t){o.log(t)})}},error:function(){if(p&&!f.isUndefined(o)&&o){var t=["sh error:"].concat(f.toArray(arguments));try{o.error.apply(o,t)}catch(e){f.each(t,function(t){o.error(t)})}}}},g=function(){this.config={},f.extend(this.config,h),this._cid=null,this._uid=null};g.prototype.init=function(t,e){this._key=t,this._jsc=function(){},f.isObject(e)&&(f.extend(this.config,e),p=p||this.config.debug),this.initCookie()},g.prototype.initCookie=function(){this._cid=f.cookie.get("shcid"),this._uid=f.cookie.get("shuid"),null==this._cid&&(this._cid=f.UUID(),f.cookie.set("shcid",this._cid,3650,!0,!1))},g.prototype.debug=function(t){p=t},g.prototype.identify=function(t){this._uid=t,f.cookie.set("shuid",t,3650,!0,!1)},g.prototype.page=function(t,e){var n=a.location.href,r={};r.type="pv",r.event="pv",r.props={title:"undefined"==typeof t?a.title:t,url:n,referrer:a.referrer},this._sendTrackRequest(r,this._prepareCallback(e,r))},g.prototype.track=function(t,e,n){var r={};r.type="cus",r.event=t,r.props=e,this._sendTrackRequest(r,this._prepareCallback(n,r))},g.prototype._prepareCallback=function(t,e){if(f.isUndefined(t))return null;if(l){var n=function(n){t(n,e)};return n}var r=this._jsc,i=""+Math.floor(1e8*Math.random()),o='sh_jsc["'+i+'"]';return r[i]=function(n){delete r[i],t(n,e)},o},g.prototype._sendTrackRequest=function(t,e){t.app=this._key,t.cid=this._cid,t.uid=this._uid,t.ts=1*new Date/1e3,t.rs=f.info.resolution();var n=f.truncate(t,255),r=f.JSONEncode(n);d.log("SANHAO REQUEST DATA:"),d.log(n),data={events:r,_:(new Date).getTime().toString()};var i=this.config.api_host+"?"+f.HTTPBuildQuery(data);this._sendRequest(i,e)},g.prototype._sendRequest=function(t,e){if(l){var n=new XMLHttpRequest;n.open("GET",t,!0),n.withCredentials=!0,n.onreadystatechange=function(){if(4===n.readyState){if(200!==n.status){var t="Bad HTTP status: "+n.status+" "+n.statusText;d.error(t)}e&&e(n.status)}},n.send(null)}else{var r=a.createElement("script");r.type="text/javascript",r.async=!0,r.defer=!0,r.src=t;var i=a.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i)}},g.prototype.push=function(t){var e=t.shift();this[e]&&this[e].apply(this,t)};for(var v=window.sht||[],y=new g;v&&v.length>0;){var m=v.shift(),b=m.shift();y[b]&&y[b].apply(y,m)}window.sht=y}();
var config = {
    api_host: 'http://cj.sanhao.com:12000/'
    //api_host: 'http://192.168.1.244:12000/'
};
// 初始化(应用ID, 配置)
sht.init('sanhao.com', config);
//sht.init('sh.com', config);
// 收集当前页面
sht.page();